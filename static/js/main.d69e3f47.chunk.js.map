{"version":3,"sources":["redux/reducers/functions/functions.js","parser/grammar.js","serviceWorker.ts","constants/index.js","math_view/buttons/LockButton.js","math_view/buttons/HelpButton.js","math_view/buttons/AddButton.js","math_view/components/Expressions.js","redux/actions/index.js","redux/containers/ExpressionsContainer.js","graph_view/components/TrayWidget.tsx","graph_view/components/TrayItemWidget.tsx","graph_view/components/MainCanvasWidget.tsx","graph_view/nodes/ConstantNames.tsx","graph_view/nodes/functions.ts","constants/parser_start_rules.js","graph_view/labels/binary/BinaryLabelModel.tsx","graph_view/nodes/NaryRelationPortModel.ts","graph_view/nodes/constant/ConstantPortModel.ts","graph_view/nodes/constant/ConstantNodeModel.ts","graph_view/nodes/BaseNodeModel.ts","graph_view/nodes/ternary/TernaryNodeModel.ts","graph_view/nodes/quaternary/QuaternaryNodeModel.ts","graph_view/links/binary/BinaryLinkModel.ts","graph_view/nodes/unbinary/UnBinaryPortModel.ts","graph_view/nodes/unbinary/UnBinaryNodeModel.ts","graph_view/nodes/unbinary/UnBinaryPortLabelWidget.tsx","graph_view/nodes/DropDownMenuWidget.tsx","graph_view/labels/binary/BinaryLabelWidget.tsx","graph_view/nodes/unbinary/UnBinaryNodeWidget.tsx","graph_view/nodes/constant/ConstantNodeWidget.tsx","graph_view/nodes/NaryListWidget.tsx","graph_view/nodes/ternary/TernaryNodeWidget.tsx","graph_view/nodes/quaternary/QuaternaryNodeWidget.tsx","graph_view/components/TrayItemWidgetIcon.js","graph_view/components/BodyWidget.tsx","redux/containers/DiagramModelContainer.js","math_view/buttons/TableButton.js","math_view/buttons/DatabaseButton.js","math_view/components_parts/TextInput.js","math_view/components_parts/TextComponent.js","math_view/components/Language.js","redux/containers/LanguageContainer.js","math_view/components/VariablesValue.js","redux/containers/VariablesValueContainer.js","math_view/components_parts/Domain.js","math_view/components_parts/ConstantInterpretation.js","math_view/components/RelationalTable.js","math_view/components_parts/SelectComponent.js","math_view/components_parts/DatabasePredicate.js","math_view/components_parts/PredicateInterpretation.js","math_view/components_parts/DatabaseFunction.js","math_view/components_parts/FunctionInterpretation.js","math_view/components/Structure.js","redux/containers/StructureContainer.js","math_view/MathSystem.js","redux/containers/MathSystemContainer.js","math_view/buttons/DownloadButton.js","math_view/components_parts/ModalComponent.js","math_view/buttons/HelpGraphButton.js","math_view/buttons/ButtonToolbarComponent.js","math_view/buttons/HelpGraphCollapse.js","App.tsx","redux/containers/AppContainer.js","model/Structure.js","constants/messages.js","model/Language.js","redux/reducers/language.js","redux/actions/action_types.js","redux/reducers/structure.js","model/Expression.js","model/formula/Formula.js","model/formula/Formula.EqualityAtom.js","model/formula/Formula.Disjunction.js","model/formula/Formula.PredicateAtom.js","model/formula/Formula.Negation.js","model/term/Term.js","model/term/Term.Constant.js","model/formula/Formula.Implication.js","model/formula/Formula.Conjunction.js","model/term/Term.Variable.js","model/term/Term.FunctionTerm.js","model/formula/Formula.UniversalQuant.js","model/formula/Formula.ExistentialQuant.js","redux/reducers/expressions.js","redux/reducers/teacherMode.ts","graph_view/nodes/unbinary/UnBinaryNodeFactory.tsx","graph_view/nodes/constant/ConstantNodeFactory.tsx","graph_view/labels/binary/BinaryLabelFactory.tsx","graph_view/nodes/SimplePortFactory.ts","graph_view/links/binary/BinaryLinkPointWidget.tsx","graph_view/links/binary/BinaryLinkSegmentWidget.tsx","graph_view/links/binary/BinaryLinkWidget.tsx","graph_view/links/binary/BinaryLinkFactory.tsx","graph_view/nodes/quaternary/QuaternaryNodeFactory.tsx","graph_view/nodes/ternary/TernaryNodeFactory.tsx","graph_view/DiagramAplication.ts","redux/reducers/diagram.js","redux/reducers/index.ts","index.tsx"],"names":["parser","require","module","exports","parseText","text","textData","parserOptions","value","errorMessage","length","parsedValue","parse","items","parsed","e","console","error","message","peg$SyntaxError","expected","found","location","this","name","Error","captureStackTrace","child","parent","ctor","constructor","prototype","peg$subclass","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","i","escapedParts","parts","Array","classEscape","inverted","any","end","other","description","hex","ch","charCodeAt","toString","toUpperCase","s","replace","j","descriptions","type","sort","slice","join","describeExpected","describeFound","SyntaxError","input","options","peg$result","peg$FAILED","peg$startRuleFunctions","formula","peg$parseformula","term","peg$parseterm","constants","s0","s1","s2","s3","s4","s5","s6","s8","peg$currPos","peg$parsespaces","peg$parseIdentifier","peg$silentFails","peg$fail","peg$c26","peg$savedPos","peg$c100","push","concat","predicates","peg$parselanguage_predicate","peg$c102","functions","peg$parselanguage_function","peg$c104","domain","peg$parseDomainIdentifier","peg$c114","peg$c115","tuples","peg$parsetuple","peg$c116","peg$c117","e_tuples","peg$parsee_tuple","peg$startRuleFunction","peg$c3","peg$literalExpectation","peg$c5","peg$c21","Structure","language","hasPredicate","peg$c27","t","t1","peg$c29","peg$otherExpectation","peg$c30","peg$c31","peg$classExpectation","peg$c33","peg$c35","peg$c37","peg$c39","peg$c41","peg$c43","peg$c45","peg$c47","peg$c49","peg$c51","peg$c53","peg$c55","peg$c57","peg$c59","peg$c61","peg$c63","peg$c65","peg$c67","peg$c69","peg$c71","peg$c73","peg$c75","peg$c77","peg$c79","peg$c81","peg$c83","peg$c85","peg$c87","peg$c89","peg$c91","peg$c93","peg$c95","peg$c97","peg$c99","c1","c2","p1","p2","f1","f2","peg$c106","peg$c107","peg$c108","peg$c109","peg$c111","i1","i2","l","t2","peg$c120","peg$c121","peg$c122","peg$c124","peg$c127","peg$c129","peg$c131","peg$c133","peg$c134","peg$c135","peg$c136","peg$c137","peg$c138","peg$c139","peg$c140","peg$c141","peg$c142","peg$c143","peg$c144","peg$c145","peg$c146","peg$c147","peg$c148","peg$c149","peg$c150","peg$c151","peg$c152","peg$c153","peg$c154","peg$posDetailsCache","line","column","peg$maxFailPos","peg$maxFailExpected","startRule","peg$buildSimpleError","peg$computeLocation","ignoreCase","peg$computePosDetails","pos","p","details","startPos","endPos","startPosDetails","endPosDetails","start","offset","peg$buildStructuredError","s7","substr","peg$parserequired_space","peg$parseconjunction_symbol","Conjunction","peg$parsedisjunction_symbol","left","right","Disjunction","peg$c7","peg$parseimplication_symbol","Implication","peg$c8","peg$parseequality_symbol","EqualityAtom","peg$parsenon_equality_symbol","Negation","peg$c10","peg$parseexists_symbol","peg$parsevariable_symbol","ExistentialQuant","peg$parseuni_symbol","v","f","UniversalQuant","peg$c12","peg$parsenegation_symbol","peg$c13","peg$parseterms","checkPredicateArity","peg$c23","peg$parsepredicate_symbol","peg$parseformula_cases","hasFunction","ts","peg$c20","peg$parsefunction_symbol","FunctionTerm","hasConstant","substring","peg$parseconstant_symbol","Constant","Variable","peg$parseterm_cases","test","charAt","peg$parsepredicate_arity","arity","peg$parsefunction_arity","s9","peg$parseIdentifierStart","peg$parseIdentifierPart","peg$parseIdentifierName","peg$parseLu","peg$parseLl","peg$parseLt","peg$parseLm","peg$parseLo","peg$parseNl","peg$parseUnicodeLetter","peg$parseMn","peg$parseMc","peg$parseUnicodeCombiningMark","peg$parseNd","peg$parseUnicodeDigit","conjunction","disjunction","implication","existentialQuant","universalQuant","negation","constant","variable","functionTerm","Predicate","predicate","equalityAtom","structure","id","terms","getPredicate","Boolean","window","hostname","match","TERM","EXPRESSION_LABEL","FORMULA","LockButton","lockFn","locked","Button","variant","className","onClick","HelpButton","dataTarget","style","padding","size","title","data-toggle","data-target","aria-expanded","aria-controls","AddButton","onClickAddFunction","addType","helpFormula","helpTerm","prepareExpressions","formulas","expressionType","answers","Fragment","key","help","panelTitle","map","item","getTermAnswers","Expressions","props","expression","Card","Header","as","toLowerCase","Body","index","Form","Row","Col","sm","md","lg","Group","InputGroup","Prepend","Text","Control","onChange","onInputChange","target","disabled","inputLocked","isInvalid","Append","removeExpression","teacherMode","lockExpressionValue","Feedback","xs","answerValue","setExpressionAnswer","answerLocked","lockExpressionAnswer","expressionValue","addExpression","setConstantValue","constantName","setPredicateValueText","predicateName","setPredicateValueTable","checked","setFunctionValueText","functionName","setFunctionValueTable","lockDomain","lockConstantValue","lockPredicateValue","lockFunctionValue","toggleTable","itemType","toggleDatabase","importDiagramState","state","focusOnBodyFunc","mapDispatchToProps","answer","expressionIndex","ExpressionContainer","connect","expressions","structureObject","common","Tray","styled","div","TrayWidget","children","React","BasicTray","ItemWidgetIcon","color","draggable","onDragStart","event","dataTransfer","setData","JSON","stringify","model","clickFunction","element","reduxProps","Container","MainCanvasWidget","background","ADDPORT","ADDPORTSELECTED","TO","canUseNameForGivenArityAndType","elementName","elementArity","getState","has","givenSet","finalSet","entries","langaugeElementName","languageElementArity","functionIsAlreadyDefinedForGivenFunction","functionParameters","functionValue","functionInterpretation","iFunction","Object","get","funcParameters","funcValue","selectOnlyCurrentGraphElement","currentModel","engine","getModel","clearSelection","setSelected","repaintCanvas","setNodeBadName","canUseNameForNode","oldName","newName","nodeType","diagramState","setNodeBadNameIfStateContainsNodeWithSameName","domainNodes","constantNodes","setDomainBadNameIfRegexViolated","setConstantsBadNameIfRegexViolated","getAvailableLanguageElementForGivenArity","modelSet","languageElementSet","Set","languageElement","elementValue","add","getMaxLengthForGivenLanguageElementWithArity","maxLength","getWidestElement","isDropDownMenu","inputElementTestLength","width","predicateArity","functionArity","predicateWidth","getReduxProps","functionWidth","BinaryLabelModel","offsetY","editable","changeCounter","Map","registerEvents","label","registerListener","entityRemoved","removeLabelFromMathView","getParent","getSourcePort","getNode","getTargetPort","getSourceDomainNode","getNodeName","getTargetDomainNode","getPredicates","clear","getFunctions","direction","bool","setLocked","getOptions","addBinaryPredicateToSet","addUnaryFunctionToSet","alreadyDefinedInFromDirection","getNodeParameters","getFunctionValue","alreadyDefinedInToDirection","setLanguageElementDirection","set","increaseChangeCounter","delete","removeUnaryFunctionFromSet","removeBinaryPredicateFromSet","currentDirection","changeDirection","currDirection","data","LabelModel","NaryRelationPortModel","alignment","PortModelAlignment","LEFT","getMaximumLinks","BinaryLinkModel","port","UnBinaryNodeModel","getName","PortModel","ConstantPortModel","BOTTOM","getParentCanvasModel","_","values","getLinks","link","ConstantNodeModel","previousName","mainPort","setUpConstantPort","addPort","getMainPort","remove","domainNodeName","node","setCallReduxFunc","removeNodeFromMathView","ports","setParent","NodeModel","BaseNodeModel","parameterPorts","parameterPortsArray","appendPort","getNumberOfPorts","registerParameterPorts","registerAppendPort","directions","RIGHT","TOP","portValue","getNodeNameCombination","valueNode","numberOfPorts","date","removeNodeFromGraphView","addPredicateToSet","addElementToMathView","addFunctionToSet","removeElementFromMathView","removePredicateFromSet","removeFunctionFromSet","func","functionsToDelete","setMaximumLinks","TernaryNodeModel","QuaternaryNodeModel","canCallReduxFunc","selectedColor","curvyness","callReduxFunc","removeLinkIfCondition","keys","linkObject","existNodeWithSameCombination","nodeCombination","diagramModel","naryNode","getNodes","targetPortChanged","sourceNode","targetNode","canSelectNode","addLabel","constantNode","unbinaryNode","constantPort","undefined","isCallReduxFunc","setConstantValueInMathView","naryPort","previousCombination","setValueToPort","naryNodeCombination","representNodeInMathView","removeValueFromPort","num","points","curve","BezierCurve","setSource","getFirstPoint","getPosition","setTarget","getLastPoint","setSourceControl","clone","setTargetControl","sourcePort","getSourceControl","translate","calculateControlOffset","targetPort","getTargetControl","getSVGCurve","labels","labelOb","setLabel","fireEvent","removeLink","LinkModel","UnBinaryPortModel","links","getID","unaryPredicates","addTemplatePorts","addUnaryPredicate","addUnaryPredicateToSet","removeUnaryPredicateFromSet","unaryPredicate","PortLabel","Port","height","DropDownModel","pointerEvents","cursor","DropDownPorts","DropDownTitleName","DropDownContainer","DropDownInputElement","DropDownRowContainer","DropDownLanguageElement","DropDownMenuWidget","textInput","generateAvailableLanguageElement","alreadyDefined","parseInt","addPredicate","addFunction","generatePredicateComponent","bind","generateFunctionComponent","setStateBadNameForLanguageElement","clearTextInput","badNameForLanguageElement","canAddAsFunction","canAddAsPredicate","inputTitle","predicateButtonTitle","functionButtonTitle","setBadName","setState","elementObject","setLockedParent","setStateBadNameForPredFunc","funcArity","isEditable","from","elName","setStateInputElementTextLength","setCanUseForGivenType","ref","onFocus","setLockedParentIfNeeded","onBlur","onKeyDown","closeDropDown","addGivenInputElement","placeholder","widthOfInputElement","border","ElementsNode","Element","Elements","ElementContainer","ElementRowContainer","Title","TitleName","BinaryLabelWidget","sourceNodeName","targetNodeName","generateElementType","changeDirectionOfBinaryRelation","removePredicate","removeFunction","badNameForNewPredicate","inputElementTextLength","setInputElementTextLength","setIsDropDownMenuAccordingBehaviour","isSelected","compareWidth","Node","selected","Ports","PortsContainer","UnBinaryNodeWidget","generatePredicate","removeUnaryPredicate","renameActive","titleChanged","nodeName","badName","setBadNodeNameState","renameDomainNode","renameNode","data-basic-node-name","flexGrow","onDoubleClick","autoFocus","cancelRenameNode","getUnaryPredicates","getAppendPort","modelName","ConstantNodeWidget","renameConstantNode","NaryListWidget","NaryNodeList","TernaryNodeWidget","fill","strokeMiterlimit","strokeWidth","stroke","top","marginLeft","position","getPortByIndex","marginRight","QuaternaryNodeWidget","UnbinaryIcon","ConstantIcon","TernaryIcon","dangerouslySetInnerHTML","__html","QuaternaryIcon","Content","Layer","getAvailableCount","nodeCount","ternaryNodes","quaternaryNodes","createNode","point","clicked","nodesCount","getData","addDomainNode","addConstantNode","addTernaryNode","addQuaternaryNode","diagramEngine","canvasWidth","getCanvas","clientWidth","canvasHeight","clientHeight","x","Math","random","y","getRelativeMousePoint","setPosition","addNode","forceUpdate","BodyWidget","body","focusOnBodyElement","removeDomainNode","removeConstantNode","removeTernaryNode","removeQuaternaryNode","addUnaryFunction","addBinaryPredicate","addBinaryFunction","addTernaryPredicate","addTernaryFunction","addQuaternaryPredicate","removeUnaryFunction","removeBinaryPredicate","removeBinaryFunction","removeTernaryPredicate","removeTernaryFunction","removeQuaternaryPredicate","setConstantValueFromLink","editableNodes","store","imported","dispatch","syncDiagram","focus","editableNodesFunction","toggleEditableNodes","tabIndex","onKeyPress","includes","tagName","onDrop","onDragOver","preventDefault","mapDispatchOnProps","nodeObject","constantNodeName","languageElementName","langType","DiagramModelContainer","ownProps","TableButton","enabled","DatabaseButton","TextInput","onLock","databaseEnabled","tableEnabled","errorProperty","TextComponent","labelText","onChangeSetFunction","onLockFunction","textInputLabel","idName","placeholderText","Label","Language","setConstants","lockConstants","setPredicates","lockPredicates","setFunctions","lockFunctions","LanguageContainer","VariablesValue","variables","lockInput","VariablesValueContainer","Domain","setDomain","ConstantInterpretation","RelationalTable","inputComponent","findIndex","functionValues","params","renderFunctionValueSelect","arity1","arity2","item1","item2","Table","bordered","responsive","SelectComponent","handleChange","selectionElement","array","addIntoFunctionTable","Component","DatabasePredicate","assign","predicateArrayElements","newSelectionElement","headElements","count","isArray","onePredicateArray","domainElement","predicateValues","changeValue","renderPredicateValueSelect","PredicateInterpretation","lengthOfCol","split","iPredicate","DatabaseFunction","domainValueArray","mainElement","permutateWithRepetitions","permutationOptions","permutationLength","permutationOption","permutations","smallerPermutations","forEach","currentOption","smallerPermutation","arrayValues","symbol","FunctionInterpretation","getFunction","textAlign","StructureContainer","MathSystem","syncMathState","MathSystemContainer","DownloadButton","loading","fileData","_onGenerate","_donePreparing","_onDownload","genFile","async","blob","Blob","contents","mime","uri","filename","document","createElement","download","appendChild","href","click","removeChild","saveAs","URL","createObjectURL","onDownloaded","cls","downloadTitle","loadingTitle","generateTitle","defaultProps","ModalComponent","modalShowState","setModalShowState","setExerciseNameState","exportState","Modal","dialogClassName","show","onHide","htmlFor","Footer","HelpGraphButton","setCollapseHelpGraphButton","collapseHelpGraphButton","ButtonToolbarComponent","clearGraphSelection","diagramToggledState","setDiagramToggledState","teacherModeState","setModelShowState","importState","setTeacherModeState","ButtonToolbar","ButtonGroup","getElementById","hidden","display","HelpGraphCollapse","collapsed","Collapse","in","App","modalShow","diagramToggled","exerciseName","makeCordNodes","nodeState","nodesCoords","mapName","hasOwnProperty","nodeNameInObject","diagramCordState","json","DEFAULT_FILE_NAME","file","files","fr","FileReader","onload","content","result","readAsText","toggleTeacherMode","ExpressionsContainer","AppContainer","iConstant","domainCombinations","filter","c","fn","generateDomainCombinations","n","perms","splice","clearDomain","hasDomainItem","tuple","illegalItems","removePredicateValue","stringifiedParams","removeFunctionValue","functionParams","res","clearConstants","addConstant","clearPredicates","clearFunctions","hasInSet","splited","isNaN","addLanguageElement","elementNameWithArity","parsedElementMap","newElemValue","elemState","setLanguageConstants","setLanguagePredicates","setLanguageFunctions","copyState","languageReducer","action","struct","newConstantVal","newPredValues","returnParsedPredValues","newFuncValues","returnParsedFuncValues","newConstVal","newConsVal","predicateDefaultInput","predName","newPredValue","removeLanguageElementInGivenDirection","nodeNames","removeLanguageElement","addTupleLanguageElement","newValue","elemName","structureInterpretationSet","parsedArrayOfLanguageElements","joinedNodeNames","buildNaryLanguageElement","joinedParsedLanguageElement","buildNaryPredicateValue","structureInterpretationObject","keyNodeNamesParsed","buildNaryFunctionValue","buildPreviousFunctionValuesWithoutCurrentValue","addUnaryFuncValueBasedOnCondition","parsedArray","buildTupleValue","languageElementNameWithArity","insertNewInputs","setPredicateValue","setFunctionValue","removeNodeName","newPredInterpretationValue","nodeNameArray","currNodeName","currentNodeNameTuple","setConstantsValues","setPredicatesValues","setFunctionsValues","syncLanguageWithStructure","deleteUnusedInputs","getConstants","setVariables","object","hasItem","ITEM_NOT_IN_DOMAIN","clearPredicateValue","addPredicateValue","clearFunctionValue","usedParams","indexOf","FUNCTION_ALREADY_DEFINED","checkFunctionValue","tupleToString","predicateValueToString","structureReducer","newStateConstantObject","newKey","predicateValue","getPredicateValue","changeFunctionValue","fValue","getFunctionValueArray","newDomainVal","oldNodeName","newNodeName","predKey","nodeValue","changePredicatesValues","rebuildPredicatesValuesFromParsedInterpretation","domainState","newDomainValue","Expression","Formula","subLeft","subRight","eval","PredicateAtom","translatedTerms","subFormula","Term","getConstantValue","interpretedParams","variableName","eCopy","syncExpressionsValue","temp","setParserOptions","evalExpression","checkExpressionSyntax","expressionText","validSyntax","ans","expressionsReducer","structure2","log","teacherModeReducer","UnBinaryNodeFactory","AbstractReactFactory","ConstantNodeFactory","BinaryLabelFactory","SimplePortFactory","cb","initialConfig","AbstractModelFactory","PointTop","circle","BinaryLinkPointWidget","cx","cy","r","colorSelected","onMouseLeave","onMouseEnter","data-id","data-linkid","getLink","opacity","BinaryLinkSegmentWidget","Bottom","factory","generateLinkSegment","path","forwardRef","Top","strokeLinecap","onSelection","extras","strokeOpacity","onContextMenu","isLocked","preventBinary","BinaryLinkWidget","refPaths","setRenderedLinkPath","selectedElements","getSelectedEntities","graphObject","clearAllWithoutCurrentModel","setRenderedPaths","current","shiftKey","getPoints","getMaxNumberPointsPerLink","PointModel","addPoint","persist","stopPropagation","getActionEventBus","fireAction","extraProps","getFactoryForLink","paths","generateLink","getSVGPath","onMouseDown","addPointToLink","generatePoint","LinkWidget","generateLinePath","data-binary-link-test","testName","Keyframes","keyframes","css","Path","BinaryLinkFactory","d","QuaternaryNodeFactory","TernaryNodeFactory","DiagramApplication","activeModel","createEngine","setModel","getPortFactories","registerFactory","config","getNodeFactories","getLinkFactories","getLabelFactories","getStateMachine","getCurrentState","DefaultDiagramState","dragNewLink","allowLooseLinks","syncLabels","linkArray","getLabels","nodeSet","diagramCanvas","addNodeState","createLink","setSourcePort","setTargetPort","addAll","syncConstants","constantObjects","constantState","removeNodeState","removeWholeNode","nodeProperties","interruptCallingReduxFunc","removeAllLinks","syncLanguageElementType","elementInterpretationMap","portMap","keyWithoutArity","arityWithoutKey","portMapArity","addToPredicatePortMap","addToFunctionPortMap","currentNodeValue","currNodeValueParsed","syncPredicates","currentNodeName","currentNodeObject","setOfUnaryPredicatesForNode","currentNodePredicates","syncUnaryPredicates","syncBinaryLinkElement","syncNaryLanguageElements","typeElement","nodes","nodesOfType","nodePortMapCombination","nodePortMapCombinationSet","createLinksForNaryNodes","diagramStateNodesOfType","syncFunctions","addLanguageElementToBinaryLinks","nodeCombinationKey","reversedNodeCombinationKey","addBinaryPredicateToSetWithDirection","addUnaryFunctionToSetWithDirection","linksToRemove","existingLinksCombination","getLabel","labelLanguageSet","getNodeCombinationKey","getReversedNodeCombinationKey","linksToChange","combination","firstComb","secondComb","reversedComb","createBinaryLinks","syncDomain","existingDomainNodes","getPorts","portObject","removePort","removeNode","diagramReducer","clearLabels","deleteAllLabels","nodeArray","a","changeEditableState","labelArray","DiagramModel","naryNodeMap","nodeTypeMap","cord","syncNodesCords","defaultState","diagramDefaultState","checkImportedState","root","createStore","reducer","Main","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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,OAAQ,QAAS,CAAC,OAAQ,QAAS,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,YAAY,GAAO,GACvrN+D,GAAW,sdACXC,GAAWhE,GAAqB,CAAC,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,YAAY,GAAO,GACrzBiE,GAAW,syGACXC,GAAWlE,GAAqB,CAAC,OAAQ,OAAQ,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,YAAY,GAAO,GACzlLmE,GAAW,uFACXC,GAAWpE,GAAqB,CAAC,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,WAAW,GAAO,GACjLqE,GAAW,s1HACXC,GAAWtE,GAAqB,CAAC,CAAC,IAAK,KAAM,CAAC,OAAQ,QAAS,CAAC,OAAQ,QAAS,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,SA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AU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,SAAU,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,SAAU,CAAC,SA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","file":"static/js/main.d69e3f47.chunk.js","sourcesContent":["let parser = require('../../../parser/grammar');\r\nvar exports = module.exports = {};\r\n\r\nexports.parseText = function (text, textData, parserOptions) {\r\n  textData.value = text;\r\n  textData.errorMessage = '';\r\n  if (text.length === 0) {\r\n    textData.parsed = [];\r\n    return;\r\n  }\r\n  try {\r\n    let parsedValue = parser.parse(text, parserOptions);\r\n    if (parsedValue.items) {\r\n      textData.parsed = parsedValue.items;\r\n    } else {\r\n      textData.parsed = parsedValue;\r\n    }\r\n  } catch (e) {\r\n    console.error(e);\r\n    textData.errorMessage = e.message;\r\n    textData.parsed = null;\r\n  }\r\n};","/*\r\n * Generated by PEG.js 0.10.0.\r\n *\r\n * http://pegjs.org/\r\n */\r\n\r\n\"use strict\";\r\n\r\nfunction peg$subclass(child, parent) {\r\n  function ctor() {\r\n    this.constructor = child;\r\n  }\r\n\r\n  ctor.prototype = parent.prototype;\r\n  child.prototype = new ctor();\r\n}\r\n\r\nfunction peg$SyntaxError(message, expected, found, location) {\r\n  this.message = message;\r\n  this.expected = expected;\r\n  this.found = found;\r\n  this.location = location;\r\n  this.name = \"SyntaxError\";\r\n\r\n  if (typeof Error.captureStackTrace === \"function\") {\r\n    Error.captureStackTrace(this, peg$SyntaxError);\r\n  }\r\n}\r\n\r\npeg$subclass(peg$SyntaxError, Error);\r\n\r\npeg$SyntaxError.buildMessage = function (expected, found) {\r\n  var DESCRIBE_EXPECTATION_FNS = {\r\n    literal: function (expectation) {\r\n      return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\r\n    },\r\n\r\n    \"class\": function (expectation) {\r\n      var escapedParts = \"\",\r\n         i;\r\n\r\n      for (i = 0; i < expectation.parts.length; i++) {\r\n        escapedParts += expectation.parts[i] instanceof Array\r\n           ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\r\n           : classEscape(expectation.parts[i]);\r\n      }\r\n\r\n      return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\r\n    },\r\n\r\n    any: function (expectation) {\r\n      return \"any character\";\r\n    },\r\n\r\n    end: function (expectation) {\r\n      return \"end of input\";\r\n    },\r\n\r\n    other: function (expectation) {\r\n      return expectation.description;\r\n    }\r\n  };\r\n\r\n  function hex(ch) {\r\n    return ch.charCodeAt(0).toString(16).toUpperCase();\r\n  }\r\n\r\n  function literalEscape(s) {\r\n    return s\r\n       .replace(/\\\\/g, '\\\\\\\\')\r\n       .replace(/\"/g, '\\\\\"')\r\n       .replace(/\\0/g, '\\\\0')\r\n       .replace(/\\t/g, '\\\\t')\r\n       .replace(/\\n/g, '\\\\n')\r\n       .replace(/\\r/g, '\\\\r')\r\n       .replace(/[\\x00-\\x0F]/g, function (ch) {\r\n         return '\\\\x0' + hex(ch);\r\n       })\r\n       .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function (ch) {\r\n         return '\\\\x' + hex(ch);\r\n       });\r\n  }\r\n\r\n  function classEscape(s) {\r\n    return s\r\n       .replace(/\\\\/g, '\\\\\\\\')\r\n       .replace(/\\]/g, '\\\\]')\r\n       .replace(/\\^/g, '\\\\^')\r\n       .replace(/-/g, '\\\\-')\r\n       .replace(/\\0/g, '\\\\0')\r\n       .replace(/\\t/g, '\\\\t')\r\n       .replace(/\\n/g, '\\\\n')\r\n       .replace(/\\r/g, '\\\\r')\r\n       .replace(/[\\x00-\\x0F]/g, function (ch) {\r\n         return '\\\\x0' + hex(ch);\r\n       })\r\n       .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function (ch) {\r\n         return '\\\\x' + hex(ch);\r\n       });\r\n  }\r\n\r\n  function describeExpectation(expectation) {\r\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\r\n  }\r\n\r\n  function describeExpected(expected) {\r\n    var descriptions = new Array(expected.length),\r\n       i, j;\r\n\r\n    for (i = 0; i < expected.length; i++) {\r\n      descriptions[i] = describeExpectation(expected[i]);\r\n    }\r\n\r\n    descriptions.sort();\r\n\r\n    if (descriptions.length > 0) {\r\n      for (i = 1, j = 1; i < descriptions.length; i++) {\r\n        if (descriptions[i - 1] !== descriptions[i]) {\r\n          descriptions[j] = descriptions[i];\r\n          j++;\r\n        }\r\n      }\r\n      descriptions.length = j;\r\n    }\r\n\r\n    switch (descriptions.length) {\r\n      case 1:\r\n        return descriptions[0];\r\n\r\n      case 2:\r\n        return descriptions[0] + \" or \" + descriptions[1];\r\n\r\n      default:\r\n        return descriptions.slice(0, -1).join(\", \")\r\n           + \", or \"\r\n           + descriptions[descriptions.length - 1];\r\n    }\r\n  }\r\n\r\n  function describeFound(found) {\r\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\r\n  }\r\n\r\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\r\n};\r\n\r\nfunction peg$parse(input, options) {\r\n  options = options !== void 0 ? options : {};\r\n\r\n  var peg$FAILED = {},\r\n\r\n     peg$startRuleFunctions = {\r\n       formula: peg$parseformula,\r\n       term: peg$parseterm,\r\n       constants: peg$parseconstants,\r\n       predicates: peg$parsepredicates,\r\n       functions: peg$parsefunctions,\r\n       domain: peg$parsedomain,\r\n       tuples: peg$parsetuples,\r\n       e_tuples: peg$parsee_tuples\r\n     },\r\n     peg$startRuleFunction = peg$parseformula,\r\n\r\n     peg$c0 = function (f) {\r\n       return f\r\n     },\r\n     peg$c1 = function (t) {\r\n       return t\r\n     },\r\n     peg$c2 = \"(\",\r\n     peg$c3 = peg$literalExpectation(\"(\", false),\r\n     peg$c4 = \")\",\r\n     peg$c5 = peg$literalExpectation(\")\", false),\r\n     peg$c6 = function (left, right) {\r\n       return new Conjunction(left, right)\r\n     },\r\n     peg$c7 = function (left, right) {\r\n       return new Disjunction(left, right)\r\n     },\r\n     peg$c8 = function (left, right) {\r\n       return new Implication(left, right)\r\n     },\r\n     peg$c9 = function (t1, t2) {\r\n       return new EqualityAtom(t1, t2)\r\n     },\r\n     peg$c10 = function (t1, t2) {\r\n       return new Negation(new EqualityAtom(t1, t2))\r\n     },\r\n     peg$c11 = function (v, f) {\r\n       return new ExistentialQuant(v, f)\r\n     },\r\n     peg$c12 = function (v, f) {\r\n       return new UniversalQuant(v, f)\r\n     },\r\n     peg$c13 = function (f) {\r\n       return new Negation(f)\r\n     },\r\n     peg$c14 = function (ps) {\r\n       return ps\r\n     },\r\n     peg$c15 = function (f) {\r\n       return new FunctionTerm(f[0], f[1])\r\n     },\r\n     peg$c16 = function (c) {\r\n       return new Constant(c)\r\n     },\r\n     peg$c17 = function (v) {\r\n       return new Variable(v)\r\n     },\r\n     peg$c18 = function (i) {\r\n       return Structure.language.hasConstant(i)\r\n     },\r\n     peg$c19 = function (i) {\r\n       return Structure.language.hasFunction(i)\r\n     },\r\n     peg$c20 = function (i, ts) {\r\n       return [i, ts]\r\n     },\r\n     peg$c21 = function (i) {\r\n       return Structure.language.hasPredicate(i)\r\n     },\r\n     peg$c22 = function (i, ts) {\r\n       return checkPredicateArity(i, ts)\r\n     },\r\n     peg$c23 = function (i) {\r\n       return checkPredicateArity(i, [])\r\n     },\r\n     peg$c24 = function (i) {\r\n       return (!Structure.language.hasPredicate(i) && !Structure.language.hasConstant(i) && !Structure.language.hasFunction(i))\r\n     },\r\n     peg$c25 = \",\",\r\n     peg$c26 = peg$literalExpectation(\",\", false),\r\n     peg$c27 = function (t, t1) {\r\n       return t1\r\n     },\r\n     peg$c28 = function (t, ts) {\r\n       return [t].concat(ts)\r\n     },\r\n     peg$c29 = peg$otherExpectation(\"spaces\"),\r\n     peg$c30 = /^[ \\t\\n\\r]/,\r\n     peg$c31 = peg$classExpectation([\" \", \"\\t\", \"\\n\", \"\\r\"], false, false),\r\n     peg$c32 = \"\\\\wedge\",\r\n     peg$c33 = peg$literalExpectation(\"\\\\wedge\", false),\r\n     peg$c34 = \"\\\\land\",\r\n     peg$c35 = peg$literalExpectation(\"\\\\land\", false),\r\n     peg$c36 = \"&&\",\r\n     peg$c37 = peg$literalExpectation(\"&&\", false),\r\n     peg$c38 = \"&\",\r\n     peg$c39 = peg$literalExpectation(\"&\", false),\r\n     peg$c40 = \"\\u2227\",\r\n     peg$c41 = peg$literalExpectation(\"\\u2227\", false),\r\n     peg$c42 = \"/\\\\\",\r\n     peg$c43 = peg$literalExpectation(\"/\\\\\", false),\r\n     peg$c44 = \"||\",\r\n     peg$c45 = peg$literalExpectation(\"||\", false),\r\n     peg$c46 = \"|\",\r\n     peg$c47 = peg$literalExpectation(\"|\", false),\r\n     peg$c48 = \"\\\\vee\",\r\n     peg$c49 = peg$literalExpectation(\"\\\\vee\", false),\r\n     peg$c50 = \"\\u2228\",\r\n     peg$c51 = peg$literalExpectation(\"\\u2228\", false),\r\n     peg$c52 = \"\\\\/\",\r\n     peg$c53 = peg$literalExpectation(\"\\\\/\", false),\r\n     peg$c54 = \"\\\\lor\",\r\n     peg$c55 = peg$literalExpectation(\"\\\\lor\", false),\r\n     peg$c56 = \"->\",\r\n     peg$c57 = peg$literalExpectation(\"->\", false),\r\n     peg$c58 = \"\\\\to\",\r\n     peg$c59 = peg$literalExpectation(\"\\\\to\", false),\r\n     peg$c60 = \"\\u2192\",\r\n     peg$c61 = peg$literalExpectation(\"\\u2192\", false),\r\n     peg$c62 = \"\\u2203\",\r\n     peg$c63 = peg$literalExpectation(\"\\u2203\", false),\r\n     peg$c64 = \"\\\\exists\",\r\n     peg$c65 = peg$literalExpectation(\"\\\\exists\", false),\r\n     peg$c66 = \"\\\\e\",\r\n     peg$c67 = peg$literalExpectation(\"\\\\e\", false),\r\n     peg$c68 = \"\\\\E\",\r\n     peg$c69 = peg$literalExpectation(\"\\\\E\", false),\r\n     peg$c70 = \"\\u2200\",\r\n     peg$c71 = peg$literalExpectation(\"\\u2200\", false),\r\n     peg$c72 = \"\\\\forall\",\r\n     peg$c73 = peg$literalExpectation(\"\\\\forall\", false),\r\n     peg$c74 = \"\\\\a\",\r\n     peg$c75 = peg$literalExpectation(\"\\\\a\", false),\r\n     peg$c76 = \"\\\\A\",\r\n     peg$c77 = peg$literalExpectation(\"\\\\A\", false),\r\n     peg$c78 = \"-\",\r\n     peg$c79 = peg$literalExpectation(\"-\", false),\r\n     peg$c80 = \"!\",\r\n     peg$c81 = peg$literalExpectation(\"!\", false),\r\n     peg$c82 = \"~\",\r\n     peg$c83 = peg$literalExpectation(\"~\", false),\r\n     peg$c84 = \"\\\\neg\",\r\n     peg$c85 = peg$literalExpectation(\"\\\\neg\", false),\r\n     peg$c86 = \"\\xAC\",\r\n     peg$c87 = peg$literalExpectation(\"\\xAC\", false),\r\n     peg$c88 = \"\\\\lnot\",\r\n     peg$c89 = peg$literalExpectation(\"\\\\lnot\", false),\r\n     peg$c90 = \"=\",\r\n     peg$c91 = peg$literalExpectation(\"=\", false),\r\n     peg$c92 = \"!=\",\r\n     peg$c93 = peg$literalExpectation(\"!=\", false),\r\n     peg$c94 = \"<>\",\r\n     peg$c95 = peg$literalExpectation(\"<>\", false),\r\n     peg$c96 = \"/=\",\r\n     peg$c97 = peg$literalExpectation(\"/=\", false),\r\n     peg$c98 = \"\\u2260\",\r\n     peg$c99 = peg$literalExpectation(\"\\u2260\", false),\r\n     peg$c100 = function (c1, c2) {\r\n       return c2\r\n     },\r\n     peg$c101 = function (c1, l) {\r\n       return [c1].concat(l)\r\n     },\r\n     peg$c102 = function (p1, p2) {\r\n       return p2\r\n     },\r\n     peg$c103 = function (p1, l) {\r\n       return [p1].concat(l)\r\n     },\r\n     peg$c104 = function (f1, f2) {\r\n       return f2\r\n     },\r\n     peg$c105 = function (f1, l) {\r\n       return [f1].concat(l)\r\n     },\r\n     peg$c106 = /^[0-9]/,\r\n     peg$c107 = peg$classExpectation([[\"0\", \"9\"]], false, false),\r\n     peg$c108 = /^[1-9]/,\r\n     peg$c109 = peg$classExpectation([[\"1\", \"9\"]], false, false),\r\n     peg$c110 = \"/\",\r\n     peg$c111 = peg$literalExpectation(\"/\", false),\r\n     peg$c112 = function (predicate, arity) {\r\n       return {name: predicate, arity: arity}\r\n     },\r\n     peg$c113 = function (f, arity) {\r\n       return {name: f, arity: arity}\r\n     },\r\n     peg$c114 = function (i1, i2) {\r\n       return i2\r\n     },\r\n     peg$c115 = function (i1, l) {\r\n       return [i1].concat(l)\r\n     },\r\n     peg$c116 = function (t1, t2) {\r\n       return t2\r\n     },\r\n     peg$c117 = function (t1, l) {\r\n       return [t1].concat(l)\r\n     },\r\n     peg$c118 = function (i) {\r\n       return [i]\r\n     },\r\n     peg$c119 = function (i1, i2) {\r\n       return [i1, i2]\r\n     },\r\n     peg$c120 = peg$otherExpectation(\"domain identifier\"),\r\n     peg$c121 = /^[^ \\t\\r\\n,()]/,\r\n     peg$c122 = peg$classExpectation([\" \", \"\\t\", \"\\r\", \"\\n\", \",\", \"(\", \")\"], true, false),\r\n     peg$c123 = function (name) {\r\n       return name;\r\n     },\r\n     peg$c124 = peg$otherExpectation(\"identifier\"),\r\n     peg$c125 = function (head, tail) {\r\n       return head + tail.join(\"\")\r\n     },\r\n     peg$c126 = \"$\",\r\n     peg$c127 = peg$literalExpectation(\"$\", false),\r\n     peg$c128 = \"_\",\r\n     peg$c129 = peg$literalExpectation(\"_\", false),\r\n     peg$c130 = \"\\u200C\",\r\n     peg$c131 = peg$literalExpectation(\"\\u200C\", false),\r\n     peg$c132 = \"\\u200D\",\r\n     peg$c133 = peg$literalExpectation(\"\\u200D\", false),\r\n     peg$c134 = peg$otherExpectation(\"letter\"),\r\n     peg$c135 = peg$otherExpectation(\"combining mark\"),\r\n     peg$c136 = peg$otherExpectation(\"digit\"),\r\n     peg$c137 = /^[a-z\\xB5\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137-\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148-\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C-\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA-\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9-\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC-\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF-\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F-\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F-\\u0293\\u0295-\\u02AF\\u0371\\u0373\\u0377\\u037B-\\u037D\\u0390\\u03AC-\\u03CE\\u03D0-\\u03D1\\u03D5-\\u03D7\\u03D9\\u03DB\\u03DD\\u03DF\\u03E1\\u03E3\\u03E5\\u03E7\\u03E9\\u03EB\\u03ED\\u03EF-\\u03F3\\u03F5\\u03F8\\u03FB-\\u03FC\\u0430-\\u045F\\u0461\\u0463\\u0465\\u0467\\u0469\\u046B\\u046D\\u046F\\u0471\\u0473\\u0475\\u0477\\u0479\\u047B\\u047D\\u047F\\u0481\\u048B\\u048D\\u048F\\u0491\\u0493\\u0495\\u0497\\u0499\\u049B\\u049D\\u049F\\u04A1\\u04A3\\u04A5\\u04A7\\u04A9\\u04AB\\u04AD\\u04AF\\u04B1\\u04B3\\u04B5\\u04B7\\u04B9\\u04BB\\u04BD\\u04BF\\u04C2\\u04C4\\u04C6\\u04C8\\u04CA\\u04CC\\u04CE-\\u04CF\\u04D1\\u04D3\\u04D5\\u04D7\\u04D9\\u04DB\\u04DD\\u04DF\\u04E1\\u04E3\\u04E5\\u04E7\\u04E9\\u04EB\\u04ED\\u04EF\\u04F1\\u04F3\\u04F5\\u04F7\\u04F9\\u04FB\\u04FD\\u04FF\\u0501\\u0503\\u0505\\u0507\\u0509\\u050B\\u050D\\u050F\\u0511\\u0513\\u0515\\u0517\\u0519\\u051B\\u051D\\u051F\\u0521\\u0523\\u0525\\u0527\\u0529\\u052B\\u052D\\u052F\\u0561-\\u0587\\u13F8-\\u13FD\\u1D00-\\u1D2B\\u1D6B-\\u1D77\\u1D79-\\u1D9A\\u1E01\\u1E03\\u1E05\\u1E07\\u1E09\\u1E0B\\u1E0D\\u1E0F\\u1E11\\u1E13\\u1E15\\u1E17\\u1E19\\u1E1B\\u1E1D\\u1E1F\\u1E21\\u1E23\\u1E25\\u1E27\\u1E29\\u1E2B\\u1E2D\\u1E2F\\u1E31\\u1E33\\u1E35\\u1E37\\u1E39\\u1E3B\\u1E3D\\u1E3F\\u1E41\\u1E43\\u1E45\\u1E47\\u1E49\\u1E4B\\u1E4D\\u1E4F\\u1E51\\u1E53\\u1E55\\u1E57\\u1E59\\u1E5B\\u1E5D\\u1E5F\\u1E61\\u1E63\\u1E65\\u1E67\\u1E69\\u1E6B\\u1E6D\\u1E6F\\u1E71\\u1E73\\u1E75\\u1E77\\u1E79\\u1E7B\\u1E7D\\u1E7F\\u1E81\\u1E83\\u1E85\\u1E87\\u1E89\\u1E8B\\u1E8D\\u1E8F\\u1E91\\u1E93\\u1E95-\\u1E9D\\u1E9F\\u1EA1\\u1EA3\\u1EA5\\u1EA7\\u1EA9\\u1EAB\\u1EAD\\u1EAF\\u1EB1\\u1EB3\\u1EB5\\u1EB7\\u1EB9\\u1EBB\\u1EBD\\u1EBF\\u1EC1\\u1EC3\\u1EC5\\u1EC7\\u1EC9\\u1ECB\\u1ECD\\u1ECF\\u1ED1\\u1ED3\\u1ED5\\u1ED7\\u1ED9\\u1EDB\\u1EDD\\u1EDF\\u1EE1\\u1EE3\\u1EE5\\u1EE7\\u1EE9\\u1EEB\\u1EED\\u1EEF\\u1EF1\\u1EF3\\u1EF5\\u1EF7\\u1EF9\\u1EFB\\u1EFD\\u1EFF-\\u1F07\\u1F10-\\u1F15\\u1F20-\\u1F27\\u1F30-\\u1F37\\u1F40-\\u1F45\\u1F50-\\u1F57\\u1F60-\\u1F67\\u1F70-\\u1F7D\\u1F80-\\u1F87\\u1F90-\\u1F97\\u1FA0-\\u1FA7\\u1FB0-\\u1FB4\\u1FB6-\\u1FB7\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FC7\\u1FD0-\\u1FD3\\u1FD6-\\u1FD7\\u1FE0-\\u1FE7\\u1FF2-\\u1FF4\\u1FF6-\\u1FF7\\u210A\\u210E-\\u210F\\u2113\\u212F\\u2134\\u2139\\u213C-\\u213D\\u2146-\\u2149\\u214E\\u2184\\u2C30-\\u2C5E\\u2C61\\u2C65-\\u2C66\\u2C68\\u2C6A\\u2C6C\\u2C71\\u2C73-\\u2C74\\u2C76-\\u2C7B\\u2C81\\u2C83\\u2C85\\u2C87\\u2C89\\u2C8B\\u2C8D\\u2C8F\\u2C91\\u2C93\\u2C95\\u2C97\\u2C99\\u2C9B\\u2C9D\\u2C9F\\u2CA1\\u2CA3\\u2CA5\\u2CA7\\u2CA9\\u2CAB\\u2CAD\\u2CAF\\u2CB1\\u2CB3\\u2CB5\\u2CB7\\u2CB9\\u2CBB\\u2CBD\\u2CBF\\u2CC1\\u2CC3\\u2CC5\\u2CC7\\u2CC9\\u2CCB\\u2CCD\\u2CCF\\u2CD1\\u2CD3\\u2CD5\\u2CD7\\u2CD9\\u2CDB\\u2CDD\\u2CDF\\u2CE1\\u2CE3-\\u2CE4\\u2CEC\\u2CEE\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\uA641\\uA643\\uA645\\uA647\\uA649\\uA64B\\uA64D\\uA64F\\uA651\\uA653\\uA655\\uA657\\uA659\\uA65B\\uA65D\\uA65F\\uA661\\uA663\\uA665\\uA667\\uA669\\uA66B\\uA66D\\uA681\\uA683\\uA685\\uA687\\uA689\\uA68B\\uA68D\\uA68F\\uA691\\uA693\\uA695\\uA697\\uA699\\uA69B\\uA723\\uA725\\uA727\\uA729\\uA72B\\uA72D\\uA72F-\\uA731\\uA733\\uA735\\uA737\\uA739\\uA73B\\uA73D\\uA73F\\uA741\\uA743\\uA745\\uA747\\uA749\\uA74B\\uA74D\\uA74F\\uA751\\uA753\\uA755\\uA757\\uA759\\uA75B\\uA75D\\uA75F\\uA761\\uA763\\uA765\\uA767\\uA769\\uA76B\\uA76D\\uA76F\\uA771-\\uA778\\uA77A\\uA77C\\uA77F\\uA781\\uA783\\uA785\\uA787\\uA78C\\uA78E\\uA791\\uA793-\\uA795\\uA797\\uA799\\uA79B\\uA79D\\uA79F\\uA7A1\\uA7A3\\uA7A5\\uA7A7\\uA7A9\\uA7B5\\uA7B7\\uA7FA\\uAB30-\\uAB5A\\uAB60-\\uAB65\\uAB70-\\uABBF\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFF41-\\uFF5A]/,\r\n     peg$c138 = peg$classExpectation([[\"a\", \"z\"], \"\\xB5\", [\"\\xDF\", \"\\xF6\"], [\"\\xF8\", \"\\xFF\"], \"\\u0101\", \"\\u0103\", \"\\u0105\", \"\\u0107\", \"\\u0109\", \"\\u010B\", \"\\u010D\", \"\\u010F\", \"\\u0111\", \"\\u0113\", \"\\u0115\", \"\\u0117\", \"\\u0119\", \"\\u011B\", \"\\u011D\", \"\\u011F\", \"\\u0121\", \"\\u0123\", \"\\u0125\", \"\\u0127\", \"\\u0129\", \"\\u012B\", \"\\u012D\", \"\\u012F\", \"\\u0131\", \"\\u0133\", \"\\u0135\", [\"\\u0137\", \"\\u0138\"], \"\\u013A\", \"\\u013C\", \"\\u013E\", \"\\u0140\", \"\\u0142\", \"\\u0144\", \"\\u0146\", [\"\\u0148\", \"\\u0149\"], \"\\u014B\", \"\\u014D\", \"\\u014F\", \"\\u0151\", \"\\u0153\", \"\\u0155\", \"\\u0157\", \"\\u0159\", \"\\u015B\", \"\\u015D\", \"\\u015F\", \"\\u0161\", \"\\u0163\", \"\\u0165\", \"\\u0167\", \"\\u0169\", \"\\u016B\", \"\\u016D\", \"\\u016F\", \"\\u0171\", \"\\u0173\", \"\\u0175\", \"\\u0177\", \"\\u017A\", \"\\u017C\", [\"\\u017E\", \"\\u0180\"], \"\\u0183\", \"\\u0185\", \"\\u0188\", [\"\\u018C\", \"\\u018D\"], \"\\u0192\", \"\\u0195\", [\"\\u0199\", \"\\u019B\"], \"\\u019E\", \"\\u01A1\", \"\\u01A3\", \"\\u01A5\", \"\\u01A8\", [\"\\u01AA\", \"\\u01AB\"], \"\\u01AD\", \"\\u01B0\", \"\\u01B4\", \"\\u01B6\", [\"\\u01B9\", \"\\u01BA\"], [\"\\u01BD\", \"\\u01BF\"], \"\\u01C6\", \"\\u01C9\", \"\\u01CC\", \"\\u01CE\", \"\\u01D0\", \"\\u01D2\", \"\\u01D4\", \"\\u01D6\", \"\\u01D8\", \"\\u01DA\", [\"\\u01DC\", \"\\u01DD\"], \"\\u01DF\", \"\\u01E1\", \"\\u01E3\", \"\\u01E5\", \"\\u01E7\", \"\\u01E9\", \"\\u01EB\", \"\\u01ED\", [\"\\u01EF\", \"\\u01F0\"], \"\\u01F3\", \"\\u01F5\", \"\\u01F9\", \"\\u01FB\", \"\\u01FD\", \"\\u01FF\", \"\\u0201\", \"\\u0203\", \"\\u0205\", \"\\u0207\", \"\\u0209\", \"\\u020B\", \"\\u020D\", \"\\u020F\", \"\\u0211\", \"\\u0213\", \"\\u0215\", \"\\u0217\", \"\\u0219\", \"\\u021B\", \"\\u021D\", \"\\u021F\", \"\\u0221\", \"\\u0223\", \"\\u0225\", \"\\u0227\", \"\\u0229\", \"\\u022B\", \"\\u022D\", \"\\u022F\", \"\\u0231\", [\"\\u0233\", \"\\u0239\"], \"\\u023C\", [\"\\u023F\", \"\\u0240\"], \"\\u0242\", \"\\u0247\", \"\\u0249\", \"\\u024B\", \"\\u024D\", [\"\\u024F\", \"\\u0293\"], [\"\\u0295\", \"\\u02AF\"], \"\\u0371\", \"\\u0373\", \"\\u0377\", [\"\\u037B\", \"\\u037D\"], \"\\u0390\", [\"\\u03AC\", \"\\u03CE\"], [\"\\u03D0\", \"\\u03D1\"], [\"\\u03D5\", \"\\u03D7\"], \"\\u03D9\", \"\\u03DB\", \"\\u03DD\", \"\\u03DF\", \"\\u03E1\", \"\\u03E3\", \"\\u03E5\", \"\\u03E7\", \"\\u03E9\", \"\\u03EB\", \"\\u03ED\", [\"\\u03EF\", \"\\u03F3\"], \"\\u03F5\", \"\\u03F8\", [\"\\u03FB\", \"\\u03FC\"], [\"\\u0430\", \"\\u045F\"], \"\\u0461\", \"\\u0463\", \"\\u0465\", \"\\u0467\", \"\\u0469\", \"\\u046B\", \"\\u046D\", \"\\u046F\", \"\\u0471\", \"\\u0473\", \"\\u0475\", \"\\u0477\", \"\\u0479\", \"\\u047B\", \"\\u047D\", \"\\u047F\", \"\\u0481\", \"\\u048B\", \"\\u048D\", \"\\u048F\", \"\\u0491\", \"\\u0493\", \"\\u0495\", \"\\u0497\", \"\\u0499\", \"\\u049B\", \"\\u049D\", \"\\u049F\", \"\\u04A1\", \"\\u04A3\", \"\\u04A5\", \"\\u04A7\", \"\\u04A9\", \"\\u04AB\", \"\\u04AD\", \"\\u04AF\", \"\\u04B1\", \"\\u04B3\", \"\\u04B5\", \"\\u04B7\", \"\\u04B9\", \"\\u04BB\", \"\\u04BD\", \"\\u04BF\", \"\\u04C2\", \"\\u04C4\", \"\\u04C6\", \"\\u04C8\", \"\\u04CA\", \"\\u04CC\", [\"\\u04CE\", \"\\u04CF\"], \"\\u04D1\", \"\\u04D3\", \"\\u04D5\", \"\\u04D7\", \"\\u04D9\", \"\\u04DB\", \"\\u04DD\", \"\\u04DF\", \"\\u04E1\", \"\\u04E3\", \"\\u04E5\", \"\\u04E7\", \"\\u04E9\", \"\\u04EB\", \"\\u04ED\", \"\\u04EF\", \"\\u04F1\", \"\\u04F3\", \"\\u04F5\", \"\\u04F7\", \"\\u04F9\", \"\\u04FB\", \"\\u04FD\", \"\\u04FF\", \"\\u0501\", \"\\u0503\", \"\\u0505\", \"\\u0507\", \"\\u0509\", \"\\u050B\", \"\\u050D\", \"\\u050F\", \"\\u0511\", \"\\u0513\", \"\\u0515\", \"\\u0517\", \"\\u0519\", \"\\u051B\", \"\\u051D\", \"\\u051F\", \"\\u0521\", \"\\u0523\", \"\\u0525\", \"\\u0527\", \"\\u0529\", \"\\u052B\", \"\\u052D\", \"\\u052F\", [\"\\u0561\", \"\\u0587\"], [\"\\u13F8\", \"\\u13FD\"], [\"\\u1D00\", \"\\u1D2B\"], [\"\\u1D6B\", \"\\u1D77\"], [\"\\u1D79\", \"\\u1D9A\"], \"\\u1E01\", \"\\u1E03\", \"\\u1E05\", \"\\u1E07\", \"\\u1E09\", \"\\u1E0B\", \"\\u1E0D\", \"\\u1E0F\", \"\\u1E11\", \"\\u1E13\", \"\\u1E15\", \"\\u1E17\", \"\\u1E19\", \"\\u1E1B\", \"\\u1E1D\", \"\\u1E1F\", \"\\u1E21\", \"\\u1E23\", \"\\u1E25\", \"\\u1E27\", \"\\u1E29\", \"\\u1E2B\", \"\\u1E2D\", \"\\u1E2F\", \"\\u1E31\", \"\\u1E33\", \"\\u1E35\", \"\\u1E37\", \"\\u1E39\", \"\\u1E3B\", \"\\u1E3D\", \"\\u1E3F\", \"\\u1E41\", \"\\u1E43\", \"\\u1E45\", \"\\u1E47\", \"\\u1E49\", \"\\u1E4B\", \"\\u1E4D\", \"\\u1E4F\", \"\\u1E51\", \"\\u1E53\", \"\\u1E55\", \"\\u1E57\", \"\\u1E59\", \"\\u1E5B\", \"\\u1E5D\", \"\\u1E5F\", \"\\u1E61\", \"\\u1E63\", \"\\u1E65\", \"\\u1E67\", \"\\u1E69\", \"\\u1E6B\", \"\\u1E6D\", \"\\u1E6F\", \"\\u1E71\", \"\\u1E73\", \"\\u1E75\", \"\\u1E77\", \"\\u1E79\", \"\\u1E7B\", \"\\u1E7D\", \"\\u1E7F\", \"\\u1E81\", \"\\u1E83\", \"\\u1E85\", \"\\u1E87\", \"\\u1E89\", \"\\u1E8B\", \"\\u1E8D\", \"\\u1E8F\", \"\\u1E91\", \"\\u1E93\", [\"\\u1E95\", \"\\u1E9D\"], \"\\u1E9F\", \"\\u1EA1\", \"\\u1EA3\", \"\\u1EA5\", \"\\u1EA7\", \"\\u1EA9\", \"\\u1EAB\", \"\\u1EAD\", \"\\u1EAF\", \"\\u1EB1\", \"\\u1EB3\", \"\\u1EB5\", \"\\u1EB7\", \"\\u1EB9\", \"\\u1EBB\", \"\\u1EBD\", \"\\u1EBF\", \"\\u1EC1\", \"\\u1EC3\", \"\\u1EC5\", \"\\u1EC7\", \"\\u1EC9\", \"\\u1ECB\", \"\\u1ECD\", \"\\u1ECF\", \"\\u1ED1\", \"\\u1ED3\", \"\\u1ED5\", \"\\u1ED7\", \"\\u1ED9\", \"\\u1EDB\", \"\\u1EDD\", \"\\u1EDF\", \"\\u1EE1\", \"\\u1EE3\", \"\\u1EE5\", \"\\u1EE7\", \"\\u1EE9\", \"\\u1EEB\", \"\\u1EED\", \"\\u1EEF\", \"\\u1EF1\", \"\\u1EF3\", \"\\u1EF5\", \"\\u1EF7\", \"\\u1EF9\", \"\\u1EFB\", \"\\u1EFD\", [\"\\u1EFF\", \"\\u1F07\"], [\"\\u1F10\", \"\\u1F15\"], [\"\\u1F20\", \"\\u1F27\"], [\"\\u1F30\", \"\\u1F37\"], [\"\\u1F40\", \"\\u1F45\"], [\"\\u1F50\", \"\\u1F57\"], [\"\\u1F60\", \"\\u1F67\"], [\"\\u1F70\", \"\\u1F7D\"], [\"\\u1F80\", \"\\u1F87\"], [\"\\u1F90\", \"\\u1F97\"], [\"\\u1FA0\", \"\\u1FA7\"], [\"\\u1FB0\", \"\\u1FB4\"], [\"\\u1FB6\", \"\\u1FB7\"], \"\\u1FBE\", [\"\\u1FC2\", \"\\u1FC4\"], [\"\\u1FC6\", \"\\u1FC7\"], [\"\\u1FD0\", \"\\u1FD3\"], [\"\\u1FD6\", \"\\u1FD7\"], [\"\\u1FE0\", \"\\u1FE7\"], [\"\\u1FF2\", \"\\u1FF4\"], [\"\\u1FF6\", \"\\u1FF7\"], \"\\u210A\", [\"\\u210E\", \"\\u210F\"], \"\\u2113\", \"\\u212F\", \"\\u2134\", \"\\u2139\", [\"\\u213C\", \"\\u213D\"], [\"\\u2146\", \"\\u2149\"], \"\\u214E\", \"\\u2184\", [\"\\u2C30\", \"\\u2C5E\"], \"\\u2C61\", [\"\\u2C65\", \"\\u2C66\"], \"\\u2C68\", \"\\u2C6A\", \"\\u2C6C\", \"\\u2C71\", [\"\\u2C73\", \"\\u2C74\"], [\"\\u2C76\", \"\\u2C7B\"], \"\\u2C81\", \"\\u2C83\", \"\\u2C85\", \"\\u2C87\", \"\\u2C89\", \"\\u2C8B\", \"\\u2C8D\", \"\\u2C8F\", \"\\u2C91\", \"\\u2C93\", \"\\u2C95\", \"\\u2C97\", \"\\u2C99\", \"\\u2C9B\", \"\\u2C9D\", \"\\u2C9F\", \"\\u2CA1\", \"\\u2CA3\", \"\\u2CA5\", \"\\u2CA7\", \"\\u2CA9\", \"\\u2CAB\", \"\\u2CAD\", \"\\u2CAF\", \"\\u2CB1\", \"\\u2CB3\", \"\\u2CB5\", \"\\u2CB7\", \"\\u2CB9\", \"\\u2CBB\", \"\\u2CBD\", \"\\u2CBF\", \"\\u2CC1\", \"\\u2CC3\", \"\\u2CC5\", \"\\u2CC7\", \"\\u2CC9\", \"\\u2CCB\", \"\\u2CCD\", \"\\u2CCF\", \"\\u2CD1\", \"\\u2CD3\", \"\\u2CD5\", \"\\u2CD7\", \"\\u2CD9\", \"\\u2CDB\", \"\\u2CDD\", \"\\u2CDF\", \"\\u2CE1\", [\"\\u2CE3\", \"\\u2CE4\"], \"\\u2CEC\", \"\\u2CEE\", \"\\u2CF3\", [\"\\u2D00\", \"\\u2D25\"], \"\\u2D27\", \"\\u2D2D\", \"\\uA641\", \"\\uA643\", \"\\uA645\", \"\\uA647\", \"\\uA649\", \"\\uA64B\", \"\\uA64D\", \"\\uA64F\", \"\\uA651\", \"\\uA653\", \"\\uA655\", \"\\uA657\", \"\\uA659\", \"\\uA65B\", \"\\uA65D\", \"\\uA65F\", \"\\uA661\", \"\\uA663\", \"\\uA665\", \"\\uA667\", \"\\uA669\", \"\\uA66B\", \"\\uA66D\", \"\\uA681\", \"\\uA683\", \"\\uA685\", \"\\uA687\", \"\\uA689\", \"\\uA68B\", \"\\uA68D\", \"\\uA68F\", \"\\uA691\", \"\\uA693\", \"\\uA695\", \"\\uA697\", \"\\uA699\", \"\\uA69B\", \"\\uA723\", \"\\uA725\", \"\\uA727\", \"\\uA729\", \"\\uA72B\", \"\\uA72D\", [\"\\uA72F\", \"\\uA731\"], \"\\uA733\", \"\\uA735\", \"\\uA737\", \"\\uA739\", \"\\uA73B\", \"\\uA73D\", \"\\uA73F\", \"\\uA741\", \"\\uA743\", \"\\uA745\", \"\\uA747\", \"\\uA749\", \"\\uA74B\", \"\\uA74D\", \"\\uA74F\", \"\\uA751\", \"\\uA753\", \"\\uA755\", \"\\uA757\", \"\\uA759\", \"\\uA75B\", \"\\uA75D\", \"\\uA75F\", \"\\uA761\", \"\\uA763\", \"\\uA765\", \"\\uA767\", \"\\uA769\", \"\\uA76B\", \"\\uA76D\", \"\\uA76F\", [\"\\uA771\", \"\\uA778\"], \"\\uA77A\", \"\\uA77C\", \"\\uA77F\", \"\\uA781\", \"\\uA783\", \"\\uA785\", \"\\uA787\", \"\\uA78C\", \"\\uA78E\", \"\\uA791\", [\"\\uA793\", \"\\uA795\"], \"\\uA797\", \"\\uA799\", \"\\uA79B\", \"\\uA79D\", \"\\uA79F\", \"\\uA7A1\", \"\\uA7A3\", \"\\uA7A5\", \"\\uA7A7\", \"\\uA7A9\", \"\\uA7B5\", \"\\uA7B7\", \"\\uA7FA\", [\"\\uAB30\", \"\\uAB5A\"], [\"\\uAB60\", \"\\uAB65\"], [\"\\uAB70\", \"\\uABBF\"], [\"\\uFB00\", \"\\uFB06\"], [\"\\uFB13\", \"\\uFB17\"], [\"\\uFF41\", \"\\uFF5A\"]], false, false),\r\n     peg$c139 = /^[\\u02B0-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0374\\u037A\\u0559\\u0640\\u06E5-\\u06E6\\u07F4-\\u07F5\\u07FA\\u081A\\u0824\\u0828\\u0971\\u0E46\\u0EC6\\u10FC\\u17D7\\u1843\\u1AA7\\u1C78-\\u1C7D\\u1D2C-\\u1D6A\\u1D78\\u1D9B-\\u1DBF\\u2071\\u207F\\u2090-\\u209C\\u2C7C-\\u2C7D\\u2D6F\\u2E2F\\u3005\\u3031-\\u3035\\u303B\\u309D-\\u309E\\u30FC-\\u30FE\\uA015\\uA4F8-\\uA4FD\\uA60C\\uA67F\\uA69C-\\uA69D\\uA717-\\uA71F\\uA770\\uA788\\uA7F8-\\uA7F9\\uA9CF\\uA9E6\\uAA70\\uAADD\\uAAF3-\\uAAF4\\uAB5C-\\uAB5F\\uFF70\\uFF9E-\\uFF9F]/,\r\n     peg$c140 = peg$classExpectation([[\"\\u02B0\", \"\\u02C1\"], [\"\\u02C6\", \"\\u02D1\"], [\"\\u02E0\", \"\\u02E4\"], \"\\u02EC\", \"\\u02EE\", \"\\u0374\", \"\\u037A\", \"\\u0559\", \"\\u0640\", [\"\\u06E5\", \"\\u06E6\"], [\"\\u07F4\", \"\\u07F5\"], \"\\u07FA\", \"\\u081A\", \"\\u0824\", \"\\u0828\", \"\\u0971\", \"\\u0E46\", \"\\u0EC6\", \"\\u10FC\", \"\\u17D7\", \"\\u1843\", \"\\u1AA7\", [\"\\u1C78\", \"\\u1C7D\"], [\"\\u1D2C\", \"\\u1D6A\"], \"\\u1D78\", [\"\\u1D9B\", \"\\u1DBF\"], \"\\u2071\", \"\\u207F\", [\"\\u2090\", \"\\u209C\"], [\"\\u2C7C\", \"\\u2C7D\"], \"\\u2D6F\", \"\\u2E2F\", \"\\u3005\", [\"\\u3031\", \"\\u3035\"], \"\\u303B\", [\"\\u309D\", \"\\u309E\"], [\"\\u30FC\", \"\\u30FE\"], \"\\uA015\", [\"\\uA4F8\", \"\\uA4FD\"], \"\\uA60C\", \"\\uA67F\", [\"\\uA69C\", \"\\uA69D\"], [\"\\uA717\", \"\\uA71F\"], \"\\uA770\", \"\\uA788\", [\"\\uA7F8\", \"\\uA7F9\"], \"\\uA9CF\", \"\\uA9E6\", \"\\uAA70\", \"\\uAADD\", [\"\\uAAF3\", \"\\uAAF4\"], [\"\\uAB5C\", \"\\uAB5F\"], \"\\uFF70\", [\"\\uFF9E\", \"\\uFF9F\"]], false, false),\r\n     peg$c141 = /^[\\xAA\\xBA\\u01BB\\u01C0-\\u01C3\\u0294\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u063F\\u0641-\\u064A\\u066E-\\u066F\\u0671-\\u06D3\\u06D5\\u06EE-\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u0800-\\u0815\\u0840-\\u0858\\u08A0-\\u08B4\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0972-\\u0980\\u0985-\\u098C\\u098F-\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC-\\u09DD\\u09DF-\\u09E1\\u09F0-\\u09F1\\u0A05-\\u0A0A\\u0A0F-\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32-\\u0A33\\u0A35-\\u0A36\\u0A38-\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2-\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0-\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F-\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32-\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C-\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99-\\u0B9A\\u0B9C\\u0B9E-\\u0B9F\\u0BA3-\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60-\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0-\\u0CE1\\u0CF1-\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32-\\u0E33\\u0E40-\\u0E45\\u0E81-\\u0E82\\u0E84\\u0E87-\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA-\\u0EAB\\u0EAD-\\u0EB0\\u0EB2-\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065-\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10D0-\\u10FA\\u10FD-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17DC\\u1820-\\u1842\\u1844-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE-\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C77\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5-\\u1CF6\\u2135-\\u2138\\u2D30-\\u2D67\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u3006\\u303C\\u3041-\\u3096\\u309F\\u30A1-\\u30FA\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA014\\uA016-\\uA48C\\uA4D0-\\uA4F7\\uA500-\\uA60B\\uA610-\\uA61F\\uA62A-\\uA62B\\uA66E\\uA6A0-\\uA6E5\\uA78F\\uA7F7\\uA7FB-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9E0-\\uA9E4\\uA9E7-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA6F\\uAA71-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5-\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADC\\uAAE0-\\uAAEA\\uAAF2\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40-\\uFB41\\uFB43-\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF66-\\uFF6F\\uFF71-\\uFF9D\\uFFA0-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\r\n     peg$c142 = peg$classExpectation([\"\\xAA\", \"\\xBA\", \"\\u01BB\", [\"\\u01C0\", \"\\u01C3\"], \"\\u0294\", [\"\\u05D0\", \"\\u05EA\"], [\"\\u05F0\", \"\\u05F2\"], [\"\\u0620\", \"\\u063F\"], [\"\\u0641\", \"\\u064A\"], [\"\\u066E\", \"\\u066F\"], [\"\\u0671\", \"\\u06D3\"], \"\\u06D5\", [\"\\u06EE\", \"\\u06EF\"], [\"\\u06FA\", \"\\u06FC\"], \"\\u06FF\", \"\\u0710\", [\"\\u0712\", \"\\u072F\"], [\"\\u074D\", \"\\u07A5\"], \"\\u07B1\", [\"\\u07CA\", \"\\u07EA\"], [\"\\u0800\", \"\\u0815\"], [\"\\u0840\", \"\\u0858\"], [\"\\u08A0\", \"\\u08B4\"], [\"\\u0904\", \"\\u0939\"], \"\\u093D\", \"\\u0950\", [\"\\u0958\", \"\\u0961\"], [\"\\u0972\", \"\\u0980\"], [\"\\u0985\", \"\\u098C\"], [\"\\u098F\", \"\\u0990\"], [\"\\u0993\", \"\\u09A8\"], [\"\\u09AA\", \"\\u09B0\"], \"\\u09B2\", [\"\\u09B6\", \"\\u09B9\"], \"\\u09BD\", \"\\u09CE\", [\"\\u09DC\", \"\\u09DD\"], [\"\\u09DF\", \"\\u09E1\"], [\"\\u09F0\", \"\\u09F1\"], [\"\\u0A05\", \"\\u0A0A\"], [\"\\u0A0F\", \"\\u0A10\"], [\"\\u0A13\", \"\\u0A28\"], [\"\\u0A2A\", \"\\u0A30\"], [\"\\u0A32\", \"\\u0A33\"], [\"\\u0A35\", \"\\u0A36\"], [\"\\u0A38\", \"\\u0A39\"], [\"\\u0A59\", \"\\u0A5C\"], \"\\u0A5E\", [\"\\u0A72\", \"\\u0A74\"], [\"\\u0A85\", \"\\u0A8D\"], [\"\\u0A8F\", \"\\u0A91\"], [\"\\u0A93\", \"\\u0AA8\"], [\"\\u0AAA\", \"\\u0AB0\"], [\"\\u0AB2\", \"\\u0AB3\"], [\"\\u0AB5\", \"\\u0AB9\"], \"\\u0ABD\", \"\\u0AD0\", [\"\\u0AE0\", \"\\u0AE1\"], \"\\u0AF9\", [\"\\u0B05\", \"\\u0B0C\"], [\"\\u0B0F\", \"\\u0B10\"], [\"\\u0B13\", \"\\u0B28\"], [\"\\u0B2A\", \"\\u0B30\"], [\"\\u0B32\", \"\\u0B33\"], [\"\\u0B35\", \"\\u0B39\"], \"\\u0B3D\", [\"\\u0B5C\", \"\\u0B5D\"], [\"\\u0B5F\", \"\\u0B61\"], \"\\u0B71\", \"\\u0B83\", [\"\\u0B85\", \"\\u0B8A\"], [\"\\u0B8E\", \"\\u0B90\"], [\"\\u0B92\", \"\\u0B95\"], [\"\\u0B99\", \"\\u0B9A\"], \"\\u0B9C\", [\"\\u0B9E\", \"\\u0B9F\"], [\"\\u0BA3\", \"\\u0BA4\"], [\"\\u0BA8\", \"\\u0BAA\"], [\"\\u0BAE\", \"\\u0BB9\"], \"\\u0BD0\", [\"\\u0C05\", \"\\u0C0C\"], [\"\\u0C0E\", \"\\u0C10\"], [\"\\u0C12\", \"\\u0C28\"], [\"\\u0C2A\", \"\\u0C39\"], \"\\u0C3D\", [\"\\u0C58\", \"\\u0C5A\"], [\"\\u0C60\", \"\\u0C61\"], [\"\\u0C85\", \"\\u0C8C\"], [\"\\u0C8E\", \"\\u0C90\"], [\"\\u0C92\", \"\\u0CA8\"], [\"\\u0CAA\", \"\\u0CB3\"], [\"\\u0CB5\", \"\\u0CB9\"], \"\\u0CBD\", \"\\u0CDE\", [\"\\u0CE0\", \"\\u0CE1\"], [\"\\u0CF1\", \"\\u0CF2\"], [\"\\u0D05\", \"\\u0D0C\"], [\"\\u0D0E\", \"\\u0D10\"], [\"\\u0D12\", \"\\u0D3A\"], \"\\u0D3D\", \"\\u0D4E\", [\"\\u0D5F\", \"\\u0D61\"], [\"\\u0D7A\", \"\\u0D7F\"], [\"\\u0D85\", \"\\u0D96\"], [\"\\u0D9A\", \"\\u0DB1\"], [\"\\u0DB3\", \"\\u0DBB\"], \"\\u0DBD\", [\"\\u0DC0\", \"\\u0DC6\"], [\"\\u0E01\", \"\\u0E30\"], [\"\\u0E32\", \"\\u0E33\"], [\"\\u0E40\", \"\\u0E45\"], [\"\\u0E81\", \"\\u0E82\"], \"\\u0E84\", [\"\\u0E87\", \"\\u0E88\"], \"\\u0E8A\", \"\\u0E8D\", [\"\\u0E94\", \"\\u0E97\"], [\"\\u0E99\", \"\\u0E9F\"], [\"\\u0EA1\", \"\\u0EA3\"], \"\\u0EA5\", \"\\u0EA7\", [\"\\u0EAA\", \"\\u0EAB\"], [\"\\u0EAD\", \"\\u0EB0\"], [\"\\u0EB2\", \"\\u0EB3\"], \"\\u0EBD\", [\"\\u0EC0\", \"\\u0EC4\"], [\"\\u0EDC\", \"\\u0EDF\"], \"\\u0F00\", [\"\\u0F40\", \"\\u0F47\"], [\"\\u0F49\", \"\\u0F6C\"], [\"\\u0F88\", \"\\u0F8C\"], [\"\\u1000\", \"\\u102A\"], \"\\u103F\", [\"\\u1050\", \"\\u1055\"], [\"\\u105A\", \"\\u105D\"], \"\\u1061\", [\"\\u1065\", \"\\u1066\"], [\"\\u106E\", \"\\u1070\"], [\"\\u1075\", \"\\u1081\"], \"\\u108E\", [\"\\u10D0\", \"\\u10FA\"], [\"\\u10FD\", \"\\u1248\"], [\"\\u124A\", \"\\u124D\"], [\"\\u1250\", \"\\u1256\"], \"\\u1258\", [\"\\u125A\", \"\\u125D\"], [\"\\u1260\", \"\\u1288\"], [\"\\u128A\", \"\\u128D\"], [\"\\u1290\", \"\\u12B0\"], [\"\\u12B2\", \"\\u12B5\"], [\"\\u12B8\", \"\\u12BE\"], \"\\u12C0\", [\"\\u12C2\", \"\\u12C5\"], [\"\\u12C8\", \"\\u12D6\"], [\"\\u12D8\", \"\\u1310\"], [\"\\u1312\", \"\\u1315\"], [\"\\u1318\", \"\\u135A\"], [\"\\u1380\", \"\\u138F\"], [\"\\u1401\", \"\\u166C\"], [\"\\u166F\", \"\\u167F\"], [\"\\u1681\", \"\\u169A\"], [\"\\u16A0\", \"\\u16EA\"], [\"\\u16F1\", \"\\u16F8\"], [\"\\u1700\", \"\\u170C\"], [\"\\u170E\", \"\\u1711\"], [\"\\u1720\", \"\\u1731\"], [\"\\u1740\", \"\\u1751\"], [\"\\u1760\", \"\\u176C\"], [\"\\u176E\", \"\\u1770\"], [\"\\u1780\", \"\\u17B3\"], \"\\u17DC\", [\"\\u1820\", \"\\u1842\"], [\"\\u1844\", \"\\u1877\"], [\"\\u1880\", \"\\u18A8\"], \"\\u18AA\", [\"\\u18B0\", \"\\u18F5\"], [\"\\u1900\", \"\\u191E\"], [\"\\u1950\", \"\\u196D\"], [\"\\u1970\", \"\\u1974\"], [\"\\u1980\", \"\\u19AB\"], [\"\\u19B0\", \"\\u19C9\"], [\"\\u1A00\", \"\\u1A16\"], [\"\\u1A20\", \"\\u1A54\"], [\"\\u1B05\", \"\\u1B33\"], [\"\\u1B45\", \"\\u1B4B\"], [\"\\u1B83\", \"\\u1BA0\"], [\"\\u1BAE\", \"\\u1BAF\"], [\"\\u1BBA\", \"\\u1BE5\"], [\"\\u1C00\", \"\\u1C23\"], [\"\\u1C4D\", \"\\u1C4F\"], [\"\\u1C5A\", \"\\u1C77\"], [\"\\u1CE9\", \"\\u1CEC\"], [\"\\u1CEE\", \"\\u1CF1\"], [\"\\u1CF5\", \"\\u1CF6\"], [\"\\u2135\", \"\\u2138\"], [\"\\u2D30\", \"\\u2D67\"], [\"\\u2D80\", \"\\u2D96\"], [\"\\u2DA0\", \"\\u2DA6\"], [\"\\u2DA8\", \"\\u2DAE\"], [\"\\u2DB0\", \"\\u2DB6\"], [\"\\u2DB8\", \"\\u2DBE\"], [\"\\u2DC0\", \"\\u2DC6\"], [\"\\u2DC8\", \"\\u2DCE\"], [\"\\u2DD0\", \"\\u2DD6\"], [\"\\u2DD8\", \"\\u2DDE\"], \"\\u3006\", \"\\u303C\", [\"\\u3041\", \"\\u3096\"], \"\\u309F\", [\"\\u30A1\", \"\\u30FA\"], \"\\u30FF\", [\"\\u3105\", \"\\u312D\"], [\"\\u3131\", \"\\u318E\"], [\"\\u31A0\", \"\\u31BA\"], [\"\\u31F0\", \"\\u31FF\"], [\"\\u3400\", \"\\u4DB5\"], [\"\\u4E00\", \"\\u9FD5\"], [\"\\uA000\", \"\\uA014\"], [\"\\uA016\", \"\\uA48C\"], [\"\\uA4D0\", \"\\uA4F7\"], [\"\\uA500\", \"\\uA60B\"], [\"\\uA610\", \"\\uA61F\"], [\"\\uA62A\", \"\\uA62B\"], \"\\uA66E\", [\"\\uA6A0\", \"\\uA6E5\"], \"\\uA78F\", \"\\uA7F7\", [\"\\uA7FB\", \"\\uA801\"], [\"\\uA803\", \"\\uA805\"], [\"\\uA807\", \"\\uA80A\"], [\"\\uA80C\", \"\\uA822\"], [\"\\uA840\", \"\\uA873\"], [\"\\uA882\", \"\\uA8B3\"], [\"\\uA8F2\", \"\\uA8F7\"], \"\\uA8FB\", \"\\uA8FD\", [\"\\uA90A\", \"\\uA925\"], [\"\\uA930\", \"\\uA946\"], [\"\\uA960\", \"\\uA97C\"], [\"\\uA984\", \"\\uA9B2\"], [\"\\uA9E0\", \"\\uA9E4\"], [\"\\uA9E7\", \"\\uA9EF\"], [\"\\uA9FA\", \"\\uA9FE\"], [\"\\uAA00\", \"\\uAA28\"], [\"\\uAA40\", \"\\uAA42\"], [\"\\uAA44\", \"\\uAA4B\"], [\"\\uAA60\", \"\\uAA6F\"], [\"\\uAA71\", \"\\uAA76\"], \"\\uAA7A\", [\"\\uAA7E\", \"\\uAAAF\"], \"\\uAAB1\", [\"\\uAAB5\", \"\\uAAB6\"], [\"\\uAAB9\", \"\\uAABD\"], \"\\uAAC0\", \"\\uAAC2\", [\"\\uAADB\", \"\\uAADC\"], [\"\\uAAE0\", \"\\uAAEA\"], \"\\uAAF2\", [\"\\uAB01\", \"\\uAB06\"], [\"\\uAB09\", \"\\uAB0E\"], [\"\\uAB11\", \"\\uAB16\"], [\"\\uAB20\", \"\\uAB26\"], [\"\\uAB28\", \"\\uAB2E\"], [\"\\uABC0\", \"\\uABE2\"], [\"\\uAC00\", \"\\uD7A3\"], [\"\\uD7B0\", \"\\uD7C6\"], [\"\\uD7CB\", \"\\uD7FB\"], [\"\\uF900\", \"\\uFA6D\"], [\"\\uFA70\", \"\\uFAD9\"], \"\\uFB1D\", [\"\\uFB1F\", \"\\uFB28\"], [\"\\uFB2A\", \"\\uFB36\"], [\"\\uFB38\", \"\\uFB3C\"], \"\\uFB3E\", [\"\\uFB40\", \"\\uFB41\"], [\"\\uFB43\", \"\\uFB44\"], [\"\\uFB46\", \"\\uFBB1\"], [\"\\uFBD3\", \"\\uFD3D\"], [\"\\uFD50\", \"\\uFD8F\"], [\"\\uFD92\", \"\\uFDC7\"], [\"\\uFDF0\", \"\\uFDFB\"], [\"\\uFE70\", \"\\uFE74\"], [\"\\uFE76\", \"\\uFEFC\"], [\"\\uFF66\", \"\\uFF6F\"], [\"\\uFF71\", \"\\uFF9D\"], [\"\\uFFA0\", \"\\uFFBE\"], [\"\\uFFC2\", \"\\uFFC7\"], [\"\\uFFCA\", \"\\uFFCF\"], [\"\\uFFD2\", \"\\uFFD7\"], [\"\\uFFDA\", \"\\uFFDC\"]], false, false),\r\n     peg$c143 = /^[\\u01C5\\u01C8\\u01CB\\u01F2\\u1F88-\\u1F8F\\u1F98-\\u1F9F\\u1FA8-\\u1FAF\\u1FBC\\u1FCC\\u1FFC]/,\r\n     peg$c144 = peg$classExpectation([\"\\u01C5\", \"\\u01C8\", \"\\u01CB\", \"\\u01F2\", [\"\\u1F88\", \"\\u1F8F\"], [\"\\u1F98\", \"\\u1F9F\"], [\"\\u1FA8\", \"\\u1FAF\"], \"\\u1FBC\", \"\\u1FCC\", \"\\u1FFC\"], false, false),\r\n     peg$c145 = /^[A-Z\\xC0-\\xD6\\xD8-\\xDE\\u0100\\u0102\\u0104\\u0106\\u0108\\u010A\\u010C\\u010E\\u0110\\u0112\\u0114\\u0116\\u0118\\u011A\\u011C\\u011E\\u0120\\u0122\\u0124\\u0126\\u0128\\u012A\\u012C\\u012E\\u0130\\u0132\\u0134\\u0136\\u0139\\u013B\\u013D\\u013F\\u0141\\u0143\\u0145\\u0147\\u014A\\u014C\\u014E\\u0150\\u0152\\u0154\\u0156\\u0158\\u015A\\u015C\\u015E\\u0160\\u0162\\u0164\\u0166\\u0168\\u016A\\u016C\\u016E\\u0170\\u0172\\u0174\\u0176\\u0178-\\u0179\\u017B\\u017D\\u0181-\\u0182\\u0184\\u0186-\\u0187\\u0189-\\u018B\\u018E-\\u0191\\u0193-\\u0194\\u0196-\\u0198\\u019C-\\u019D\\u019F-\\u01A0\\u01A2\\u01A4\\u01A6-\\u01A7\\u01A9\\u01AC\\u01AE-\\u01AF\\u01B1-\\u01B3\\u01B5\\u01B7-\\u01B8\\u01BC\\u01C4\\u01C7\\u01CA\\u01CD\\u01CF\\u01D1\\u01D3\\u01D5\\u01D7\\u01D9\\u01DB\\u01DE\\u01E0\\u01E2\\u01E4\\u01E6\\u01E8\\u01EA\\u01EC\\u01EE\\u01F1\\u01F4\\u01F6-\\u01F8\\u01FA\\u01FC\\u01FE\\u0200\\u0202\\u0204\\u0206\\u0208\\u020A\\u020C\\u020E\\u0210\\u0212\\u0214\\u0216\\u0218\\u021A\\u021C\\u021E\\u0220\\u0222\\u0224\\u0226\\u0228\\u022A\\u022C\\u022E\\u0230\\u0232\\u023A-\\u023B\\u023D-\\u023E\\u0241\\u0243-\\u0246\\u0248\\u024A\\u024C\\u024E\\u0370\\u0372\\u0376\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u038F\\u0391-\\u03A1\\u03A3-\\u03AB\\u03CF\\u03D2-\\u03D4\\u03D8\\u03DA\\u03DC\\u03DE\\u03E0\\u03E2\\u03E4\\u03E6\\u03E8\\u03EA\\u03EC\\u03EE\\u03F4\\u03F7\\u03F9-\\u03FA\\u03FD-\\u042F\\u0460\\u0462\\u0464\\u0466\\u0468\\u046A\\u046C\\u046E\\u0470\\u0472\\u0474\\u0476\\u0478\\u047A\\u047C\\u047E\\u0480\\u048A\\u048C\\u048E\\u0490\\u0492\\u0494\\u0496\\u0498\\u049A\\u049C\\u049E\\u04A0\\u04A2\\u04A4\\u04A6\\u04A8\\u04AA\\u04AC\\u04AE\\u04B0\\u04B2\\u04B4\\u04B6\\u04B8\\u04BA\\u04BC\\u04BE\\u04C0-\\u04C1\\u04C3\\u04C5\\u04C7\\u04C9\\u04CB\\u04CD\\u04D0\\u04D2\\u04D4\\u04D6\\u04D8\\u04DA\\u04DC\\u04DE\\u04E0\\u04E2\\u04E4\\u04E6\\u04E8\\u04EA\\u04EC\\u04EE\\u04F0\\u04F2\\u04F4\\u04F6\\u04F8\\u04FA\\u04FC\\u04FE\\u0500\\u0502\\u0504\\u0506\\u0508\\u050A\\u050C\\u050E\\u0510\\u0512\\u0514\\u0516\\u0518\\u051A\\u051C\\u051E\\u0520\\u0522\\u0524\\u0526\\u0528\\u052A\\u052C\\u052E\\u0531-\\u0556\\u10A0-\\u10C5\\u10C7\\u10CD\\u13A0-\\u13F5\\u1E00\\u1E02\\u1E04\\u1E06\\u1E08\\u1E0A\\u1E0C\\u1E0E\\u1E10\\u1E12\\u1E14\\u1E16\\u1E18\\u1E1A\\u1E1C\\u1E1E\\u1E20\\u1E22\\u1E24\\u1E26\\u1E28\\u1E2A\\u1E2C\\u1E2E\\u1E30\\u1E32\\u1E34\\u1E36\\u1E38\\u1E3A\\u1E3C\\u1E3E\\u1E40\\u1E42\\u1E44\\u1E46\\u1E48\\u1E4A\\u1E4C\\u1E4E\\u1E50\\u1E52\\u1E54\\u1E56\\u1E58\\u1E5A\\u1E5C\\u1E5E\\u1E60\\u1E62\\u1E64\\u1E66\\u1E68\\u1E6A\\u1E6C\\u1E6E\\u1E70\\u1E72\\u1E74\\u1E76\\u1E78\\u1E7A\\u1E7C\\u1E7E\\u1E80\\u1E82\\u1E84\\u1E86\\u1E88\\u1E8A\\u1E8C\\u1E8E\\u1E90\\u1E92\\u1E94\\u1E9E\\u1EA0\\u1EA2\\u1EA4\\u1EA6\\u1EA8\\u1EAA\\u1EAC\\u1EAE\\u1EB0\\u1EB2\\u1EB4\\u1EB6\\u1EB8\\u1EBA\\u1EBC\\u1EBE\\u1EC0\\u1EC2\\u1EC4\\u1EC6\\u1EC8\\u1ECA\\u1ECC\\u1ECE\\u1ED0\\u1ED2\\u1ED4\\u1ED6\\u1ED8\\u1EDA\\u1EDC\\u1EDE\\u1EE0\\u1EE2\\u1EE4\\u1EE6\\u1EE8\\u1EEA\\u1EEC\\u1EEE\\u1EF0\\u1EF2\\u1EF4\\u1EF6\\u1EF8\\u1EFA\\u1EFC\\u1EFE\\u1F08-\\u1F0F\\u1F18-\\u1F1D\\u1F28-\\u1F2F\\u1F38-\\u1F3F\\u1F48-\\u1F4D\\u1F59\\u1F5B\\u1F5D\\u1F5F\\u1F68-\\u1F6F\\u1FB8-\\u1FBB\\u1FC8-\\u1FCB\\u1FD8-\\u1FDB\\u1FE8-\\u1FEC\\u1FF8-\\u1FFB\\u2102\\u2107\\u210B-\\u210D\\u2110-\\u2112\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u2130-\\u2133\\u213E-\\u213F\\u2145\\u2183\\u2C00-\\u2C2E\\u2C60\\u2C62-\\u2C64\\u2C67\\u2C69\\u2C6B\\u2C6D-\\u2C70\\u2C72\\u2C75\\u2C7E-\\u2C80\\u2C82\\u2C84\\u2C86\\u2C88\\u2C8A\\u2C8C\\u2C8E\\u2C90\\u2C92\\u2C94\\u2C96\\u2C98\\u2C9A\\u2C9C\\u2C9E\\u2CA0\\u2CA2\\u2CA4\\u2CA6\\u2CA8\\u2CAA\\u2CAC\\u2CAE\\u2CB0\\u2CB2\\u2CB4\\u2CB6\\u2CB8\\u2CBA\\u2CBC\\u2CBE\\u2CC0\\u2CC2\\u2CC4\\u2CC6\\u2CC8\\u2CCA\\u2CCC\\u2CCE\\u2CD0\\u2CD2\\u2CD4\\u2CD6\\u2CD8\\u2CDA\\u2CDC\\u2CDE\\u2CE0\\u2CE2\\u2CEB\\u2CED\\u2CF2\\uA640\\uA642\\uA644\\uA646\\uA648\\uA64A\\uA64C\\uA64E\\uA650\\uA652\\uA654\\uA656\\uA658\\uA65A\\uA65C\\uA65E\\uA660\\uA662\\uA664\\uA666\\uA668\\uA66A\\uA66C\\uA680\\uA682\\uA684\\uA686\\uA688\\uA68A\\uA68C\\uA68E\\uA690\\uA692\\uA694\\uA696\\uA698\\uA69A\\uA722\\uA724\\uA726\\uA728\\uA72A\\uA72C\\uA72E\\uA732\\uA734\\uA736\\uA738\\uA73A\\uA73C\\uA73E\\uA740\\uA742\\uA744\\uA746\\uA748\\uA74A\\uA74C\\uA74E\\uA750\\uA752\\uA754\\uA756\\uA758\\uA75A\\uA75C\\uA75E\\uA760\\uA762\\uA764\\uA766\\uA768\\uA76A\\uA76C\\uA76E\\uA779\\uA77B\\uA77D-\\uA77E\\uA780\\uA782\\uA784\\uA786\\uA78B\\uA78D\\uA790\\uA792\\uA796\\uA798\\uA79A\\uA79C\\uA79E\\uA7A0\\uA7A2\\uA7A4\\uA7A6\\uA7A8\\uA7AA-\\uA7AD\\uA7B0-\\uA7B4\\uA7B6\\uFF21-\\uFF3A]/,\r\n     peg$c146 = peg$classExpectation([[\"A\", \"Z\"], [\"\\xC0\", \"\\xD6\"], [\"\\xD8\", \"\\xDE\"], \"\\u0100\", \"\\u0102\", \"\\u0104\", \"\\u0106\", \"\\u0108\", \"\\u010A\", \"\\u010C\", \"\\u010E\", \"\\u0110\", \"\\u0112\", \"\\u0114\", \"\\u0116\", \"\\u0118\", \"\\u011A\", \"\\u011C\", \"\\u011E\", \"\\u0120\", \"\\u0122\", \"\\u0124\", \"\\u0126\", \"\\u0128\", \"\\u012A\", \"\\u012C\", \"\\u012E\", \"\\u0130\", \"\\u0132\", \"\\u0134\", \"\\u0136\", \"\\u0139\", \"\\u013B\", \"\\u013D\", \"\\u013F\", \"\\u0141\", \"\\u0143\", \"\\u0145\", \"\\u0147\", \"\\u014A\", \"\\u014C\", \"\\u014E\", \"\\u0150\", \"\\u0152\", \"\\u0154\", \"\\u0156\", \"\\u0158\", \"\\u015A\", \"\\u015C\", \"\\u015E\", \"\\u0160\", \"\\u0162\", \"\\u0164\", \"\\u0166\", \"\\u0168\", \"\\u016A\", \"\\u016C\", \"\\u016E\", \"\\u0170\", \"\\u0172\", \"\\u0174\", \"\\u0176\", [\"\\u0178\", \"\\u0179\"], \"\\u017B\", \"\\u017D\", [\"\\u0181\", \"\\u0182\"], \"\\u0184\", [\"\\u0186\", \"\\u0187\"], [\"\\u0189\", \"\\u018B\"], [\"\\u018E\", \"\\u0191\"], [\"\\u0193\", \"\\u0194\"], [\"\\u0196\", \"\\u0198\"], [\"\\u019C\", \"\\u019D\"], [\"\\u019F\", \"\\u01A0\"], \"\\u01A2\", \"\\u01A4\", [\"\\u01A6\", \"\\u01A7\"], \"\\u01A9\", \"\\u01AC\", [\"\\u01AE\", \"\\u01AF\"], [\"\\u01B1\", \"\\u01B3\"], \"\\u01B5\", [\"\\u01B7\", \"\\u01B8\"], \"\\u01BC\", \"\\u01C4\", \"\\u01C7\", \"\\u01CA\", \"\\u01CD\", \"\\u01CF\", \"\\u01D1\", \"\\u01D3\", \"\\u01D5\", \"\\u01D7\", \"\\u01D9\", \"\\u01DB\", \"\\u01DE\", \"\\u01E0\", \"\\u01E2\", \"\\u01E4\", \"\\u01E6\", \"\\u01E8\", \"\\u01EA\", \"\\u01EC\", \"\\u01EE\", \"\\u01F1\", \"\\u01F4\", [\"\\u01F6\", \"\\u01F8\"], \"\\u01FA\", \"\\u01FC\", \"\\u01FE\", \"\\u0200\", \"\\u0202\", \"\\u0204\", \"\\u0206\", \"\\u0208\", \"\\u020A\", \"\\u020C\", \"\\u020E\", \"\\u0210\", \"\\u0212\", \"\\u0214\", \"\\u0216\", \"\\u0218\", \"\\u021A\", \"\\u021C\", \"\\u021E\", \"\\u0220\", \"\\u0222\", \"\\u0224\", \"\\u0226\", \"\\u0228\", \"\\u022A\", \"\\u022C\", \"\\u022E\", \"\\u0230\", \"\\u0232\", [\"\\u023A\", \"\\u023B\"], [\"\\u023D\", \"\\u023E\"], \"\\u0241\", [\"\\u0243\", \"\\u0246\"], \"\\u0248\", \"\\u024A\", \"\\u024C\", \"\\u024E\", \"\\u0370\", \"\\u0372\", \"\\u0376\", \"\\u037F\", \"\\u0386\", [\"\\u0388\", \"\\u038A\"], \"\\u038C\", [\"\\u038E\", \"\\u038F\"], [\"\\u0391\", \"\\u03A1\"], [\"\\u03A3\", \"\\u03AB\"], \"\\u03CF\", [\"\\u03D2\", \"\\u03D4\"], \"\\u03D8\", \"\\u03DA\", \"\\u03DC\", \"\\u03DE\", \"\\u03E0\", \"\\u03E2\", \"\\u03E4\", \"\\u03E6\", \"\\u03E8\", \"\\u03EA\", \"\\u03EC\", \"\\u03EE\", \"\\u03F4\", \"\\u03F7\", [\"\\u03F9\", \"\\u03FA\"], [\"\\u03FD\", \"\\u042F\"], \"\\u0460\", \"\\u0462\", \"\\u0464\", \"\\u0466\", \"\\u0468\", \"\\u046A\", \"\\u046C\", \"\\u046E\", \"\\u0470\", \"\\u0472\", \"\\u0474\", \"\\u0476\", \"\\u0478\", \"\\u047A\", \"\\u047C\", \"\\u047E\", \"\\u0480\", \"\\u048A\", \"\\u048C\", \"\\u048E\", \"\\u0490\", \"\\u0492\", \"\\u0494\", \"\\u0496\", \"\\u0498\", \"\\u049A\", \"\\u049C\", \"\\u049E\", \"\\u04A0\", \"\\u04A2\", \"\\u04A4\", \"\\u04A6\", \"\\u04A8\", \"\\u04AA\", \"\\u04AC\", \"\\u04AE\", \"\\u04B0\", \"\\u04B2\", \"\\u04B4\", \"\\u04B6\", \"\\u04B8\", \"\\u04BA\", \"\\u04BC\", \"\\u04BE\", [\"\\u04C0\", \"\\u04C1\"], \"\\u04C3\", \"\\u04C5\", \"\\u04C7\", \"\\u04C9\", \"\\u04CB\", \"\\u04CD\", \"\\u04D0\", \"\\u04D2\", \"\\u04D4\", \"\\u04D6\", \"\\u04D8\", \"\\u04DA\", \"\\u04DC\", \"\\u04DE\", \"\\u04E0\", \"\\u04E2\", \"\\u04E4\", \"\\u04E6\", \"\\u04E8\", \"\\u04EA\", \"\\u04EC\", \"\\u04EE\", \"\\u04F0\", \"\\u04F2\", \"\\u04F4\", \"\\u04F6\", \"\\u04F8\", \"\\u04FA\", \"\\u04FC\", \"\\u04FE\", \"\\u0500\", \"\\u0502\", \"\\u0504\", \"\\u0506\", \"\\u0508\", \"\\u050A\", \"\\u050C\", \"\\u050E\", \"\\u0510\", \"\\u0512\", \"\\u0514\", \"\\u0516\", \"\\u0518\", \"\\u051A\", \"\\u051C\", \"\\u051E\", \"\\u0520\", \"\\u0522\", \"\\u0524\", \"\\u0526\", \"\\u0528\", \"\\u052A\", \"\\u052C\", \"\\u052E\", [\"\\u0531\", \"\\u0556\"], [\"\\u10A0\", \"\\u10C5\"], \"\\u10C7\", \"\\u10CD\", [\"\\u13A0\", \"\\u13F5\"], \"\\u1E00\", \"\\u1E02\", \"\\u1E04\", \"\\u1E06\", \"\\u1E08\", \"\\u1E0A\", \"\\u1E0C\", \"\\u1E0E\", \"\\u1E10\", \"\\u1E12\", \"\\u1E14\", \"\\u1E16\", \"\\u1E18\", \"\\u1E1A\", \"\\u1E1C\", \"\\u1E1E\", \"\\u1E20\", \"\\u1E22\", \"\\u1E24\", \"\\u1E26\", \"\\u1E28\", \"\\u1E2A\", \"\\u1E2C\", \"\\u1E2E\", \"\\u1E30\", \"\\u1E32\", \"\\u1E34\", \"\\u1E36\", \"\\u1E38\", \"\\u1E3A\", \"\\u1E3C\", \"\\u1E3E\", \"\\u1E40\", \"\\u1E42\", \"\\u1E44\", \"\\u1E46\", \"\\u1E48\", \"\\u1E4A\", \"\\u1E4C\", \"\\u1E4E\", \"\\u1E50\", \"\\u1E52\", \"\\u1E54\", \"\\u1E56\", \"\\u1E58\", \"\\u1E5A\", \"\\u1E5C\", \"\\u1E5E\", \"\\u1E60\", \"\\u1E62\", \"\\u1E64\", \"\\u1E66\", \"\\u1E68\", \"\\u1E6A\", \"\\u1E6C\", \"\\u1E6E\", \"\\u1E70\", \"\\u1E72\", \"\\u1E74\", \"\\u1E76\", \"\\u1E78\", \"\\u1E7A\", \"\\u1E7C\", \"\\u1E7E\", \"\\u1E80\", \"\\u1E82\", \"\\u1E84\", \"\\u1E86\", \"\\u1E88\", \"\\u1E8A\", \"\\u1E8C\", \"\\u1E8E\", \"\\u1E90\", \"\\u1E92\", \"\\u1E94\", \"\\u1E9E\", \"\\u1EA0\", \"\\u1EA2\", \"\\u1EA4\", \"\\u1EA6\", \"\\u1EA8\", \"\\u1EAA\", \"\\u1EAC\", \"\\u1EAE\", \"\\u1EB0\", \"\\u1EB2\", \"\\u1EB4\", \"\\u1EB6\", \"\\u1EB8\", \"\\u1EBA\", \"\\u1EBC\", \"\\u1EBE\", \"\\u1EC0\", \"\\u1EC2\", \"\\u1EC4\", \"\\u1EC6\", \"\\u1EC8\", \"\\u1ECA\", \"\\u1ECC\", \"\\u1ECE\", \"\\u1ED0\", \"\\u1ED2\", \"\\u1ED4\", \"\\u1ED6\", \"\\u1ED8\", \"\\u1EDA\", \"\\u1EDC\", \"\\u1EDE\", \"\\u1EE0\", \"\\u1EE2\", \"\\u1EE4\", \"\\u1EE6\", \"\\u1EE8\", \"\\u1EEA\", \"\\u1EEC\", \"\\u1EEE\", \"\\u1EF0\", \"\\u1EF2\", \"\\u1EF4\", \"\\u1EF6\", \"\\u1EF8\", \"\\u1EFA\", \"\\u1EFC\", \"\\u1EFE\", [\"\\u1F08\", \"\\u1F0F\"], [\"\\u1F18\", \"\\u1F1D\"], [\"\\u1F28\", \"\\u1F2F\"], [\"\\u1F38\", \"\\u1F3F\"], [\"\\u1F48\", \"\\u1F4D\"], \"\\u1F59\", \"\\u1F5B\", \"\\u1F5D\", \"\\u1F5F\", [\"\\u1F68\", \"\\u1F6F\"], [\"\\u1FB8\", \"\\u1FBB\"], [\"\\u1FC8\", \"\\u1FCB\"], [\"\\u1FD8\", \"\\u1FDB\"], [\"\\u1FE8\", \"\\u1FEC\"], [\"\\u1FF8\", \"\\u1FFB\"], \"\\u2102\", \"\\u2107\", [\"\\u210B\", \"\\u210D\"], [\"\\u2110\", \"\\u2112\"], \"\\u2115\", [\"\\u2119\", \"\\u211D\"], \"\\u2124\", \"\\u2126\", \"\\u2128\", [\"\\u212A\", \"\\u212D\"], [\"\\u2130\", \"\\u2133\"], [\"\\u213E\", \"\\u213F\"], \"\\u2145\", \"\\u2183\", [\"\\u2C00\", \"\\u2C2E\"], \"\\u2C60\", [\"\\u2C62\", \"\\u2C64\"], \"\\u2C67\", \"\\u2C69\", \"\\u2C6B\", [\"\\u2C6D\", \"\\u2C70\"], \"\\u2C72\", \"\\u2C75\", [\"\\u2C7E\", \"\\u2C80\"], \"\\u2C82\", \"\\u2C84\", \"\\u2C86\", \"\\u2C88\", \"\\u2C8A\", \"\\u2C8C\", \"\\u2C8E\", \"\\u2C90\", \"\\u2C92\", \"\\u2C94\", \"\\u2C96\", \"\\u2C98\", \"\\u2C9A\", \"\\u2C9C\", \"\\u2C9E\", \"\\u2CA0\", \"\\u2CA2\", \"\\u2CA4\", \"\\u2CA6\", \"\\u2CA8\", \"\\u2CAA\", \"\\u2CAC\", \"\\u2CAE\", \"\\u2CB0\", \"\\u2CB2\", \"\\u2CB4\", \"\\u2CB6\", \"\\u2CB8\", \"\\u2CBA\", \"\\u2CBC\", \"\\u2CBE\", \"\\u2CC0\", \"\\u2CC2\", \"\\u2CC4\", \"\\u2CC6\", \"\\u2CC8\", \"\\u2CCA\", \"\\u2CCC\", \"\\u2CCE\", \"\\u2CD0\", \"\\u2CD2\", \"\\u2CD4\", \"\\u2CD6\", \"\\u2CD8\", \"\\u2CDA\", \"\\u2CDC\", \"\\u2CDE\", \"\\u2CE0\", \"\\u2CE2\", \"\\u2CEB\", \"\\u2CED\", \"\\u2CF2\", \"\\uA640\", \"\\uA642\", \"\\uA644\", \"\\uA646\", \"\\uA648\", \"\\uA64A\", \"\\uA64C\", \"\\uA64E\", \"\\uA650\", \"\\uA652\", \"\\uA654\", \"\\uA656\", \"\\uA658\", \"\\uA65A\", \"\\uA65C\", \"\\uA65E\", \"\\uA660\", \"\\uA662\", \"\\uA664\", \"\\uA666\", \"\\uA668\", \"\\uA66A\", \"\\uA66C\", \"\\uA680\", \"\\uA682\", \"\\uA684\", \"\\uA686\", \"\\uA688\", \"\\uA68A\", \"\\uA68C\", \"\\uA68E\", \"\\uA690\", \"\\uA692\", \"\\uA694\", \"\\uA696\", \"\\uA698\", \"\\uA69A\", \"\\uA722\", \"\\uA724\", \"\\uA726\", \"\\uA728\", \"\\uA72A\", \"\\uA72C\", \"\\uA72E\", \"\\uA732\", \"\\uA734\", \"\\uA736\", \"\\uA738\", \"\\uA73A\", \"\\uA73C\", \"\\uA73E\", \"\\uA740\", \"\\uA742\", \"\\uA744\", \"\\uA746\", \"\\uA748\", \"\\uA74A\", \"\\uA74C\", \"\\uA74E\", \"\\uA750\", \"\\uA752\", \"\\uA754\", \"\\uA756\", \"\\uA758\", \"\\uA75A\", \"\\uA75C\", \"\\uA75E\", \"\\uA760\", \"\\uA762\", \"\\uA764\", \"\\uA766\", \"\\uA768\", \"\\uA76A\", \"\\uA76C\", \"\\uA76E\", \"\\uA779\", \"\\uA77B\", [\"\\uA77D\", \"\\uA77E\"], \"\\uA780\", \"\\uA782\", \"\\uA784\", \"\\uA786\", \"\\uA78B\", \"\\uA78D\", \"\\uA790\", \"\\uA792\", \"\\uA796\", \"\\uA798\", \"\\uA79A\", \"\\uA79C\", \"\\uA79E\", \"\\uA7A0\", \"\\uA7A2\", \"\\uA7A4\", \"\\uA7A6\", \"\\uA7A8\", [\"\\uA7AA\", \"\\uA7AD\"], [\"\\uA7B0\", \"\\uA7B4\"], \"\\uA7B6\", [\"\\uFF21\", \"\\uFF3A\"]], false, false),\r\n     peg$c147 = /^[\\u0903\\u093B\\u093E-\\u0940\\u0949-\\u094C\\u094E-\\u094F\\u0982-\\u0983\\u09BE-\\u09C0\\u09C7-\\u09C8\\u09CB-\\u09CC\\u09D7\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB-\\u0ACC\\u0B02-\\u0B03\\u0B3E\\u0B40\\u0B47-\\u0B48\\u0B4B-\\u0B4C\\u0B57\\u0BBE-\\u0BBF\\u0BC1-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD7\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82-\\u0C83\\u0CBE\\u0CC0-\\u0CC4\\u0CC7-\\u0CC8\\u0CCA-\\u0CCB\\u0CD5-\\u0CD6\\u0D02-\\u0D03\\u0D3E-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D57\\u0D82-\\u0D83\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DF2-\\u0DF3\\u0F3E-\\u0F3F\\u0F7F\\u102B-\\u102C\\u1031\\u1038\\u103B-\\u103C\\u1056-\\u1057\\u1062-\\u1064\\u1067-\\u106D\\u1083-\\u1084\\u1087-\\u108C\\u108F\\u109A-\\u109C\\u17B6\\u17BE-\\u17C5\\u17C7-\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930-\\u1931\\u1933-\\u1938\\u1A19-\\u1A1A\\u1A55\\u1A57\\u1A61\\u1A63-\\u1A64\\u1A6D-\\u1A72\\u1B04\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43-\\u1B44\\u1B82\\u1BA1\\u1BA6-\\u1BA7\\u1BAA\\u1BE7\\u1BEA-\\u1BEC\\u1BEE\\u1BF2-\\u1BF3\\u1C24-\\u1C2B\\u1C34-\\u1C35\\u1CE1\\u1CF2-\\u1CF3\\u302E-\\u302F\\uA823-\\uA824\\uA827\\uA880-\\uA881\\uA8B4-\\uA8C3\\uA952-\\uA953\\uA983\\uA9B4-\\uA9B5\\uA9BA-\\uA9BB\\uA9BD-\\uA9C0\\uAA2F-\\uAA30\\uAA33-\\uAA34\\uAA4D\\uAA7B\\uAA7D\\uAAEB\\uAAEE-\\uAAEF\\uAAF5\\uABE3-\\uABE4\\uABE6-\\uABE7\\uABE9-\\uABEA\\uABEC]/,\r\n     peg$c148 = peg$classExpectation([\"\\u0903\", \"\\u093B\", [\"\\u093E\", \"\\u0940\"], [\"\\u0949\", \"\\u094C\"], [\"\\u094E\", \"\\u094F\"], [\"\\u0982\", \"\\u0983\"], [\"\\u09BE\", \"\\u09C0\"], [\"\\u09C7\", \"\\u09C8\"], [\"\\u09CB\", \"\\u09CC\"], \"\\u09D7\", \"\\u0A03\", [\"\\u0A3E\", \"\\u0A40\"], \"\\u0A83\", [\"\\u0ABE\", \"\\u0AC0\"], \"\\u0AC9\", [\"\\u0ACB\", \"\\u0ACC\"], [\"\\u0B02\", \"\\u0B03\"], \"\\u0B3E\", \"\\u0B40\", [\"\\u0B47\", \"\\u0B48\"], [\"\\u0B4B\", \"\\u0B4C\"], \"\\u0B57\", [\"\\u0BBE\", \"\\u0BBF\"], [\"\\u0BC1\", \"\\u0BC2\"], [\"\\u0BC6\", \"\\u0BC8\"], [\"\\u0BCA\", \"\\u0BCC\"], \"\\u0BD7\", [\"\\u0C01\", \"\\u0C03\"], [\"\\u0C41\", \"\\u0C44\"], [\"\\u0C82\", \"\\u0C83\"], \"\\u0CBE\", [\"\\u0CC0\", \"\\u0CC4\"], [\"\\u0CC7\", \"\\u0CC8\"], [\"\\u0CCA\", \"\\u0CCB\"], [\"\\u0CD5\", \"\\u0CD6\"], [\"\\u0D02\", \"\\u0D03\"], [\"\\u0D3E\", \"\\u0D40\"], [\"\\u0D46\", \"\\u0D48\"], [\"\\u0D4A\", \"\\u0D4C\"], \"\\u0D57\", [\"\\u0D82\", \"\\u0D83\"], [\"\\u0DCF\", \"\\u0DD1\"], [\"\\u0DD8\", \"\\u0DDF\"], [\"\\u0DF2\", \"\\u0DF3\"], [\"\\u0F3E\", \"\\u0F3F\"], \"\\u0F7F\", [\"\\u102B\", \"\\u102C\"], \"\\u1031\", \"\\u1038\", [\"\\u103B\", \"\\u103C\"], [\"\\u1056\", \"\\u1057\"], [\"\\u1062\", \"\\u1064\"], [\"\\u1067\", \"\\u106D\"], [\"\\u1083\", \"\\u1084\"], [\"\\u1087\", \"\\u108C\"], \"\\u108F\", [\"\\u109A\", \"\\u109C\"], \"\\u17B6\", [\"\\u17BE\", \"\\u17C5\"], [\"\\u17C7\", \"\\u17C8\"], [\"\\u1923\", \"\\u1926\"], [\"\\u1929\", \"\\u192B\"], [\"\\u1930\", \"\\u1931\"], [\"\\u1933\", \"\\u1938\"], [\"\\u1A19\", \"\\u1A1A\"], \"\\u1A55\", \"\\u1A57\", \"\\u1A61\", [\"\\u1A63\", \"\\u1A64\"], [\"\\u1A6D\", \"\\u1A72\"], \"\\u1B04\", \"\\u1B35\", \"\\u1B3B\", [\"\\u1B3D\", \"\\u1B41\"], [\"\\u1B43\", \"\\u1B44\"], \"\\u1B82\", \"\\u1BA1\", [\"\\u1BA6\", \"\\u1BA7\"], \"\\u1BAA\", \"\\u1BE7\", [\"\\u1BEA\", \"\\u1BEC\"], \"\\u1BEE\", [\"\\u1BF2\", \"\\u1BF3\"], [\"\\u1C24\", \"\\u1C2B\"], [\"\\u1C34\", \"\\u1C35\"], \"\\u1CE1\", [\"\\u1CF2\", \"\\u1CF3\"], [\"\\u302E\", \"\\u302F\"], [\"\\uA823\", \"\\uA824\"], \"\\uA827\", [\"\\uA880\", \"\\uA881\"], [\"\\uA8B4\", \"\\uA8C3\"], [\"\\uA952\", \"\\uA953\"], \"\\uA983\", [\"\\uA9B4\", \"\\uA9B5\"], [\"\\uA9BA\", \"\\uA9BB\"], [\"\\uA9BD\", \"\\uA9C0\"], [\"\\uAA2F\", \"\\uAA30\"], [\"\\uAA33\", \"\\uAA34\"], \"\\uAA4D\", \"\\uAA7B\", \"\\uAA7D\", \"\\uAAEB\", [\"\\uAAEE\", \"\\uAAEF\"], \"\\uAAF5\", [\"\\uABE3\", \"\\uABE4\"], [\"\\uABE6\", \"\\uABE7\"], [\"\\uABE9\", \"\\uABEA\"], \"\\uABEC\"], false, false),\r\n     peg$c149 = /^[\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1-\\u05C2\\u05C4-\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7-\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E3-\\u0902\\u093A\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2-\\u09E3\\u0A01-\\u0A02\\u0A3C\\u0A41-\\u0A42\\u0A47-\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70-\\u0A71\\u0A75\\u0A81-\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7-\\u0AC8\\u0ACD\\u0AE2-\\u0AE3\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B56\\u0B62-\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C00\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55-\\u0C56\\u0C62-\\u0C63\\u0C81\\u0CBC\\u0CBF\\u0CC6\\u0CCC-\\u0CCD\\u0CE2-\\u0CE3\\u0D01\\u0D41-\\u0D44\\u0D4D\\u0D62-\\u0D63\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB-\\u0EBC\\u0EC8-\\u0ECD\\u0F18-\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86-\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039-\\u103A\\u103D-\\u103E\\u1058-\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085-\\u1086\\u108D\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17B4-\\u17B5\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193B\\u1A17-\\u1A18\\u1A1B\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1AB0-\\u1ABD\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80-\\u1B81\\u1BA2-\\u1BA5\\u1BA8-\\u1BA9\\u1BAB-\\u1BAD\\u1BE6\\u1BE8-\\u1BE9\\u1BED\\u1BEF-\\u1BF1\\u1C2C-\\u1C33\\u1C36-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1CF4\\u1CF8-\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302D\\u3099-\\u309A\\uA66F\\uA674-\\uA67D\\uA69E-\\uA69F\\uA6F0-\\uA6F1\\uA802\\uA806\\uA80B\\uA825-\\uA826\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uA9E5\\uAA29-\\uAA2E\\uAA31-\\uAA32\\uAA35-\\uAA36\\uAA43\\uAA4C\\uAA7C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7-\\uAAB8\\uAABE-\\uAABF\\uAAC1\\uAAEC-\\uAAED\\uAAF6\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F]/,\r\n     peg$c150 = peg$classExpectation([[\"\\u0300\", \"\\u036F\"], [\"\\u0483\", \"\\u0487\"], [\"\\u0591\", \"\\u05BD\"], \"\\u05BF\", [\"\\u05C1\", \"\\u05C2\"], [\"\\u05C4\", \"\\u05C5\"], \"\\u05C7\", [\"\\u0610\", \"\\u061A\"], [\"\\u064B\", \"\\u065F\"], \"\\u0670\", [\"\\u06D6\", \"\\u06DC\"], [\"\\u06DF\", \"\\u06E4\"], [\"\\u06E7\", \"\\u06E8\"], [\"\\u06EA\", \"\\u06ED\"], \"\\u0711\", [\"\\u0730\", \"\\u074A\"], [\"\\u07A6\", \"\\u07B0\"], [\"\\u07EB\", \"\\u07F3\"], [\"\\u0816\", \"\\u0819\"], [\"\\u081B\", \"\\u0823\"], [\"\\u0825\", \"\\u0827\"], [\"\\u0829\", \"\\u082D\"], [\"\\u0859\", \"\\u085B\"], [\"\\u08E3\", \"\\u0902\"], \"\\u093A\", \"\\u093C\", [\"\\u0941\", \"\\u0948\"], \"\\u094D\", [\"\\u0951\", \"\\u0957\"], [\"\\u0962\", \"\\u0963\"], \"\\u0981\", \"\\u09BC\", [\"\\u09C1\", \"\\u09C4\"], \"\\u09CD\", [\"\\u09E2\", \"\\u09E3\"], [\"\\u0A01\", \"\\u0A02\"], \"\\u0A3C\", [\"\\u0A41\", \"\\u0A42\"], [\"\\u0A47\", \"\\u0A48\"], [\"\\u0A4B\", \"\\u0A4D\"], \"\\u0A51\", [\"\\u0A70\", \"\\u0A71\"], \"\\u0A75\", [\"\\u0A81\", \"\\u0A82\"], \"\\u0ABC\", [\"\\u0AC1\", \"\\u0AC5\"], [\"\\u0AC7\", \"\\u0AC8\"], \"\\u0ACD\", [\"\\u0AE2\", \"\\u0AE3\"], \"\\u0B01\", \"\\u0B3C\", \"\\u0B3F\", [\"\\u0B41\", \"\\u0B44\"], \"\\u0B4D\", \"\\u0B56\", [\"\\u0B62\", \"\\u0B63\"], \"\\u0B82\", \"\\u0BC0\", \"\\u0BCD\", \"\\u0C00\", [\"\\u0C3E\", \"\\u0C40\"], [\"\\u0C46\", \"\\u0C48\"], [\"\\u0C4A\", \"\\u0C4D\"], [\"\\u0C55\", \"\\u0C56\"], [\"\\u0C62\", \"\\u0C63\"], \"\\u0C81\", \"\\u0CBC\", \"\\u0CBF\", \"\\u0CC6\", [\"\\u0CCC\", \"\\u0CCD\"], [\"\\u0CE2\", \"\\u0CE3\"], \"\\u0D01\", [\"\\u0D41\", \"\\u0D44\"], \"\\u0D4D\", [\"\\u0D62\", \"\\u0D63\"], \"\\u0DCA\", [\"\\u0DD2\", \"\\u0DD4\"], \"\\u0DD6\", \"\\u0E31\", [\"\\u0E34\", \"\\u0E3A\"], [\"\\u0E47\", \"\\u0E4E\"], \"\\u0EB1\", [\"\\u0EB4\", \"\\u0EB9\"], [\"\\u0EBB\", \"\\u0EBC\"], [\"\\u0EC8\", \"\\u0ECD\"], [\"\\u0F18\", \"\\u0F19\"], \"\\u0F35\", \"\\u0F37\", \"\\u0F39\", [\"\\u0F71\", \"\\u0F7E\"], [\"\\u0F80\", \"\\u0F84\"], [\"\\u0F86\", \"\\u0F87\"], [\"\\u0F8D\", \"\\u0F97\"], [\"\\u0F99\", \"\\u0FBC\"], \"\\u0FC6\", [\"\\u102D\", \"\\u1030\"], [\"\\u1032\", \"\\u1037\"], [\"\\u1039\", \"\\u103A\"], [\"\\u103D\", \"\\u103E\"], [\"\\u1058\", \"\\u1059\"], [\"\\u105E\", \"\\u1060\"], [\"\\u1071\", \"\\u1074\"], \"\\u1082\", [\"\\u1085\", \"\\u1086\"], \"\\u108D\", \"\\u109D\", [\"\\u135D\", \"\\u135F\"], [\"\\u1712\", \"\\u1714\"], [\"\\u1732\", \"\\u1734\"], [\"\\u1752\", \"\\u1753\"], [\"\\u1772\", \"\\u1773\"], [\"\\u17B4\", \"\\u17B5\"], [\"\\u17B7\", \"\\u17BD\"], \"\\u17C6\", [\"\\u17C9\", \"\\u17D3\"], \"\\u17DD\", [\"\\u180B\", \"\\u180D\"], \"\\u18A9\", [\"\\u1920\", \"\\u1922\"], [\"\\u1927\", \"\\u1928\"], \"\\u1932\", [\"\\u1939\", \"\\u193B\"], [\"\\u1A17\", \"\\u1A18\"], \"\\u1A1B\", \"\\u1A56\", [\"\\u1A58\", \"\\u1A5E\"], \"\\u1A60\", \"\\u1A62\", [\"\\u1A65\", \"\\u1A6C\"], [\"\\u1A73\", \"\\u1A7C\"], \"\\u1A7F\", [\"\\u1AB0\", \"\\u1ABD\"], [\"\\u1B00\", \"\\u1B03\"], \"\\u1B34\", [\"\\u1B36\", \"\\u1B3A\"], \"\\u1B3C\", \"\\u1B42\", [\"\\u1B6B\", \"\\u1B73\"], [\"\\u1B80\", \"\\u1B81\"], [\"\\u1BA2\", \"\\u1BA5\"], [\"\\u1BA8\", \"\\u1BA9\"], [\"\\u1BAB\", \"\\u1BAD\"], \"\\u1BE6\", [\"\\u1BE8\", \"\\u1BE9\"], \"\\u1BED\", [\"\\u1BEF\", \"\\u1BF1\"], [\"\\u1C2C\", \"\\u1C33\"], [\"\\u1C36\", \"\\u1C37\"], [\"\\u1CD0\", \"\\u1CD2\"], [\"\\u1CD4\", \"\\u1CE0\"], [\"\\u1CE2\", \"\\u1CE8\"], \"\\u1CED\", \"\\u1CF4\", [\"\\u1CF8\", \"\\u1CF9\"], [\"\\u1DC0\", \"\\u1DF5\"], [\"\\u1DFC\", \"\\u1DFF\"], [\"\\u20D0\", \"\\u20DC\"], \"\\u20E1\", [\"\\u20E5\", \"\\u20F0\"], [\"\\u2CEF\", \"\\u2CF1\"], \"\\u2D7F\", [\"\\u2DE0\", \"\\u2DFF\"], [\"\\u302A\", \"\\u302D\"], [\"\\u3099\", \"\\u309A\"], \"\\uA66F\", [\"\\uA674\", \"\\uA67D\"], [\"\\uA69E\", \"\\uA69F\"], [\"\\uA6F0\", \"\\uA6F1\"], \"\\uA802\", \"\\uA806\", \"\\uA80B\", [\"\\uA825\", \"\\uA826\"], \"\\uA8C4\", [\"\\uA8E0\", \"\\uA8F1\"], [\"\\uA926\", \"\\uA92D\"], [\"\\uA947\", \"\\uA951\"], [\"\\uA980\", \"\\uA982\"], \"\\uA9B3\", [\"\\uA9B6\", \"\\uA9B9\"], \"\\uA9BC\", \"\\uA9E5\", [\"\\uAA29\", \"\\uAA2E\"], [\"\\uAA31\", \"\\uAA32\"], [\"\\uAA35\", \"\\uAA36\"], \"\\uAA43\", \"\\uAA4C\", \"\\uAA7C\", \"\\uAAB0\", [\"\\uAAB2\", \"\\uAAB4\"], [\"\\uAAB7\", \"\\uAAB8\"], [\"\\uAABE\", \"\\uAABF\"], \"\\uAAC1\", [\"\\uAAEC\", \"\\uAAED\"], \"\\uAAF6\", \"\\uABE5\", \"\\uABE8\", \"\\uABED\", \"\\uFB1E\", [\"\\uFE00\", \"\\uFE0F\"], [\"\\uFE20\", \"\\uFE2F\"]], false, false),\r\n     peg$c151 = /^[0-9\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0BE6-\\u0BEF\\u0C66-\\u0C6F\\u0CE6-\\u0CEF\\u0D66-\\u0D6F\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F29\\u1040-\\u1049\\u1090-\\u1099\\u17E0-\\u17E9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19D9\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\uA620-\\uA629\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19]/,\r\n     peg$c152 = peg$classExpectation([[\"0\", \"9\"], [\"\\u0660\", \"\\u0669\"], [\"\\u06F0\", \"\\u06F9\"], [\"\\u07C0\", \"\\u07C9\"], [\"\\u0966\", \"\\u096F\"], [\"\\u09E6\", \"\\u09EF\"], [\"\\u0A66\", \"\\u0A6F\"], [\"\\u0AE6\", \"\\u0AEF\"], [\"\\u0B66\", \"\\u0B6F\"], [\"\\u0BE6\", \"\\u0BEF\"], [\"\\u0C66\", \"\\u0C6F\"], [\"\\u0CE6\", \"\\u0CEF\"], [\"\\u0D66\", \"\\u0D6F\"], [\"\\u0DE6\", \"\\u0DEF\"], [\"\\u0E50\", \"\\u0E59\"], [\"\\u0ED0\", \"\\u0ED9\"], [\"\\u0F20\", \"\\u0F29\"], [\"\\u1040\", \"\\u1049\"], [\"\\u1090\", \"\\u1099\"], [\"\\u17E0\", \"\\u17E9\"], [\"\\u1810\", \"\\u1819\"], [\"\\u1946\", \"\\u194F\"], [\"\\u19D0\", \"\\u19D9\"], [\"\\u1A80\", \"\\u1A89\"], [\"\\u1A90\", \"\\u1A99\"], [\"\\u1B50\", \"\\u1B59\"], [\"\\u1BB0\", \"\\u1BB9\"], [\"\\u1C40\", \"\\u1C49\"], [\"\\u1C50\", \"\\u1C59\"], [\"\\uA620\", \"\\uA629\"], [\"\\uA8D0\", \"\\uA8D9\"], [\"\\uA900\", \"\\uA909\"], [\"\\uA9D0\", \"\\uA9D9\"], [\"\\uA9F0\", \"\\uA9F9\"], [\"\\uAA50\", \"\\uAA59\"], [\"\\uABF0\", \"\\uABF9\"], [\"\\uFF10\", \"\\uFF19\"]], false, false),\r\n     peg$c153 = /^[\\u16EE-\\u16F0\\u2160-\\u2182\\u2185-\\u2188\\u3007\\u3021-\\u3029\\u3038-\\u303A\\uA6E6-\\uA6EF]/,\r\n     peg$c154 = peg$classExpectation([[\"\\u16EE\", \"\\u16F0\"], [\"\\u2160\", \"\\u2182\"], [\"\\u2185\", \"\\u2188\"], \"\\u3007\", [\"\\u3021\", \"\\u3029\"], [\"\\u3038\", \"\\u303A\"], [\"\\uA6E6\", \"\\uA6EF\"]], false, false),\r\n     peg$c155 = /^[_\\u203F-\\u2040\\u2054\\uFE33-\\uFE34\\uFE4D-\\uFE4F\\uFF3F]/,\r\n     peg$c156 = peg$classExpectation([\"_\", [\"\\u203F\", \"\\u2040\"], \"\\u2054\", [\"\\uFE33\", \"\\uFE34\"], [\"\\uFE4D\", \"\\uFE4F\"], \"\\uFF3F\"], false, false),\r\n     peg$c157 = /^[ \\xA0\\u1680\\u2000-\\u200A\\u202F\\u205F\\u3000]/,\r\n     peg$c158 = peg$classExpectation([\" \", \"\\xA0\", \"\\u1680\", [\"\\u2000\", \"\\u200A\"], \"\\u202F\", \"\\u205F\", \"\\u3000\"], false, false),\r\n\r\n     peg$currPos = 0,\r\n     peg$savedPos = 0,\r\n     peg$posDetailsCache = [{line: 1, column: 1}],\r\n     peg$maxFailPos = 0,\r\n     peg$maxFailExpected = [],\r\n     peg$silentFails = 0,\r\n\r\n     peg$result;\r\n\r\n  if (\"startRule\" in options) {\r\n    if (!(options.startRule in peg$startRuleFunctions)) {\r\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\r\n    }\r\n\r\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\r\n  }\r\n\r\n  function text() {\r\n    return input.substring(peg$savedPos, peg$currPos);\r\n  }\r\n\r\n  function location() {\r\n    return peg$computeLocation(peg$savedPos, peg$currPos);\r\n  }\r\n\r\n  function expected(description, location) {\r\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\r\n\r\n    throw peg$buildStructuredError(\r\n       [peg$otherExpectation(description)],\r\n       input.substring(peg$savedPos, peg$currPos),\r\n       location\r\n    );\r\n  }\r\n\r\n  function error(message, location) {\r\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\r\n\r\n    throw peg$buildSimpleError(message, location);\r\n  }\r\n\r\n  function peg$literalExpectation(text, ignoreCase) {\r\n    return {type: \"literal\", text: text, ignoreCase: ignoreCase};\r\n  }\r\n\r\n  function peg$classExpectation(parts, inverted, ignoreCase) {\r\n    return {type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase};\r\n  }\r\n\r\n  function peg$anyExpectation() {\r\n    return {type: \"any\"};\r\n  }\r\n\r\n  function peg$endExpectation() {\r\n    return {type: \"end\"};\r\n  }\r\n\r\n  function peg$otherExpectation(description) {\r\n    return {type: \"other\", description: description};\r\n  }\r\n\r\n  function peg$computePosDetails(pos) {\r\n    var details = peg$posDetailsCache[pos], p;\r\n\r\n    if (details) {\r\n      return details;\r\n    } else {\r\n      p = pos - 1;\r\n      while (!peg$posDetailsCache[p]) {\r\n        p--;\r\n      }\r\n\r\n      details = peg$posDetailsCache[p];\r\n      details = {\r\n        line: details.line,\r\n        column: details.column\r\n      };\r\n\r\n      while (p < pos) {\r\n        if (input.charCodeAt(p) === 10) {\r\n          details.line++;\r\n          details.column = 1;\r\n        } else {\r\n          details.column++;\r\n        }\r\n\r\n        p++;\r\n      }\r\n\r\n      peg$posDetailsCache[pos] = details;\r\n      return details;\r\n    }\r\n  }\r\n\r\n  function peg$computeLocation(startPos, endPos) {\r\n    var startPosDetails = peg$computePosDetails(startPos),\r\n       endPosDetails = peg$computePosDetails(endPos);\r\n\r\n    return {\r\n      start: {\r\n        offset: startPos,\r\n        line: startPosDetails.line,\r\n        column: startPosDetails.column\r\n      },\r\n      end: {\r\n        offset: endPos,\r\n        line: endPosDetails.line,\r\n        column: endPosDetails.column\r\n      }\r\n    };\r\n  }\r\n\r\n  function peg$fail(expected) {\r\n    if (peg$currPos < peg$maxFailPos) {\r\n      return;\r\n    }\r\n\r\n    if (peg$currPos > peg$maxFailPos) {\r\n      peg$maxFailPos = peg$currPos;\r\n      peg$maxFailExpected = [];\r\n    }\r\n\r\n    peg$maxFailExpected.push(expected);\r\n  }\r\n\r\n  function peg$buildSimpleError(message, location) {\r\n    return new peg$SyntaxError(message, null, null, location);\r\n  }\r\n\r\n  function peg$buildStructuredError(expected, found, location) {\r\n    return new peg$SyntaxError(\r\n       peg$SyntaxError.buildMessage(expected, found),\r\n       expected,\r\n       found,\r\n       location\r\n    );\r\n  }\r\n\r\n  function peg$parseformula() {\r\n    var s0, s1, s2, s3;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parsespaces();\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parseformula_cases();\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = peg$parsespaces();\r\n        if (s3 !== peg$FAILED) {\r\n          peg$savedPos = s0;\r\n          s1 = peg$c0(s2);\r\n          s0 = s1;\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseterm() {\r\n    var s0, s1, s2, s3;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parsespaces();\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parseterm_cases();\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = peg$parsespaces();\r\n        if (s3 !== peg$FAILED) {\r\n          peg$savedPos = s0;\r\n          s1 = peg$c1(s2);\r\n          s0 = s1;\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseformula_cases() {\r\n    var s0, s1, s2, s3, s4, s5, s6, s7;\r\n\r\n    s0 = peg$currPos;\r\n    if (input.charCodeAt(peg$currPos) === 40) {\r\n      s1 = peg$c2;\r\n      peg$currPos++;\r\n    } else {\r\n      s1 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c3);\r\n      }\r\n    }\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parseformula();\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = peg$parsespaces();\r\n        if (s3 !== peg$FAILED) {\r\n          s4 = peg$parseconjunction_symbol();\r\n          if (s4 !== peg$FAILED) {\r\n            s5 = peg$parsespaces();\r\n            if (s5 !== peg$FAILED) {\r\n              s6 = peg$parseformula();\r\n              if (s6 !== peg$FAILED) {\r\n                if (input.charCodeAt(peg$currPos) === 41) {\r\n                  s7 = peg$c4;\r\n                  peg$currPos++;\r\n                } else {\r\n                  s7 = peg$FAILED;\r\n                  if (peg$silentFails === 0) {\r\n                    peg$fail(peg$c5);\r\n                  }\r\n                }\r\n                if (s7 !== peg$FAILED) {\r\n                  peg$savedPos = s0;\r\n                  s1 = peg$c6(s2, s6);\r\n                  s0 = s1;\r\n                } else {\r\n                  peg$currPos = s0;\r\n                  s0 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s0;\r\n                s0 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n    if (s0 === peg$FAILED) {\r\n      s0 = peg$currPos;\r\n      if (input.charCodeAt(peg$currPos) === 40) {\r\n        s1 = peg$c2;\r\n        peg$currPos++;\r\n      } else {\r\n        s1 = peg$FAILED;\r\n        if (peg$silentFails === 0) {\r\n          peg$fail(peg$c3);\r\n        }\r\n      }\r\n      if (s1 !== peg$FAILED) {\r\n        s2 = peg$parseformula();\r\n        if (s2 !== peg$FAILED) {\r\n          s3 = peg$parsespaces();\r\n          if (s3 !== peg$FAILED) {\r\n            s4 = peg$parsedisjunction_symbol();\r\n            if (s4 !== peg$FAILED) {\r\n              s5 = peg$parsespaces();\r\n              if (s5 !== peg$FAILED) {\r\n                s6 = peg$parseformula();\r\n                if (s6 !== peg$FAILED) {\r\n                  if (input.charCodeAt(peg$currPos) === 41) {\r\n                    s7 = peg$c4;\r\n                    peg$currPos++;\r\n                  } else {\r\n                    s7 = peg$FAILED;\r\n                    if (peg$silentFails === 0) {\r\n                      peg$fail(peg$c5);\r\n                    }\r\n                  }\r\n                  if (s7 !== peg$FAILED) {\r\n                    peg$savedPos = s0;\r\n                    s1 = peg$c7(s2, s6);\r\n                    s0 = s1;\r\n                  } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                  }\r\n                } else {\r\n                  peg$currPos = s0;\r\n                  s0 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s0;\r\n                s0 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n      if (s0 === peg$FAILED) {\r\n        s0 = peg$currPos;\r\n        if (input.charCodeAt(peg$currPos) === 40) {\r\n          s1 = peg$c2;\r\n          peg$currPos++;\r\n        } else {\r\n          s1 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c3);\r\n          }\r\n        }\r\n        if (s1 !== peg$FAILED) {\r\n          s2 = peg$parseformula();\r\n          if (s2 !== peg$FAILED) {\r\n            s3 = peg$parsespaces();\r\n            if (s3 !== peg$FAILED) {\r\n              s4 = peg$parseimplication_symbol();\r\n              if (s4 !== peg$FAILED) {\r\n                s5 = peg$parsespaces();\r\n                if (s5 !== peg$FAILED) {\r\n                  s6 = peg$parseformula();\r\n                  if (s6 !== peg$FAILED) {\r\n                    if (input.charCodeAt(peg$currPos) === 41) {\r\n                      s7 = peg$c4;\r\n                      peg$currPos++;\r\n                    } else {\r\n                      s7 = peg$FAILED;\r\n                      if (peg$silentFails === 0) {\r\n                        peg$fail(peg$c5);\r\n                      }\r\n                    }\r\n                    if (s7 !== peg$FAILED) {\r\n                      peg$savedPos = s0;\r\n                      s1 = peg$c8(s2, s6);\r\n                      s0 = s1;\r\n                    } else {\r\n                      peg$currPos = s0;\r\n                      s0 = peg$FAILED;\r\n                    }\r\n                  } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                  }\r\n                } else {\r\n                  peg$currPos = s0;\r\n                  s0 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s0;\r\n                s0 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n        if (s0 === peg$FAILED) {\r\n          s0 = peg$currPos;\r\n          s1 = peg$parseterm();\r\n          if (s1 !== peg$FAILED) {\r\n            s2 = peg$parsespaces();\r\n            if (s2 !== peg$FAILED) {\r\n              s3 = peg$parseequality_symbol();\r\n              if (s3 !== peg$FAILED) {\r\n                s4 = peg$parsespaces();\r\n                if (s4 !== peg$FAILED) {\r\n                  s5 = peg$parseterm();\r\n                  if (s5 !== peg$FAILED) {\r\n                    peg$savedPos = s0;\r\n                    s1 = peg$c9(s1, s5);\r\n                    s0 = s1;\r\n                  } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                  }\r\n                } else {\r\n                  peg$currPos = s0;\r\n                  s0 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s0;\r\n                s0 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n          if (s0 === peg$FAILED) {\r\n            s0 = peg$currPos;\r\n            s1 = peg$parseterm();\r\n            if (s1 !== peg$FAILED) {\r\n              s2 = peg$parsespaces();\r\n              if (s2 !== peg$FAILED) {\r\n                s3 = peg$parsenon_equality_symbol();\r\n                if (s3 !== peg$FAILED) {\r\n                  s4 = peg$parsespaces();\r\n                  if (s4 !== peg$FAILED) {\r\n                    s5 = peg$parseterm();\r\n                    if (s5 !== peg$FAILED) {\r\n                      peg$savedPos = s0;\r\n                      s1 = peg$c10(s1, s5);\r\n                      s0 = s1;\r\n                    } else {\r\n                      peg$currPos = s0;\r\n                      s0 = peg$FAILED;\r\n                    }\r\n                  } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                  }\r\n                } else {\r\n                  peg$currPos = s0;\r\n                  s0 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s0;\r\n                s0 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n            if (s0 === peg$FAILED) {\r\n              s0 = peg$currPos;\r\n              s1 = peg$parseexists_symbol();\r\n              if (s1 !== peg$FAILED) {\r\n                s2 = peg$parsespaces();\r\n                if (s2 !== peg$FAILED) {\r\n                  s3 = peg$parsevariable_symbol();\r\n                  if (s3 !== peg$FAILED) {\r\n                    s4 = peg$parsespaces();\r\n                    if (s4 !== peg$FAILED) {\r\n                      s5 = peg$parseformula();\r\n                      if (s5 !== peg$FAILED) {\r\n                        peg$savedPos = s0;\r\n                        s1 = peg$c11(s3, s5);\r\n                        s0 = s1;\r\n                      } else {\r\n                        peg$currPos = s0;\r\n                        s0 = peg$FAILED;\r\n                      }\r\n                    } else {\r\n                      peg$currPos = s0;\r\n                      s0 = peg$FAILED;\r\n                    }\r\n                  } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                  }\r\n                } else {\r\n                  peg$currPos = s0;\r\n                  s0 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s0;\r\n                s0 = peg$FAILED;\r\n              }\r\n              if (s0 === peg$FAILED) {\r\n                s0 = peg$currPos;\r\n                s1 = peg$parseuni_symbol();\r\n                if (s1 !== peg$FAILED) {\r\n                  s2 = peg$parsespaces();\r\n                  if (s2 !== peg$FAILED) {\r\n                    s3 = peg$parsevariable_symbol();\r\n                    if (s3 !== peg$FAILED) {\r\n                      s4 = peg$parsespaces();\r\n                      if (s4 !== peg$FAILED) {\r\n                        s5 = peg$parseformula();\r\n                        if (s5 !== peg$FAILED) {\r\n                          peg$savedPos = s0;\r\n                          s1 = peg$c12(s3, s5);\r\n                          s0 = s1;\r\n                        } else {\r\n                          peg$currPos = s0;\r\n                          s0 = peg$FAILED;\r\n                        }\r\n                      } else {\r\n                        peg$currPos = s0;\r\n                        s0 = peg$FAILED;\r\n                      }\r\n                    } else {\r\n                      peg$currPos = s0;\r\n                      s0 = peg$FAILED;\r\n                    }\r\n                  } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                  }\r\n                } else {\r\n                  peg$currPos = s0;\r\n                  s0 = peg$FAILED;\r\n                }\r\n                if (s0 === peg$FAILED) {\r\n                  s0 = peg$currPos;\r\n                  s1 = peg$parsenegation_symbol();\r\n                  if (s1 !== peg$FAILED) {\r\n                    s2 = peg$parseformula();\r\n                    if (s2 !== peg$FAILED) {\r\n                      peg$savedPos = s0;\r\n                      s1 = peg$c13(s2);\r\n                      s0 = s1;\r\n                    } else {\r\n                      peg$currPos = s0;\r\n                      s0 = peg$FAILED;\r\n                    }\r\n                  } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                  }\r\n                  if (s0 === peg$FAILED) {\r\n                    s0 = peg$currPos;\r\n                    s1 = peg$parsepredicate_symbol();\r\n                    if (s1 !== peg$FAILED) {\r\n                      peg$savedPos = s0;\r\n                      s1 = peg$c14(s1);\r\n                    }\r\n                    s0 = s1;\r\n                    if (s0 === peg$FAILED) {\r\n                      s0 = peg$currPos;\r\n                      if (input.charCodeAt(peg$currPos) === 40) {\r\n                        s1 = peg$c2;\r\n                        peg$currPos++;\r\n                      } else {\r\n                        s1 = peg$FAILED;\r\n                        if (peg$silentFails === 0) {\r\n                          peg$fail(peg$c3);\r\n                        }\r\n                      }\r\n                      if (s1 !== peg$FAILED) {\r\n                        s2 = peg$parseformula();\r\n                        if (s2 !== peg$FAILED) {\r\n                          if (input.charCodeAt(peg$currPos) === 41) {\r\n                            s3 = peg$c4;\r\n                            peg$currPos++;\r\n                          } else {\r\n                            s3 = peg$FAILED;\r\n                            if (peg$silentFails === 0) {\r\n                              peg$fail(peg$c5);\r\n                            }\r\n                          }\r\n                          if (s3 !== peg$FAILED) {\r\n                            peg$savedPos = s0;\r\n                            s1 = peg$c0(s2);\r\n                            s0 = s1;\r\n                          } else {\r\n                            peg$currPos = s0;\r\n                            s0 = peg$FAILED;\r\n                          }\r\n                        } else {\r\n                          peg$currPos = s0;\r\n                          s0 = peg$FAILED;\r\n                        }\r\n                      } else {\r\n                        peg$currPos = s0;\r\n                        s0 = peg$FAILED;\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseterm_cases() {\r\n    var s0, s1;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parsefunction_symbol();\r\n    if (s1 !== peg$FAILED) {\r\n      peg$savedPos = s0;\r\n      s1 = peg$c15(s1);\r\n    }\r\n    s0 = s1;\r\n    if (s0 === peg$FAILED) {\r\n      s0 = peg$currPos;\r\n      s1 = peg$parseconstant_symbol();\r\n      if (s1 !== peg$FAILED) {\r\n        peg$savedPos = s0;\r\n        s1 = peg$c16(s1);\r\n      }\r\n      s0 = s1;\r\n      if (s0 === peg$FAILED) {\r\n        s0 = peg$currPos;\r\n        s1 = peg$parsevariable_symbol();\r\n        if (s1 !== peg$FAILED) {\r\n          peg$savedPos = s0;\r\n          s1 = peg$c17(s1);\r\n        }\r\n        s0 = s1;\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseconstant_symbol() {\r\n    var s0, s1, s2, s3;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$currPos;\r\n    s2 = peg$parseIdentifier();\r\n    if (s2 !== peg$FAILED) {\r\n      peg$savedPos = peg$currPos;\r\n      s3 = peg$c18(s2);\r\n      if (s3) {\r\n        s3 = void 0;\r\n      } else {\r\n        s3 = peg$FAILED;\r\n      }\r\n      if (s3 !== peg$FAILED) {\r\n        s2 = [s2, s3];\r\n        s1 = s2;\r\n      } else {\r\n        peg$currPos = s1;\r\n        s1 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s1;\r\n      s1 = peg$FAILED;\r\n    }\r\n    if (s1 !== peg$FAILED) {\r\n      s0 = input.substring(s0, peg$currPos);\r\n    } else {\r\n      s0 = s1;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsefunction_symbol() {\r\n    var s0, s1, s2, s3, s4, s5, s6;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parseIdentifier();\r\n    if (s1 !== peg$FAILED) {\r\n      peg$savedPos = peg$currPos;\r\n      s2 = peg$c19(s1);\r\n      if (s2) {\r\n        s2 = void 0;\r\n      } else {\r\n        s2 = peg$FAILED;\r\n      }\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = peg$parsespaces();\r\n        if (s3 !== peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 40) {\r\n            s4 = peg$c2;\r\n            peg$currPos++;\r\n          } else {\r\n            s4 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c3);\r\n            }\r\n          }\r\n          if (s4 !== peg$FAILED) {\r\n            s5 = peg$parseterms();\r\n            if (s5 !== peg$FAILED) {\r\n              if (input.charCodeAt(peg$currPos) === 41) {\r\n                s6 = peg$c4;\r\n                peg$currPos++;\r\n              } else {\r\n                s6 = peg$FAILED;\r\n                if (peg$silentFails === 0) {\r\n                  peg$fail(peg$c5);\r\n                }\r\n              }\r\n              if (s6 !== peg$FAILED) {\r\n                peg$savedPos = s0;\r\n                s1 = peg$c20(s1, s5);\r\n                s0 = s1;\r\n              } else {\r\n                peg$currPos = s0;\r\n                s0 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsepredicate_symbol() {\r\n    var s0, s1, s2, s3, s4, s5, s6;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parseIdentifier();\r\n    if (s1 !== peg$FAILED) {\r\n      peg$savedPos = peg$currPos;\r\n      s2 = peg$c21(s1);\r\n      if (s2) {\r\n        s2 = void 0;\r\n      } else {\r\n        s2 = peg$FAILED;\r\n      }\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = peg$parsespaces();\r\n        if (s3 !== peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 40) {\r\n            s4 = peg$c2;\r\n            peg$currPos++;\r\n          } else {\r\n            s4 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c3);\r\n            }\r\n          }\r\n          if (s4 !== peg$FAILED) {\r\n            s5 = peg$parseterms();\r\n            if (s5 !== peg$FAILED) {\r\n              if (input.charCodeAt(peg$currPos) === 41) {\r\n                s6 = peg$c4;\r\n                peg$currPos++;\r\n              } else {\r\n                s6 = peg$FAILED;\r\n                if (peg$silentFails === 0) {\r\n                  peg$fail(peg$c5);\r\n                }\r\n              }\r\n              if (s6 !== peg$FAILED) {\r\n                peg$savedPos = s0;\r\n                s1 = peg$c22(s1, s5);\r\n                s0 = s1;\r\n              } else {\r\n                peg$currPos = s0;\r\n                s0 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n    if (s0 === peg$FAILED) {\r\n      s0 = peg$currPos;\r\n      s1 = peg$parseIdentifier();\r\n      if (s1 !== peg$FAILED) {\r\n        peg$savedPos = peg$currPos;\r\n        s2 = peg$c21(s1);\r\n        if (s2) {\r\n          s2 = void 0;\r\n        } else {\r\n          s2 = peg$FAILED;\r\n        }\r\n        if (s2 !== peg$FAILED) {\r\n          peg$savedPos = s0;\r\n          s1 = peg$c23(s1);\r\n          s0 = s1;\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsevariable_symbol() {\r\n    var s0, s1, s2, s3;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$currPos;\r\n    s2 = peg$parseIdentifier();\r\n    if (s2 !== peg$FAILED) {\r\n      peg$savedPos = peg$currPos;\r\n      s3 = peg$c24(s2);\r\n      if (s3) {\r\n        s3 = void 0;\r\n      } else {\r\n        s3 = peg$FAILED;\r\n      }\r\n      if (s3 !== peg$FAILED) {\r\n        s2 = [s2, s3];\r\n        s1 = s2;\r\n      } else {\r\n        peg$currPos = s1;\r\n        s1 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s1;\r\n      s1 = peg$FAILED;\r\n    }\r\n    if (s1 !== peg$FAILED) {\r\n      s0 = input.substring(s0, peg$currPos);\r\n    } else {\r\n      s0 = s1;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseterms() {\r\n    var s0, s1, s2, s3, s4, s5, s6, s7;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parseterm();\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = [];\r\n      s3 = peg$currPos;\r\n      s4 = peg$parsespaces();\r\n      if (s4 !== peg$FAILED) {\r\n        if (input.charCodeAt(peg$currPos) === 44) {\r\n          s5 = peg$c25;\r\n          peg$currPos++;\r\n        } else {\r\n          s5 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c26);\r\n          }\r\n        }\r\n        if (s5 !== peg$FAILED) {\r\n          s6 = peg$parsespaces();\r\n          if (s6 !== peg$FAILED) {\r\n            s7 = peg$parseterm();\r\n            if (s7 !== peg$FAILED) {\r\n              peg$savedPos = s3;\r\n              s4 = peg$c27(s1, s7);\r\n              s3 = s4;\r\n            } else {\r\n              peg$currPos = s3;\r\n              s3 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s3;\r\n            s3 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s3;\r\n          s3 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s3;\r\n        s3 = peg$FAILED;\r\n      }\r\n      while (s3 !== peg$FAILED) {\r\n        s2.push(s3);\r\n        s3 = peg$currPos;\r\n        s4 = peg$parsespaces();\r\n        if (s4 !== peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 44) {\r\n            s5 = peg$c25;\r\n            peg$currPos++;\r\n          } else {\r\n            s5 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c26);\r\n            }\r\n          }\r\n          if (s5 !== peg$FAILED) {\r\n            s6 = peg$parsespaces();\r\n            if (s6 !== peg$FAILED) {\r\n              s7 = peg$parseterm();\r\n              if (s7 !== peg$FAILED) {\r\n                peg$savedPos = s3;\r\n                s4 = peg$c27(s1, s7);\r\n                s3 = s4;\r\n              } else {\r\n                peg$currPos = s3;\r\n                s3 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s3;\r\n              s3 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s3;\r\n            s3 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s3;\r\n          s3 = peg$FAILED;\r\n        }\r\n      }\r\n      if (s2 !== peg$FAILED) {\r\n        peg$savedPos = s0;\r\n        s1 = peg$c28(s1, s2);\r\n        s0 = s1;\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsespaces() {\r\n    var s0, s1;\r\n\r\n    peg$silentFails++;\r\n    s0 = [];\r\n    if (peg$c30.test(input.charAt(peg$currPos))) {\r\n      s1 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s1 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c31);\r\n      }\r\n    }\r\n    while (s1 !== peg$FAILED) {\r\n      s0.push(s1);\r\n      if (peg$c30.test(input.charAt(peg$currPos))) {\r\n        s1 = input.charAt(peg$currPos);\r\n        peg$currPos++;\r\n      } else {\r\n        s1 = peg$FAILED;\r\n        if (peg$silentFails === 0) {\r\n          peg$fail(peg$c31);\r\n        }\r\n      }\r\n    }\r\n    peg$silentFails--;\r\n    if (s0 === peg$FAILED) {\r\n      s1 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c29);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parserequired_space() {\r\n    var s0, s1;\r\n\r\n    s0 = [];\r\n    if (peg$c30.test(input.charAt(peg$currPos))) {\r\n      s1 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s1 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c31);\r\n      }\r\n    }\r\n    if (s1 !== peg$FAILED) {\r\n      while (s1 !== peg$FAILED) {\r\n        s0.push(s1);\r\n        if (peg$c30.test(input.charAt(peg$currPos))) {\r\n          s1 = input.charAt(peg$currPos);\r\n          peg$currPos++;\r\n        } else {\r\n          s1 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c31);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseconjunction_symbol() {\r\n    var s0, s1, s2;\r\n\r\n    s0 = peg$currPos;\r\n    if (input.substr(peg$currPos, 6) === peg$c32) {\r\n      s1 = peg$c32;\r\n      peg$currPos += 6;\r\n    } else {\r\n      s1 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c33);\r\n      }\r\n    }\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parserequired_space();\r\n      if (s2 !== peg$FAILED) {\r\n        s1 = [s1, s2];\r\n        s0 = s1;\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n    if (s0 === peg$FAILED) {\r\n      s0 = peg$currPos;\r\n      if (input.substr(peg$currPos, 5) === peg$c34) {\r\n        s1 = peg$c34;\r\n        peg$currPos += 5;\r\n      } else {\r\n        s1 = peg$FAILED;\r\n        if (peg$silentFails === 0) {\r\n          peg$fail(peg$c35);\r\n        }\r\n      }\r\n      if (s1 !== peg$FAILED) {\r\n        s2 = peg$parserequired_space();\r\n        if (s2 !== peg$FAILED) {\r\n          s1 = [s1, s2];\r\n          s0 = s1;\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n      if (s0 === peg$FAILED) {\r\n        if (input.substr(peg$currPos, 2) === peg$c36) {\r\n          s0 = peg$c36;\r\n          peg$currPos += 2;\r\n        } else {\r\n          s0 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c37);\r\n          }\r\n        }\r\n        if (s0 === peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 38) {\r\n            s0 = peg$c38;\r\n            peg$currPos++;\r\n          } else {\r\n            s0 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c39);\r\n            }\r\n          }\r\n          if (s0 === peg$FAILED) {\r\n            if (input.charCodeAt(peg$currPos) === 8743) {\r\n              s0 = peg$c40;\r\n              peg$currPos++;\r\n            } else {\r\n              s0 = peg$FAILED;\r\n              if (peg$silentFails === 0) {\r\n                peg$fail(peg$c41);\r\n              }\r\n            }\r\n            if (s0 === peg$FAILED) {\r\n              if (input.substr(peg$currPos, 2) === peg$c42) {\r\n                s0 = peg$c42;\r\n                peg$currPos += 2;\r\n              } else {\r\n                s0 = peg$FAILED;\r\n                if (peg$silentFails === 0) {\r\n                  peg$fail(peg$c43);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsedisjunction_symbol() {\r\n    var s0, s1, s2;\r\n\r\n    if (input.substr(peg$currPos, 2) === peg$c44) {\r\n      s0 = peg$c44;\r\n      peg$currPos += 2;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c45);\r\n      }\r\n    }\r\n    if (s0 === peg$FAILED) {\r\n      if (input.charCodeAt(peg$currPos) === 124) {\r\n        s0 = peg$c46;\r\n        peg$currPos++;\r\n      } else {\r\n        s0 = peg$FAILED;\r\n        if (peg$silentFails === 0) {\r\n          peg$fail(peg$c47);\r\n        }\r\n      }\r\n      if (s0 === peg$FAILED) {\r\n        s0 = peg$currPos;\r\n        if (input.substr(peg$currPos, 4) === peg$c48) {\r\n          s1 = peg$c48;\r\n          peg$currPos += 4;\r\n        } else {\r\n          s1 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c49);\r\n          }\r\n        }\r\n        if (s1 !== peg$FAILED) {\r\n          s2 = peg$parserequired_space();\r\n          if (s2 !== peg$FAILED) {\r\n            s1 = [s1, s2];\r\n            s0 = s1;\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n        if (s0 === peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 8744) {\r\n            s0 = peg$c50;\r\n            peg$currPos++;\r\n          } else {\r\n            s0 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c51);\r\n            }\r\n          }\r\n          if (s0 === peg$FAILED) {\r\n            if (input.substr(peg$currPos, 2) === peg$c52) {\r\n              s0 = peg$c52;\r\n              peg$currPos += 2;\r\n            } else {\r\n              s0 = peg$FAILED;\r\n              if (peg$silentFails === 0) {\r\n                peg$fail(peg$c53);\r\n              }\r\n            }\r\n            if (s0 === peg$FAILED) {\r\n              s0 = peg$currPos;\r\n              if (input.substr(peg$currPos, 4) === peg$c54) {\r\n                s1 = peg$c54;\r\n                peg$currPos += 4;\r\n              } else {\r\n                s1 = peg$FAILED;\r\n                if (peg$silentFails === 0) {\r\n                  peg$fail(peg$c55);\r\n                }\r\n              }\r\n              if (s1 !== peg$FAILED) {\r\n                s2 = peg$parserequired_space();\r\n                if (s2 !== peg$FAILED) {\r\n                  s1 = [s1, s2];\r\n                  s0 = s1;\r\n                } else {\r\n                  peg$currPos = s0;\r\n                  s0 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s0;\r\n                s0 = peg$FAILED;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseimplication_symbol() {\r\n    var s0, s1, s2;\r\n\r\n    if (input.substr(peg$currPos, 2) === peg$c56) {\r\n      s0 = peg$c56;\r\n      peg$currPos += 2;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c57);\r\n      }\r\n    }\r\n    if (s0 === peg$FAILED) {\r\n      s0 = peg$currPos;\r\n      if (input.substr(peg$currPos, 3) === peg$c58) {\r\n        s1 = peg$c58;\r\n        peg$currPos += 3;\r\n      } else {\r\n        s1 = peg$FAILED;\r\n        if (peg$silentFails === 0) {\r\n          peg$fail(peg$c59);\r\n        }\r\n      }\r\n      if (s1 !== peg$FAILED) {\r\n        s2 = peg$parserequired_space();\r\n        if (s2 !== peg$FAILED) {\r\n          s1 = [s1, s2];\r\n          s0 = s1;\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n      if (s0 === peg$FAILED) {\r\n        if (input.charCodeAt(peg$currPos) === 8594) {\r\n          s0 = peg$c60;\r\n          peg$currPos++;\r\n        } else {\r\n          s0 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c61);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseexists_symbol() {\r\n    var s0, s1, s2;\r\n\r\n    if (input.charCodeAt(peg$currPos) === 8707) {\r\n      s0 = peg$c62;\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c63);\r\n      }\r\n    }\r\n    if (s0 === peg$FAILED) {\r\n      s0 = peg$currPos;\r\n      if (input.substr(peg$currPos, 7) === peg$c64) {\r\n        s1 = peg$c64;\r\n        peg$currPos += 7;\r\n      } else {\r\n        s1 = peg$FAILED;\r\n        if (peg$silentFails === 0) {\r\n          peg$fail(peg$c65);\r\n        }\r\n      }\r\n      if (s1 !== peg$FAILED) {\r\n        s2 = peg$parserequired_space();\r\n        if (s2 !== peg$FAILED) {\r\n          s1 = [s1, s2];\r\n          s0 = s1;\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n      if (s0 === peg$FAILED) {\r\n        s0 = peg$currPos;\r\n        if (input.substr(peg$currPos, 2) === peg$c66) {\r\n          s1 = peg$c66;\r\n          peg$currPos += 2;\r\n        } else {\r\n          s1 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c67);\r\n          }\r\n        }\r\n        if (s1 !== peg$FAILED) {\r\n          s2 = peg$parserequired_space();\r\n          if (s2 !== peg$FAILED) {\r\n            s1 = [s1, s2];\r\n            s0 = s1;\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n        if (s0 === peg$FAILED) {\r\n          s0 = peg$currPos;\r\n          if (input.substr(peg$currPos, 2) === peg$c68) {\r\n            s1 = peg$c68;\r\n            peg$currPos += 2;\r\n          } else {\r\n            s1 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c69);\r\n            }\r\n          }\r\n          if (s1 !== peg$FAILED) {\r\n            s2 = peg$parserequired_space();\r\n            if (s2 !== peg$FAILED) {\r\n              s1 = [s1, s2];\r\n              s0 = s1;\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseuni_symbol() {\r\n    var s0, s1, s2;\r\n\r\n    if (input.charCodeAt(peg$currPos) === 8704) {\r\n      s0 = peg$c70;\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c71);\r\n      }\r\n    }\r\n    if (s0 === peg$FAILED) {\r\n      s0 = peg$currPos;\r\n      if (input.substr(peg$currPos, 7) === peg$c72) {\r\n        s1 = peg$c72;\r\n        peg$currPos += 7;\r\n      } else {\r\n        s1 = peg$FAILED;\r\n        if (peg$silentFails === 0) {\r\n          peg$fail(peg$c73);\r\n        }\r\n      }\r\n      if (s1 !== peg$FAILED) {\r\n        s2 = peg$parserequired_space();\r\n        if (s2 !== peg$FAILED) {\r\n          s1 = [s1, s2];\r\n          s0 = s1;\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n      if (s0 === peg$FAILED) {\r\n        s0 = peg$currPos;\r\n        if (input.substr(peg$currPos, 2) === peg$c74) {\r\n          s1 = peg$c74;\r\n          peg$currPos += 2;\r\n        } else {\r\n          s1 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c75);\r\n          }\r\n        }\r\n        if (s1 !== peg$FAILED) {\r\n          s2 = peg$parserequired_space();\r\n          if (s2 !== peg$FAILED) {\r\n            s1 = [s1, s2];\r\n            s0 = s1;\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n        if (s0 === peg$FAILED) {\r\n          s0 = peg$currPos;\r\n          if (input.substr(peg$currPos, 2) === peg$c76) {\r\n            s1 = peg$c76;\r\n            peg$currPos += 2;\r\n          } else {\r\n            s1 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c77);\r\n            }\r\n          }\r\n          if (s1 !== peg$FAILED) {\r\n            s2 = peg$parserequired_space();\r\n            if (s2 !== peg$FAILED) {\r\n              s1 = [s1, s2];\r\n              s0 = s1;\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsenegation_symbol() {\r\n    var s0, s1, s2;\r\n\r\n    if (input.charCodeAt(peg$currPos) === 45) {\r\n      s0 = peg$c78;\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c79);\r\n      }\r\n    }\r\n    if (s0 === peg$FAILED) {\r\n      if (input.charCodeAt(peg$currPos) === 33) {\r\n        s0 = peg$c80;\r\n        peg$currPos++;\r\n      } else {\r\n        s0 = peg$FAILED;\r\n        if (peg$silentFails === 0) {\r\n          peg$fail(peg$c81);\r\n        }\r\n      }\r\n      if (s0 === peg$FAILED) {\r\n        if (input.charCodeAt(peg$currPos) === 126) {\r\n          s0 = peg$c82;\r\n          peg$currPos++;\r\n        } else {\r\n          s0 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c83);\r\n          }\r\n        }\r\n        if (s0 === peg$FAILED) {\r\n          s0 = peg$currPos;\r\n          if (input.substr(peg$currPos, 4) === peg$c84) {\r\n            s1 = peg$c84;\r\n            peg$currPos += 4;\r\n          } else {\r\n            s1 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c85);\r\n            }\r\n          }\r\n          if (s1 !== peg$FAILED) {\r\n            s2 = peg$parserequired_space();\r\n            if (s2 !== peg$FAILED) {\r\n              s1 = [s1, s2];\r\n              s0 = s1;\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n          if (s0 === peg$FAILED) {\r\n            if (input.charCodeAt(peg$currPos) === 172) {\r\n              s0 = peg$c86;\r\n              peg$currPos++;\r\n            } else {\r\n              s0 = peg$FAILED;\r\n              if (peg$silentFails === 0) {\r\n                peg$fail(peg$c87);\r\n              }\r\n            }\r\n            if (s0 === peg$FAILED) {\r\n              s0 = peg$currPos;\r\n              if (input.substr(peg$currPos, 5) === peg$c88) {\r\n                s1 = peg$c88;\r\n                peg$currPos += 5;\r\n              } else {\r\n                s1 = peg$FAILED;\r\n                if (peg$silentFails === 0) {\r\n                  peg$fail(peg$c89);\r\n                }\r\n              }\r\n              if (s1 !== peg$FAILED) {\r\n                s2 = peg$parserequired_space();\r\n                if (s2 !== peg$FAILED) {\r\n                  s1 = [s1, s2];\r\n                  s0 = s1;\r\n                } else {\r\n                  peg$currPos = s0;\r\n                  s0 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s0;\r\n                s0 = peg$FAILED;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseequality_symbol() {\r\n    var s0;\r\n\r\n    if (input.charCodeAt(peg$currPos) === 61) {\r\n      s0 = peg$c90;\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c91);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsenon_equality_symbol() {\r\n    var s0;\r\n\r\n    if (input.substr(peg$currPos, 2) === peg$c92) {\r\n      s0 = peg$c92;\r\n      peg$currPos += 2;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c93);\r\n      }\r\n    }\r\n    if (s0 === peg$FAILED) {\r\n      if (input.substr(peg$currPos, 2) === peg$c94) {\r\n        s0 = peg$c94;\r\n        peg$currPos += 2;\r\n      } else {\r\n        s0 = peg$FAILED;\r\n        if (peg$silentFails === 0) {\r\n          peg$fail(peg$c95);\r\n        }\r\n      }\r\n      if (s0 === peg$FAILED) {\r\n        if (input.substr(peg$currPos, 2) === peg$c96) {\r\n          s0 = peg$c96;\r\n          peg$currPos += 2;\r\n        } else {\r\n          s0 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c97);\r\n          }\r\n        }\r\n        if (s0 === peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 8800) {\r\n            s0 = peg$c98;\r\n            peg$currPos++;\r\n          } else {\r\n            s0 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c99);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseconstants() {\r\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parsespaces();\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parseIdentifier();\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = [];\r\n        s4 = peg$currPos;\r\n        s5 = peg$parsespaces();\r\n        if (s5 !== peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 44) {\r\n            s6 = peg$c25;\r\n            peg$currPos++;\r\n          } else {\r\n            s6 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c26);\r\n            }\r\n          }\r\n          if (s6 !== peg$FAILED) {\r\n            s7 = peg$parsespaces();\r\n            if (s7 !== peg$FAILED) {\r\n              s8 = peg$parseIdentifier();\r\n              if (s8 !== peg$FAILED) {\r\n                peg$savedPos = s4;\r\n                s5 = peg$c100(s2, s8);\r\n                s4 = s5;\r\n              } else {\r\n                peg$currPos = s4;\r\n                s4 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s4;\r\n              s4 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s4;\r\n            s4 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s4;\r\n          s4 = peg$FAILED;\r\n        }\r\n        while (s4 !== peg$FAILED) {\r\n          s3.push(s4);\r\n          s4 = peg$currPos;\r\n          s5 = peg$parsespaces();\r\n          if (s5 !== peg$FAILED) {\r\n            if (input.charCodeAt(peg$currPos) === 44) {\r\n              s6 = peg$c25;\r\n              peg$currPos++;\r\n            } else {\r\n              s6 = peg$FAILED;\r\n              if (peg$silentFails === 0) {\r\n                peg$fail(peg$c26);\r\n              }\r\n            }\r\n            if (s6 !== peg$FAILED) {\r\n              s7 = peg$parsespaces();\r\n              if (s7 !== peg$FAILED) {\r\n                s8 = peg$parseIdentifier();\r\n                if (s8 !== peg$FAILED) {\r\n                  peg$savedPos = s4;\r\n                  s5 = peg$c100(s2, s8);\r\n                  s4 = s5;\r\n                } else {\r\n                  peg$currPos = s4;\r\n                  s4 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s4;\r\n                s4 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s4;\r\n              s4 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s4;\r\n            s4 = peg$FAILED;\r\n          }\r\n        }\r\n        if (s3 !== peg$FAILED) {\r\n          s4 = peg$parsespaces();\r\n          if (s4 !== peg$FAILED) {\r\n            peg$savedPos = s0;\r\n            s1 = peg$c101(s2, s3);\r\n            s0 = s1;\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsepredicates() {\r\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parsespaces();\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parselanguage_predicate();\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = [];\r\n        s4 = peg$currPos;\r\n        s5 = peg$parsespaces();\r\n        if (s5 !== peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 44) {\r\n            s6 = peg$c25;\r\n            peg$currPos++;\r\n          } else {\r\n            s6 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c26);\r\n            }\r\n          }\r\n          if (s6 !== peg$FAILED) {\r\n            s7 = peg$parsespaces();\r\n            if (s7 !== peg$FAILED) {\r\n              s8 = peg$parselanguage_predicate();\r\n              if (s8 !== peg$FAILED) {\r\n                peg$savedPos = s4;\r\n                s5 = peg$c102(s2, s8);\r\n                s4 = s5;\r\n              } else {\r\n                peg$currPos = s4;\r\n                s4 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s4;\r\n              s4 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s4;\r\n            s4 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s4;\r\n          s4 = peg$FAILED;\r\n        }\r\n        while (s4 !== peg$FAILED) {\r\n          s3.push(s4);\r\n          s4 = peg$currPos;\r\n          s5 = peg$parsespaces();\r\n          if (s5 !== peg$FAILED) {\r\n            if (input.charCodeAt(peg$currPos) === 44) {\r\n              s6 = peg$c25;\r\n              peg$currPos++;\r\n            } else {\r\n              s6 = peg$FAILED;\r\n              if (peg$silentFails === 0) {\r\n                peg$fail(peg$c26);\r\n              }\r\n            }\r\n            if (s6 !== peg$FAILED) {\r\n              s7 = peg$parsespaces();\r\n              if (s7 !== peg$FAILED) {\r\n                s8 = peg$parselanguage_predicate();\r\n                if (s8 !== peg$FAILED) {\r\n                  peg$savedPos = s4;\r\n                  s5 = peg$c102(s2, s8);\r\n                  s4 = s5;\r\n                } else {\r\n                  peg$currPos = s4;\r\n                  s4 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s4;\r\n                s4 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s4;\r\n              s4 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s4;\r\n            s4 = peg$FAILED;\r\n          }\r\n        }\r\n        if (s3 !== peg$FAILED) {\r\n          s4 = peg$parsespaces();\r\n          if (s4 !== peg$FAILED) {\r\n            peg$savedPos = s0;\r\n            s1 = peg$c103(s2, s3);\r\n            s0 = s1;\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsefunctions() {\r\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parsespaces();\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parselanguage_function();\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = [];\r\n        s4 = peg$currPos;\r\n        s5 = peg$parsespaces();\r\n        if (s5 !== peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 44) {\r\n            s6 = peg$c25;\r\n            peg$currPos++;\r\n          } else {\r\n            s6 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c26);\r\n            }\r\n          }\r\n          if (s6 !== peg$FAILED) {\r\n            s7 = peg$parsespaces();\r\n            if (s7 !== peg$FAILED) {\r\n              s8 = peg$parselanguage_function();\r\n              if (s8 !== peg$FAILED) {\r\n                peg$savedPos = s4;\r\n                s5 = peg$c104(s2, s8);\r\n                s4 = s5;\r\n              } else {\r\n                peg$currPos = s4;\r\n                s4 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s4;\r\n              s4 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s4;\r\n            s4 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s4;\r\n          s4 = peg$FAILED;\r\n        }\r\n        while (s4 !== peg$FAILED) {\r\n          s3.push(s4);\r\n          s4 = peg$currPos;\r\n          s5 = peg$parsespaces();\r\n          if (s5 !== peg$FAILED) {\r\n            if (input.charCodeAt(peg$currPos) === 44) {\r\n              s6 = peg$c25;\r\n              peg$currPos++;\r\n            } else {\r\n              s6 = peg$FAILED;\r\n              if (peg$silentFails === 0) {\r\n                peg$fail(peg$c26);\r\n              }\r\n            }\r\n            if (s6 !== peg$FAILED) {\r\n              s7 = peg$parsespaces();\r\n              if (s7 !== peg$FAILED) {\r\n                s8 = peg$parselanguage_function();\r\n                if (s8 !== peg$FAILED) {\r\n                  peg$savedPos = s4;\r\n                  s5 = peg$c104(s2, s8);\r\n                  s4 = s5;\r\n                } else {\r\n                  peg$currPos = s4;\r\n                  s4 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s4;\r\n                s4 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s4;\r\n              s4 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s4;\r\n            s4 = peg$FAILED;\r\n          }\r\n        }\r\n        if (s3 !== peg$FAILED) {\r\n          s4 = peg$parsespaces();\r\n          if (s4 !== peg$FAILED) {\r\n            peg$savedPos = s0;\r\n            s1 = peg$c105(s2, s3);\r\n            s0 = s1;\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsepredicate_arity() {\r\n    var s0, s1, s2;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = [];\r\n    if (peg$c106.test(input.charAt(peg$currPos))) {\r\n      s2 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s2 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c107);\r\n      }\r\n    }\r\n    if (s2 !== peg$FAILED) {\r\n      while (s2 !== peg$FAILED) {\r\n        s1.push(s2);\r\n        if (peg$c106.test(input.charAt(peg$currPos))) {\r\n          s2 = input.charAt(peg$currPos);\r\n          peg$currPos++;\r\n        } else {\r\n          s2 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c107);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      s1 = peg$FAILED;\r\n    }\r\n    if (s1 !== peg$FAILED) {\r\n      s0 = input.substring(s0, peg$currPos);\r\n    } else {\r\n      s0 = s1;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsefunction_arity() {\r\n    var s0, s1, s2;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = [];\r\n    if (peg$c108.test(input.charAt(peg$currPos))) {\r\n      s2 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s2 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c109);\r\n      }\r\n    }\r\n    if (s2 !== peg$FAILED) {\r\n      while (s2 !== peg$FAILED) {\r\n        s1.push(s2);\r\n        if (peg$c108.test(input.charAt(peg$currPos))) {\r\n          s2 = input.charAt(peg$currPos);\r\n          peg$currPos++;\r\n        } else {\r\n          s2 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c109);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      s1 = peg$FAILED;\r\n    }\r\n    if (s1 !== peg$FAILED) {\r\n      s0 = input.substring(s0, peg$currPos);\r\n    } else {\r\n      s0 = s1;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parselanguage_predicate() {\r\n    var s0, s1, s2, s3, s4, s5;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parsespaces();\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parseIdentifier();\r\n      if (s2 !== peg$FAILED) {\r\n        if (input.charCodeAt(peg$currPos) === 47) {\r\n          s3 = peg$c110;\r\n          peg$currPos++;\r\n        } else {\r\n          s3 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c111);\r\n          }\r\n        }\r\n        if (s3 !== peg$FAILED) {\r\n          s4 = peg$parsepredicate_arity();\r\n          if (s4 !== peg$FAILED) {\r\n            s5 = peg$parsespaces();\r\n            if (s5 !== peg$FAILED) {\r\n              peg$savedPos = s0;\r\n              s1 = peg$c112(s2, s4);\r\n              s0 = s1;\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parselanguage_function() {\r\n    var s0, s1, s2, s3, s4, s5;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parsespaces();\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parseIdentifier();\r\n      if (s2 !== peg$FAILED) {\r\n        if (input.charCodeAt(peg$currPos) === 47) {\r\n          s3 = peg$c110;\r\n          peg$currPos++;\r\n        } else {\r\n          s3 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c111);\r\n          }\r\n        }\r\n        if (s3 !== peg$FAILED) {\r\n          s4 = peg$parsefunction_arity();\r\n          if (s4 !== peg$FAILED) {\r\n            s5 = peg$parsespaces();\r\n            if (s5 !== peg$FAILED) {\r\n              peg$savedPos = s0;\r\n              s1 = peg$c113(s2, s4);\r\n              s0 = s1;\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsedomain() {\r\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parsespaces();\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parseDomainIdentifier();\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = [];\r\n        s4 = peg$currPos;\r\n        s5 = peg$parsespaces();\r\n        if (s5 !== peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 44) {\r\n            s6 = peg$c25;\r\n            peg$currPos++;\r\n          } else {\r\n            s6 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c26);\r\n            }\r\n          }\r\n          if (s6 !== peg$FAILED) {\r\n            s7 = peg$parsespaces();\r\n            if (s7 !== peg$FAILED) {\r\n              s8 = peg$parseDomainIdentifier();\r\n              if (s8 !== peg$FAILED) {\r\n                peg$savedPos = s4;\r\n                s5 = peg$c114(s2, s8);\r\n                s4 = s5;\r\n              } else {\r\n                peg$currPos = s4;\r\n                s4 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s4;\r\n              s4 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s4;\r\n            s4 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s4;\r\n          s4 = peg$FAILED;\r\n        }\r\n        while (s4 !== peg$FAILED) {\r\n          s3.push(s4);\r\n          s4 = peg$currPos;\r\n          s5 = peg$parsespaces();\r\n          if (s5 !== peg$FAILED) {\r\n            if (input.charCodeAt(peg$currPos) === 44) {\r\n              s6 = peg$c25;\r\n              peg$currPos++;\r\n            } else {\r\n              s6 = peg$FAILED;\r\n              if (peg$silentFails === 0) {\r\n                peg$fail(peg$c26);\r\n              }\r\n            }\r\n            if (s6 !== peg$FAILED) {\r\n              s7 = peg$parsespaces();\r\n              if (s7 !== peg$FAILED) {\r\n                s8 = peg$parseDomainIdentifier();\r\n                if (s8 !== peg$FAILED) {\r\n                  peg$savedPos = s4;\r\n                  s5 = peg$c114(s2, s8);\r\n                  s4 = s5;\r\n                } else {\r\n                  peg$currPos = s4;\r\n                  s4 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s4;\r\n                s4 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s4;\r\n              s4 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s4;\r\n            s4 = peg$FAILED;\r\n          }\r\n        }\r\n        if (s3 !== peg$FAILED) {\r\n          s4 = peg$parsespaces();\r\n          if (s4 !== peg$FAILED) {\r\n            peg$savedPos = s0;\r\n            s1 = peg$c115(s2, s3);\r\n            s0 = s1;\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsetuples() {\r\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parsespaces();\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parsetuple();\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = [];\r\n        s4 = peg$currPos;\r\n        s5 = peg$parsespaces();\r\n        if (s5 !== peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 44) {\r\n            s6 = peg$c25;\r\n            peg$currPos++;\r\n          } else {\r\n            s6 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c26);\r\n            }\r\n          }\r\n          if (s6 !== peg$FAILED) {\r\n            s7 = peg$parsespaces();\r\n            if (s7 !== peg$FAILED) {\r\n              s8 = peg$parsetuple();\r\n              if (s8 !== peg$FAILED) {\r\n                peg$savedPos = s4;\r\n                s5 = peg$c116(s2, s8);\r\n                s4 = s5;\r\n              } else {\r\n                peg$currPos = s4;\r\n                s4 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s4;\r\n              s4 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s4;\r\n            s4 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s4;\r\n          s4 = peg$FAILED;\r\n        }\r\n        while (s4 !== peg$FAILED) {\r\n          s3.push(s4);\r\n          s4 = peg$currPos;\r\n          s5 = peg$parsespaces();\r\n          if (s5 !== peg$FAILED) {\r\n            if (input.charCodeAt(peg$currPos) === 44) {\r\n              s6 = peg$c25;\r\n              peg$currPos++;\r\n            } else {\r\n              s6 = peg$FAILED;\r\n              if (peg$silentFails === 0) {\r\n                peg$fail(peg$c26);\r\n              }\r\n            }\r\n            if (s6 !== peg$FAILED) {\r\n              s7 = peg$parsespaces();\r\n              if (s7 !== peg$FAILED) {\r\n                s8 = peg$parsetuple();\r\n                if (s8 !== peg$FAILED) {\r\n                  peg$savedPos = s4;\r\n                  s5 = peg$c116(s2, s8);\r\n                  s4 = s5;\r\n                } else {\r\n                  peg$currPos = s4;\r\n                  s4 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s4;\r\n                s4 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s4;\r\n              s4 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s4;\r\n            s4 = peg$FAILED;\r\n          }\r\n        }\r\n        if (s3 !== peg$FAILED) {\r\n          s4 = peg$parsespaces();\r\n          if (s4 !== peg$FAILED) {\r\n            peg$savedPos = s0;\r\n            s1 = peg$c117(s2, s3);\r\n            s0 = s1;\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsee_tuples() {\r\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parsespaces();\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parsee_tuple();\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = [];\r\n        s4 = peg$currPos;\r\n        s5 = peg$parsespaces();\r\n        if (s5 !== peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 44) {\r\n            s6 = peg$c25;\r\n            peg$currPos++;\r\n          } else {\r\n            s6 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c26);\r\n            }\r\n          }\r\n          if (s6 !== peg$FAILED) {\r\n            s7 = peg$parsespaces();\r\n            if (s7 !== peg$FAILED) {\r\n              s8 = peg$parsee_tuple();\r\n              if (s8 !== peg$FAILED) {\r\n                peg$savedPos = s4;\r\n                s5 = peg$c116(s2, s8);\r\n                s4 = s5;\r\n              } else {\r\n                peg$currPos = s4;\r\n                s4 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s4;\r\n              s4 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s4;\r\n            s4 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s4;\r\n          s4 = peg$FAILED;\r\n        }\r\n        while (s4 !== peg$FAILED) {\r\n          s3.push(s4);\r\n          s4 = peg$currPos;\r\n          s5 = peg$parsespaces();\r\n          if (s5 !== peg$FAILED) {\r\n            if (input.charCodeAt(peg$currPos) === 44) {\r\n              s6 = peg$c25;\r\n              peg$currPos++;\r\n            } else {\r\n              s6 = peg$FAILED;\r\n              if (peg$silentFails === 0) {\r\n                peg$fail(peg$c26);\r\n              }\r\n            }\r\n            if (s6 !== peg$FAILED) {\r\n              s7 = peg$parsespaces();\r\n              if (s7 !== peg$FAILED) {\r\n                s8 = peg$parsee_tuple();\r\n                if (s8 !== peg$FAILED) {\r\n                  peg$savedPos = s4;\r\n                  s5 = peg$c116(s2, s8);\r\n                  s4 = s5;\r\n                } else {\r\n                  peg$currPos = s4;\r\n                  s4 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s4;\r\n                s4 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s4;\r\n              s4 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s4;\r\n            s4 = peg$FAILED;\r\n          }\r\n        }\r\n        if (s3 !== peg$FAILED) {\r\n          s4 = peg$parsespaces();\r\n          if (s4 !== peg$FAILED) {\r\n            peg$savedPos = s0;\r\n            s1 = peg$c117(s2, s3);\r\n            s0 = s1;\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsetuple() {\r\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\r\n\r\n    s0 = peg$currPos;\r\n    if (input.charCodeAt(peg$currPos) === 40) {\r\n      s1 = peg$c2;\r\n      peg$currPos++;\r\n    } else {\r\n      s1 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c3);\r\n      }\r\n    }\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parsespaces();\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = peg$parseDomainIdentifier();\r\n        if (s3 !== peg$FAILED) {\r\n          s4 = [];\r\n          s5 = peg$currPos;\r\n          s6 = peg$parsespaces();\r\n          if (s6 !== peg$FAILED) {\r\n            if (input.charCodeAt(peg$currPos) === 44) {\r\n              s7 = peg$c25;\r\n              peg$currPos++;\r\n            } else {\r\n              s7 = peg$FAILED;\r\n              if (peg$silentFails === 0) {\r\n                peg$fail(peg$c26);\r\n              }\r\n            }\r\n            if (s7 !== peg$FAILED) {\r\n              s8 = peg$parsespaces();\r\n              if (s8 !== peg$FAILED) {\r\n                s9 = peg$parseDomainIdentifier();\r\n                if (s9 !== peg$FAILED) {\r\n                  peg$savedPos = s5;\r\n                  s6 = peg$c114(s3, s9);\r\n                  s5 = s6;\r\n                } else {\r\n                  peg$currPos = s5;\r\n                  s5 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s5;\r\n                s5 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s5;\r\n              s5 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s5;\r\n            s5 = peg$FAILED;\r\n          }\r\n          if (s5 !== peg$FAILED) {\r\n            while (s5 !== peg$FAILED) {\r\n              s4.push(s5);\r\n              s5 = peg$currPos;\r\n              s6 = peg$parsespaces();\r\n              if (s6 !== peg$FAILED) {\r\n                if (input.charCodeAt(peg$currPos) === 44) {\r\n                  s7 = peg$c25;\r\n                  peg$currPos++;\r\n                } else {\r\n                  s7 = peg$FAILED;\r\n                  if (peg$silentFails === 0) {\r\n                    peg$fail(peg$c26);\r\n                  }\r\n                }\r\n                if (s7 !== peg$FAILED) {\r\n                  s8 = peg$parsespaces();\r\n                  if (s8 !== peg$FAILED) {\r\n                    s9 = peg$parseDomainIdentifier();\r\n                    if (s9 !== peg$FAILED) {\r\n                      peg$savedPos = s5;\r\n                      s6 = peg$c114(s3, s9);\r\n                      s5 = s6;\r\n                    } else {\r\n                      peg$currPos = s5;\r\n                      s5 = peg$FAILED;\r\n                    }\r\n                  } else {\r\n                    peg$currPos = s5;\r\n                    s5 = peg$FAILED;\r\n                  }\r\n                } else {\r\n                  peg$currPos = s5;\r\n                  s5 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s5;\r\n                s5 = peg$FAILED;\r\n              }\r\n            }\r\n          } else {\r\n            s4 = peg$FAILED;\r\n          }\r\n          if (s4 !== peg$FAILED) {\r\n            s5 = peg$parsespaces();\r\n            if (s5 !== peg$FAILED) {\r\n              if (input.charCodeAt(peg$currPos) === 41) {\r\n                s6 = peg$c4;\r\n                peg$currPos++;\r\n              } else {\r\n                s6 = peg$FAILED;\r\n                if (peg$silentFails === 0) {\r\n                  peg$fail(peg$c5);\r\n                }\r\n              }\r\n              if (s6 !== peg$FAILED) {\r\n                peg$savedPos = s0;\r\n                s1 = peg$c115(s3, s4);\r\n                s0 = s1;\r\n              } else {\r\n                peg$currPos = s0;\r\n                s0 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n    if (s0 === peg$FAILED) {\r\n      s0 = peg$currPos;\r\n      s1 = peg$parsespaces();\r\n      if (s1 !== peg$FAILED) {\r\n        s2 = peg$parseDomainIdentifier();\r\n        if (s2 !== peg$FAILED) {\r\n          s3 = peg$parsespaces();\r\n          if (s3 !== peg$FAILED) {\r\n            peg$savedPos = s0;\r\n            s1 = peg$c118(s2);\r\n            s0 = s1;\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsee_tuple() {\r\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\r\n\r\n    s0 = peg$currPos;\r\n    if (input.charCodeAt(peg$currPos) === 40) {\r\n      s1 = peg$c2;\r\n      peg$currPos++;\r\n    } else {\r\n      s1 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c3);\r\n      }\r\n    }\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = peg$parsespaces();\r\n      if (s2 !== peg$FAILED) {\r\n        s3 = peg$parseIdentifier();\r\n        if (s3 !== peg$FAILED) {\r\n          s4 = peg$parsespaces();\r\n          if (s4 !== peg$FAILED) {\r\n            if (input.charCodeAt(peg$currPos) === 44) {\r\n              s5 = peg$c25;\r\n              peg$currPos++;\r\n            } else {\r\n              s5 = peg$FAILED;\r\n              if (peg$silentFails === 0) {\r\n                peg$fail(peg$c26);\r\n              }\r\n            }\r\n            if (s5 !== peg$FAILED) {\r\n              s6 = peg$parsespaces();\r\n              if (s6 !== peg$FAILED) {\r\n                s7 = peg$parseDomainIdentifier();\r\n                if (s7 !== peg$FAILED) {\r\n                  s8 = peg$parsespaces();\r\n                  if (s8 !== peg$FAILED) {\r\n                    if (input.charCodeAt(peg$currPos) === 41) {\r\n                      s9 = peg$c4;\r\n                      peg$currPos++;\r\n                    } else {\r\n                      s9 = peg$FAILED;\r\n                      if (peg$silentFails === 0) {\r\n                        peg$fail(peg$c5);\r\n                      }\r\n                    }\r\n                    if (s9 !== peg$FAILED) {\r\n                      peg$savedPos = s0;\r\n                      s1 = peg$c119(s3, s7);\r\n                      s0 = s1;\r\n                    } else {\r\n                      peg$currPos = s0;\r\n                      s0 = peg$FAILED;\r\n                    }\r\n                  } else {\r\n                    peg$currPos = s0;\r\n                    s0 = peg$FAILED;\r\n                  }\r\n                } else {\r\n                  peg$currPos = s0;\r\n                  s0 = peg$FAILED;\r\n                }\r\n              } else {\r\n                peg$currPos = s0;\r\n                s0 = peg$FAILED;\r\n              }\r\n            } else {\r\n              peg$currPos = s0;\r\n              s0 = peg$FAILED;\r\n            }\r\n          } else {\r\n            peg$currPos = s0;\r\n            s0 = peg$FAILED;\r\n          }\r\n        } else {\r\n          peg$currPos = s0;\r\n          s0 = peg$FAILED;\r\n        }\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseDomainIdentifier() {\r\n    var s0, s1, s2;\r\n\r\n    peg$silentFails++;\r\n    s0 = peg$currPos;\r\n    s1 = [];\r\n    if (peg$c121.test(input.charAt(peg$currPos))) {\r\n      s2 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s2 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c122);\r\n      }\r\n    }\r\n    if (s2 !== peg$FAILED) {\r\n      while (s2 !== peg$FAILED) {\r\n        s1.push(s2);\r\n        if (peg$c121.test(input.charAt(peg$currPos))) {\r\n          s2 = input.charAt(peg$currPos);\r\n          peg$currPos++;\r\n        } else {\r\n          s2 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c122);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      s1 = peg$FAILED;\r\n    }\r\n    if (s1 !== peg$FAILED) {\r\n      s0 = input.substring(s0, peg$currPos);\r\n    } else {\r\n      s0 = s1;\r\n    }\r\n    peg$silentFails--;\r\n    if (s0 === peg$FAILED) {\r\n      s1 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c120);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseIdentifier() {\r\n    var s0, s1;\r\n\r\n    s0 = peg$currPos;\r\n    s1 = peg$parseIdentifierName();\r\n    if (s1 !== peg$FAILED) {\r\n      peg$savedPos = s0;\r\n      s1 = peg$c123(s1);\r\n    }\r\n    s0 = s1;\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseIdentifierName() {\r\n    var s0, s1, s2, s3;\r\n\r\n    peg$silentFails++;\r\n    s0 = peg$currPos;\r\n    s1 = peg$parseIdentifierStart();\r\n    if (s1 !== peg$FAILED) {\r\n      s2 = [];\r\n      s3 = peg$parseIdentifierPart();\r\n      while (s3 !== peg$FAILED) {\r\n        s2.push(s3);\r\n        s3 = peg$parseIdentifierPart();\r\n      }\r\n      if (s2 !== peg$FAILED) {\r\n        peg$savedPos = s0;\r\n        s1 = peg$c125(s1, s2);\r\n        s0 = s1;\r\n      } else {\r\n        peg$currPos = s0;\r\n        s0 = peg$FAILED;\r\n      }\r\n    } else {\r\n      peg$currPos = s0;\r\n      s0 = peg$FAILED;\r\n    }\r\n    peg$silentFails--;\r\n    if (s0 === peg$FAILED) {\r\n      s1 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c124);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseIdentifierStart() {\r\n    var s0;\r\n\r\n    s0 = peg$parseUnicodeLetter();\r\n    if (s0 === peg$FAILED) {\r\n      if (input.charCodeAt(peg$currPos) === 36) {\r\n        s0 = peg$c126;\r\n        peg$currPos++;\r\n      } else {\r\n        s0 = peg$FAILED;\r\n        if (peg$silentFails === 0) {\r\n          peg$fail(peg$c127);\r\n        }\r\n      }\r\n      if (s0 === peg$FAILED) {\r\n        if (input.charCodeAt(peg$currPos) === 95) {\r\n          s0 = peg$c128;\r\n          peg$currPos++;\r\n        } else {\r\n          s0 = peg$FAILED;\r\n          if (peg$silentFails === 0) {\r\n            peg$fail(peg$c129);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseIdentifierPart() {\r\n    var s0;\r\n\r\n    s0 = peg$parseIdentifierStart();\r\n    if (s0 === peg$FAILED) {\r\n      s0 = peg$parseUnicodeCombiningMark();\r\n      if (s0 === peg$FAILED) {\r\n        s0 = peg$parseUnicodeDigit();\r\n        if (s0 === peg$FAILED) {\r\n          if (input.charCodeAt(peg$currPos) === 8204) {\r\n            s0 = peg$c130;\r\n            peg$currPos++;\r\n          } else {\r\n            s0 = peg$FAILED;\r\n            if (peg$silentFails === 0) {\r\n              peg$fail(peg$c131);\r\n            }\r\n          }\r\n          if (s0 === peg$FAILED) {\r\n            if (input.charCodeAt(peg$currPos) === 8205) {\r\n              s0 = peg$c132;\r\n              peg$currPos++;\r\n            } else {\r\n              s0 = peg$FAILED;\r\n              if (peg$silentFails === 0) {\r\n                peg$fail(peg$c133);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseUnicodeLetter() {\r\n    var s0, s1;\r\n\r\n    peg$silentFails++;\r\n    s0 = peg$parseLu();\r\n    if (s0 === peg$FAILED) {\r\n      s0 = peg$parseLl();\r\n      if (s0 === peg$FAILED) {\r\n        s0 = peg$parseLt();\r\n        if (s0 === peg$FAILED) {\r\n          s0 = peg$parseLm();\r\n          if (s0 === peg$FAILED) {\r\n            s0 = peg$parseLo();\r\n            if (s0 === peg$FAILED) {\r\n              s0 = peg$parseNl();\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    peg$silentFails--;\r\n    if (s0 === peg$FAILED) {\r\n      s1 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c134);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseUnicodeCombiningMark() {\r\n    var s0, s1;\r\n\r\n    peg$silentFails++;\r\n    s0 = peg$parseMn();\r\n    if (s0 === peg$FAILED) {\r\n      s0 = peg$parseMc();\r\n    }\r\n    peg$silentFails--;\r\n    if (s0 === peg$FAILED) {\r\n      s1 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c135);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseUnicodeDigit() {\r\n    var s0, s1;\r\n\r\n    peg$silentFails++;\r\n    s0 = peg$parseNd();\r\n    peg$silentFails--;\r\n    if (s0 === peg$FAILED) {\r\n      s1 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c136);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseLl() {\r\n    var s0;\r\n\r\n    if (peg$c137.test(input.charAt(peg$currPos))) {\r\n      s0 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c138);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseLm() {\r\n    var s0;\r\n\r\n    if (peg$c139.test(input.charAt(peg$currPos))) {\r\n      s0 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c140);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseLo() {\r\n    var s0;\r\n\r\n    if (peg$c141.test(input.charAt(peg$currPos))) {\r\n      s0 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c142);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseLt() {\r\n    var s0;\r\n\r\n    if (peg$c143.test(input.charAt(peg$currPos))) {\r\n      s0 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c144);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseLu() {\r\n    var s0;\r\n\r\n    if (peg$c145.test(input.charAt(peg$currPos))) {\r\n      s0 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c146);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseMc() {\r\n    var s0;\r\n\r\n    if (peg$c147.test(input.charAt(peg$currPos))) {\r\n      s0 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c148);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseMn() {\r\n    var s0;\r\n\r\n    if (peg$c149.test(input.charAt(peg$currPos))) {\r\n      s0 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c150);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseNd() {\r\n    var s0;\r\n\r\n    if (peg$c151.test(input.charAt(peg$currPos))) {\r\n      s0 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c152);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseNl() {\r\n    var s0;\r\n\r\n    if (peg$c153.test(input.charAt(peg$currPos))) {\r\n      s0 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c154);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parsePc() {\r\n    var s0;\r\n\r\n    if (peg$c155.test(input.charAt(peg$currPos))) {\r\n      s0 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c156);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n  function peg$parseZs() {\r\n    var s0;\r\n\r\n    if (peg$c157.test(input.charAt(peg$currPos))) {\r\n      s0 = input.charAt(peg$currPos);\r\n      peg$currPos++;\r\n    } else {\r\n      s0 = peg$FAILED;\r\n      if (peg$silentFails === 0) {\r\n        peg$fail(peg$c158);\r\n      }\r\n    }\r\n\r\n    return s0;\r\n  }\r\n\r\n\r\n  const Conjunction = options.conjunction;\r\n  const Disjunction = options.disjunction;\r\n  const Implication = options.implication;\r\n  const ExistentialQuant = options.existentialQuant;\r\n  const UniversalQuant = options.universalQuant;\r\n  const Negation = options.negation;\r\n  const Constant = options.constant;\r\n  const Variable = options.variable;\r\n  const Language = options.language;\r\n  const FunctionTerm = options.functionTerm;\r\n  const Predicate = options.predicate;\r\n  const EqualityAtom = options.equalityAtom;\r\n  const Structure = options.structure;\r\n\r\n  function checkPredicateArity(id, terms) {\r\n    if (Structure.language.getPredicate(id) == terms.length) {\r\n      return new Predicate(id, terms);\r\n    } else {\r\n      error(\"Predicate \" + id + \" has arity \" + Structure.language.getPredicate(id))\r\n    }\r\n  }\r\n\r\n\r\n  peg$result = peg$startRuleFunction();\r\n\r\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\r\n    return peg$result;\r\n  } else {\r\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\r\n      peg$fail(peg$endExpectation());\r\n    }\r\n\r\n    throw peg$buildStructuredError(\r\n       peg$maxFailExpected,\r\n       peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\r\n       peg$maxFailPos < input.length\r\n          ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\r\n          : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\r\n    );\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  SyntaxError: peg$SyntaxError,\r\n  parse: peg$parse\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","export const STUDENT_MODE = 'STUDENT';\r\n\r\nexport const FUNCTION = 'FUNCTION';\r\nexport const PREDICATE = 'PREDICATE';\r\n\r\n\r\nexport const FORMULA = 'FORMULA';\r\nexport const TERM = 'TERM';\r\n\r\nexport const EXPRESSION_LABEL = {\r\n  FORMULA: '𝝋',\r\n  TERM: '𝝉'\r\n};\r\n\r\nexport const defaultInputData = () => ({value: '', locked: false, errorMessage: ''});\r\nexport const defaultExpressionData = () => ({\r\n  value: '',\r\n  expressionValue: null,\r\n  answerValue: '',\r\n  errorMessage: '',\r\n  inputLocked: false,\r\n  answerLocked: false\r\n});\r\n\r\nexport const DEFAULT_FILE_NAME = 'struktura';","import React from 'react';\r\nimport FontAwesome from 'react-fontawesome';\r\nimport {Button} from \"react-bootstrap\";\r\n\r\nconst LockButton = ({lockFn, locked}) => (\r\n   <Button variant={'outline-secondary'} className={locked?'active':''} onClick={() => lockFn()}>\r\n     <FontAwesome name={locked ? 'unlock' : 'lock'}/>\r\n   </Button>\r\n);\r\n\r\nexport default LockButton;","import React from 'react';\r\nimport {Button} from \"react-bootstrap\";\r\nimport FontAwesome from \"react-fontawesome\";\r\n\r\nconst HelpButton = ({dataTarget}) => (\r\n    <Button style={{padding:\"0.2rem 0.4rem\"}} variant={'secondary'} size={\"sm\"} title='Pomoc' data-toggle='collapse' data-target={dataTarget} aria-expanded='false' aria-controls='collapseExample'>\r\n        <FontAwesome name='fas fa-question'/>\r\n    </Button>\r\n);\r\n\r\nexport default HelpButton;\r\n","import React from 'react';\r\nimport {Button} from \"react-bootstrap\";\r\nimport FontAwesome from \"react-fontawesome\";\r\n\r\nconst AddButton = ({onClickAddFunction,addType}) => (\r\n    <Button variant={\"success\"} title={\"Pridaj\"} onClick={() => onClickAddFunction(addType)}><FontAwesome\r\n        name='plus'/>\r\n        &nbsp;Pridaj\r\n    </Button>\r\n);\r\n\r\nexport default AddButton;\r\n","import React from 'react';\r\nimport {\r\n    Button, Col,\r\n    Form,\r\n    InputGroup,\r\n    Row,\r\n} from \"react-bootstrap\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport {EXPRESSION_LABEL, FORMULA, TERM} from \"../../constants\";\r\nimport FontAwesome from 'react-fontawesome';\r\nimport LockButton from '../buttons/LockButton';\r\nimport HelpButton from \"../buttons/HelpButton\";\r\nimport AddButton from \"../buttons/AddButton\";\r\n\r\nconst helpFormula = (\r\n   <div className=\"collapse\" id=\"help-formula\">\r\n     <div className=\"well\">\r\n       Tu je možné overiť, či ľubovoľná formula spĺňa vyššie definovanú štruktúru. Všetky termy a predikáty\r\n       musia byť definované v jazyku. Ak formula nie je zapísaná v správnej syntaxi, nevyhodnotí sa. Je potrebné\r\n       dodržiavať správne uzátvorkovanie podformúl. Napravo od\r\n       formuly sa vyberá možnosť splnenia alebo nesplnenia formuly v štruktúre. Sú povolené nasledujúce symboly\r\n       spojok, atómov a kvantifikátorov a žiadne iné:\r\n       <ul>\r\n         <li>Konjunkcia: \\wedge, \\land, &&, &, /\\, ∧</li>\r\n         <li>Disjunkcia: \\vee, \\lor, ||, |, \\/, ∨</li>\r\n         <li>Implikácia: \\to, →, -></li>\r\n         <li>Existenčný kvantifikátor: \\exists, \\e, \\E, ∃</li>\r\n         <li>Všeobecný kvantifikátor: \\forall, \\a, \\A, ∀</li>\r\n         <li>Negácia: \\neg, \\lnot, -, !, ~, ¬</li>\r\n         <li>Rovnosť: =</li>\r\n         <li>Nerovnosť: !=, &#60;&#62;, /=, &#8800;</li>\r\n       </ul>\r\n     </div>\r\n   </div>\r\n);\r\n\r\nconst helpTerm = (\r\n   <div className=\"collapse\" id=\"help-term\">\r\n     <div className=\"well\">\r\n       Tu sa pridávajú termy a je možné zistiť ich hodnotu na základe vyššie definovanej štruktúry. Všetky termy\r\n       musia byť definované v jazyku. Každý symbol premennej, symbol konštanty a funkčný symbol sa považuje za term.\r\n       Predikátový symbol nie je term.\r\n     </div>\r\n   </div>\r\n);\r\n\r\nconst getFormulaAnswers = () => (\r\n   <React.Fragment>\r\n     <option key={'-1'} value={'-1'}>⊨/⊭?</option>\r\n     <option key={'true'} value={'true'}>⊨</option>\r\n     <option key={'false'} value={'false'}>⊭</option>\r\n   </React.Fragment>\r\n);\r\n\r\nconst getTermAnswers = (domain) => (\r\n   <React.Fragment>\r\n     <option value={''}>Vyber hodnotu ...</option>\r\n     {domain.map(item =>\r\n        <option key={item} value={item}>{item}</option>\r\n     )}\r\n   </React.Fragment>\r\n);\r\n\r\nfunction prepareExpressions(formulas, terms) {\r\n  let f = {\r\n    items: formulas,\r\n    expressionType: FORMULA,\r\n    answers: () => getFormulaAnswers(),\r\n    help: helpFormula,\r\n    panelTitle: 'Splnenie formúl v štruktúre 𝓜'\r\n  };\r\n  let t = {\r\n    items: terms,\r\n    expressionType: TERM,\r\n    answers: (domain) => getTermAnswers(domain),\r\n    help: helpTerm,\r\n    panelTitle: 'Hodnoty termov v 𝓜'\r\n  };\r\n  return [f, t];\r\n}\r\n\r\nconst Expressions = (props) => (\r\n   <React.Fragment>\r\n     {prepareExpressions(props.formulas, props.terms).map(expression =>\r\n        <Card className={\"mt-3\"} key={expression.expressionType}>\r\n          <Card.Header as={\"h5\"} className={\"d-flex justify-content-between\"}>\r\n            <span>{expression.panelTitle}</span>\r\n              <HelpButton dataTarget={\"#help-\" + expression.expressionType.toLowerCase()}/>\r\n          </Card.Header>\r\n          <Card.Body>\r\n            {expression.help}\r\n            {expression.items.map((item, index) =>\r\n                <Form key={\"expression-form-\"+index}>\r\n               <Row key={\"expression-row\"+index}>\r\n                   <Col sm={12} md={12} lg={7}>\r\n                     <Form.Group>\r\n                       <InputGroup>\r\n                           <InputGroup.Prepend>\r\n                               <InputGroup.Text id={expression.expressionType.toLowerCase() + '-' + index}>{EXPRESSION_LABEL[expression.expressionType]}<sub>{index + 1}</sub></InputGroup.Text>\r\n                           </InputGroup.Prepend>\r\n                           <Form.Control type='text' value={item.value}\r\n                                         onChange={(e) => props.onInputChange(e.target.value, index, expression.expressionType)}\r\n                                         id={expression.expressionType.toLowerCase() + '-' + index}\r\n                                         disabled={item.inputLocked}\r\n                                         isInvalid={item.errorMessage.length >0}\r\n                           />\r\n                           <InputGroup.Append>\r\n                               <Button variant={\"secondary\"}\r\n                              onClick={() => props.removeExpression(expression.expressionType, index)}><FontAwesome\r\n                              name='fas fa-trash'/>\r\n                               </Button>\r\n                           {props.teacherMode ? (\r\n                              <LockButton\r\n                                 lockFn={() => props.lockExpressionValue(expression.expressionType, index)}\r\n                                 locked={item.inputLocked}/>\r\n                           ) : null}\r\n                           </InputGroup.Append>\r\n                           <Form.Control.Feedback type={\"invalid\"}>{item.errorMessage}</Form.Control.Feedback>\r\n                       </InputGroup>\r\n                     </Form.Group>\r\n                   </Col>\r\n\r\n                   <Col xs={8} sm={6} md={5} lg={3}>\r\n                     <Form.Group>\r\n                       <InputGroup>\r\n                           <InputGroup.Prepend>\r\n                               <InputGroup.Text id={expression.expressionType.toLowerCase() + '-answer-' + index}>𝓜</InputGroup.Text>\r\n                           </InputGroup.Prepend>\r\n                           <Form.Control as=\"select\" value={item.answerValue}\r\n                                         onChange={(e) => props.setExpressionAnswer(expression.expressionType, e.target.value, index)}\r\n                                         id={expression.expressionType.toLowerCase() + '-answer-' + index}\r\n                                         disabled={item.answerLocked}>\r\n                               {expression.answers(props.domain)}\r\n                            </Form.Control>\r\n\r\n                         {expression.expressionType === TERM ? null : (\r\n                             <InputGroup.Append>\r\n                                 <InputGroup.Text id={expression.expressionType.toLowerCase() + '-answer-' + index}>𝝋<sub>{index + 1}</sub>[e]</InputGroup.Text>\r\n                             </InputGroup.Append>\r\n                         )}\r\n                         {props.teacherMode ? (\r\n                            <InputGroup.Append>\r\n                              <LockButton\r\n                                 lockFn={() => props.lockExpressionAnswer(expression.expressionType, index)}\r\n                                 locked={item.answerLocked}/>\r\n                            </InputGroup.Append>\r\n                         ) : null}\r\n                       </InputGroup>\r\n                     </Form.Group>\r\n                   </Col>\r\n\r\n                   <Col xs={4} sm={4} md={2} className={\"pt-2 no-padding-right\"}>\r\n                     {item.answerValue !== '' && item.answerValue !== '-1' ? (item.answerValue === item.expressionValue ?\r\n                         <strong className=\"text-success\"><FontAwesome\r\n                           name='check'/>&nbsp;Správne</strong> :\r\n                         <strong className=\"text-danger\"><FontAwesome\r\n                           name='times'/>&nbsp;Nesprávne</strong>\r\n                        ) : null}\r\n                   </Col>\r\n               </Row>\r\n                </Form>\r\n            )}\r\n            <AddButton onClickAddFunction={props.addExpression} addType={expression.expressionType}/>\r\n          </Card.Body>\r\n        </Card>\r\n     )}\r\n   </React.Fragment>\r\n);\r\n\r\nexport default Expressions;","export const setConstants = (value) => ({\r\n  type: 'SET_CONSTANTS',\r\n  value\r\n});\r\n\r\nexport const setPredicates = (value) => ({\r\n  type: 'SET_PREDICATES',\r\n  value\r\n});\r\n\r\nexport const setFunctions = (value) => ({\r\n  type: 'SET_FUNCTIONS',\r\n  value\r\n});\r\n\r\nexport const setDomain = (value) => ({\r\n  type: 'SET_DOMAIN',\r\n  value\r\n});\r\n\r\nexport const renameDomainNode = (oldName,newName) => ({\r\n  type: 'RENAME_DOMAIN_NODE',\r\n  oldName,\r\n  newName\r\n});\r\n\r\nexport const renameConstantNode = (oldName,newName) => ({\r\n  type: 'RENAME_CONSTANT_NODE',\r\n  oldName,\r\n  newName\r\n});\r\n\r\nexport const setConstantValueFromLink = (constantNodeName,domainNodeName) => ({\r\n  type: 'SET_CONSTANT_VALUE_FROM_LINK',\r\n  constantNodeName,\r\n  domainNodeName\r\n});\r\n\r\nexport const syncMathState = () => ({\r\n  type: 'SYNC_MATH_STATE'\r\n});\r\n\r\nexport const syncDiagram = (value,focusOnBodyFunc) => ({\r\n  type: 'SYNC_DIAGRAM',\r\n  value,\r\n  focusOnBodyFunc\r\n});\r\n\r\nexport const removeConstantNode = (nodeName) => ({\r\n  type: 'REMOVE_CONSTANT_NODE',\r\n  nodeName\r\n});\r\n\r\nexport const removeDomainNode = (nodeName) => ({\r\n  type: 'REMOVE_DOMAIN_NODE',\r\n  nodeName\r\n});\r\n\r\nexport const addConstantNode = (nodeName,nodeObject) => ({\r\n  type: 'ADD_CONSTANT_NODE',\r\n  nodeName,\r\n  nodeObject\r\n});\r\n\r\nexport const addDomainNode = (nodeName,nodeObject) => ({\r\n  type: 'ADD_DOMAIN_NODE',\r\n  nodeName,\r\n  nodeObject\r\n});\r\n\r\nexport const addTernaryNode = (nodeName,nodeObject) => ({\r\n  type: 'ADD_TERNARY_NODE',\r\n  nodeName,\r\n  nodeObject\r\n});\r\n\r\nexport const addQuaternaryNode = (nodeName,nodeObject) => ({\r\n  type: 'ADD_QUATERNARY_NODE',\r\n  nodeName,\r\n  nodeObject\r\n});\r\n\r\nexport const removeTernaryNode = (nodeName) => ({\r\n  type: 'REMOVE_TERNARY_NODE',\r\n  nodeName\r\n});\r\n\r\nexport const removeQuaternaryNode = (nodeName) => ({\r\n  type: 'REMOVE_QUATERNARY_NODE',\r\n  nodeName\r\n});\r\n\r\nexport const addUnaryPredicate = (predicateName,nodeName) => ({\r\n  type: 'ADD_UNARY_PREDICATE',\r\n  predicateName,\r\n  nodeName\r\n});\r\n\r\nexport const removeUnaryPredicate = (predicateName,nodeName) => ({\r\n  type: 'REMOVE_UNARY_PREDICATE',\r\n  predicateName,\r\n  nodeName\r\n});\r\n\r\nexport const addBinaryPredicate = (predicateName,sourceNodeName,targetNodeName) => ({\r\n  type: 'ADD_BINARY_PREDICATE',\r\n  predicateName,\r\n  sourceNodeName,\r\n  targetNodeName\r\n});\r\n\r\nexport const addTernaryPredicate = (predicateName,nodeName) => ({\r\n  type: 'ADD_TERNARY_PREDICATE',\r\n  predicateName,\r\n  nodeName\r\n});\r\n\r\nexport const addQuaternaryPredicate = (predicateName,nodeName) => ({\r\n  type: 'ADD_QUATERNARY_PREDICATE',\r\n  predicateName,\r\n  nodeName\r\n});\r\n\r\nexport const addUnaryFunction = (functionName,sourceNodeName,targetNodeName,direction) => ({\r\n  type: 'ADD_UNARY_FUNCTION',\r\n  functionName,\r\n  sourceNodeName,\r\n  targetNodeName,\r\n  direction\r\n});\r\n\r\nexport const addBinaryFunction = (functionName,nodeName) => ({\r\n  type: 'ADD_BINARY_FUNCTION',\r\n  functionName,\r\n  nodeName\r\n});\r\n\r\nexport const addTernaryFunction = (functionName,nodeName) => ({\r\n  type: 'ADD_TERNARY_FUNCTION',\r\n  functionName,\r\n  nodeName\r\n});\r\n\r\nexport const removeUnaryFunction = (functionName,sourceNodeName,targetNodeName,direction) => ({\r\n  type: 'REMOVE_UNARY_FUNCTION',\r\n  functionName,\r\n  sourceNodeName,\r\n  targetNodeName,\r\n  direction\r\n});\r\n\r\nexport const removeBinaryPredicate = (predicateName,sourceNodeName,targetNodeName,direction) => ({\r\n  type: 'REMOVE_BINARY_PREDICATE',\r\n  predicateName,\r\n  sourceNodeName,\r\n  targetNodeName,\r\n  direction\r\n});\r\n\r\nexport const removeBinaryFunction = (functionName,nodeName) => ({\r\n  type: 'REMOVE_BINARY_FUNCTION',\r\n  functionName,\r\n  nodeName\r\n});\r\n\r\nexport const removeTernaryFunction = (functionName,nodeName) => ({\r\n  type: 'REMOVE_TERNARY_FUNCTION',\r\n  functionName,\r\n  nodeName\r\n});\r\n\r\nexport const removeTernaryPredicate = (predicateName,nodeName) => ({\r\n  type: 'REMOVE_TERNARY_PREDICATE',\r\n  predicateName,\r\n  nodeName\r\n});\r\n\r\nexport const removeQuaternaryPredicate = (predicateName,nodeName) => ({\r\n  type: 'REMOVE_QUATERNARY_PREDICATE',\r\n  predicateName,\r\n  nodeName\r\n});\r\n\r\nexport const changeDirectionOfBinaryRelation = (languageElementName,sourceNodeName,targetNodeName,direction,langType) => ({\r\n  type: 'CHANGE_DIRECTION_OF_BINARY_RELATION',\r\n  languageElementName,\r\n  sourceNodeName,\r\n  targetNodeName,\r\n  direction,\r\n  langType\r\n});\r\n\r\nexport const setConstantValue = (value, constantName) => ({\r\n  type: 'SET_CONSTANT_VALUE',\r\n  constantName,\r\n  value,\r\n});\r\n\r\nexport const setPredicateValueText = (value, predicateName) => ({\r\n  type: 'SET_PREDICATE_VALUE_TEXT',\r\n  value,\r\n  predicateName\r\n});\r\n\r\nexport const setPredicateValueTable = (value, predicateName, checked) => ({\r\n  type: 'SET_PREDICATE_VALUE_TABLE',\r\n  value,\r\n  predicateName,\r\n  checked\r\n});\r\n\r\nexport const setFunctionValueText = (value, functionName) => ({\r\n  type: 'SET_FUNCTION_VALUE_TEXT',\r\n  value,\r\n  functionName\r\n});\r\n\r\nexport const clearGraphSelection = () => ({\r\n  type: 'CLEAR_GRAPH_SELECTION'\r\n});\r\n\r\nexport const setDiagramModel = (model) => ({\r\n  type: 'SET_MODEL',\r\n  model\r\n});\r\n\r\nexport const setFunctionValueTable = (value, functionName) => ({\r\n  type: 'SET_FUNCTION_VALUE_TABLE',\r\n  value,\r\n  functionName\r\n});\r\n\r\nexport const checkExpressionSyntax = (value, index, expressionType) => ({\r\n  type: 'CHECK_SYNTAX',\r\n  value,\r\n  index,\r\n  expressionType\r\n});\r\n\r\nexport const addExpression = (expressionType) => ({\r\n  type: 'ADD_EXPRESSION',\r\n  expressionType\r\n});\r\n\r\nexport const resetDiagramState = () => ({\r\n  type: 'RESET_DIAGRAM_STATE'\r\n});\r\n\r\nexport const removeExpression = (expressionType, index) => ({\r\n  type: 'REMOVE_EXPRESSION',\r\n  expressionType,\r\n  index\r\n});\r\n\r\nexport const setExpressionAnswer = (expressionType, answer, index) => ({\r\n  type: 'SET_EXPRESSION_ANSWER',\r\n  expressionType,\r\n  answer,\r\n  index\r\n});\r\n\r\nexport const lockExpressionValue = (expressionType, expressionIndex) => ({\r\n  type: 'LOCK_EXPRESSION_VALUE',\r\n  expressionType,\r\n  expressionIndex\r\n});\r\n\r\nexport const lockExpressionAnswer = (expressionType, expressionIndex) => ({\r\n  type: 'LOCK_EXPRESSION_ANSWER',\r\n  expressionType,\r\n  expressionIndex\r\n});\r\n\r\nexport const lockConstants = () => ({\r\n  type: 'LOCK_CONSTANTS'\r\n});\r\n\r\nexport const lockPredicates = () => ({\r\n  type: 'LOCK_PREDICATES'\r\n});\r\n\r\nexport const lockFunctions = () => ({\r\n  type: 'LOCK_FUNCTIONS'\r\n});\r\n\r\nexport const lockDomain = () => ({\r\n  type: 'LOCK_DOMAIN'\r\n});\r\n\r\nexport const lockConstantValue = (constantName) => ({\r\n  type: 'LOCK_CONSTANT_VALUE',\r\n  constantName\r\n});\r\n\r\nexport const lockPredicateValue = (predicateName) => ({\r\n  type: 'LOCK_PREDICATE_VALUE',\r\n  predicateName\r\n});\r\n\r\nexport const lockFunctionValue = (functionName) => ({\r\n  type: 'LOCK_FUNCTION_VALUE',\r\n  functionName\r\n});\r\n\r\nexport const lockVariables = () => ({\r\n  type: 'LOCK_VARIABLES'\r\n});\r\n\r\nexport const toggleTable = (itemType, name) => ({\r\n  type: 'TOGGLE_EDIT_TABLE',\r\n  itemType,\r\n  name\r\n});\r\n\r\nexport const toggleDatabase = (itemType, name) => ({\r\n  type: 'TOGGLE_EDIT_DATABASE',\r\n  itemType,\r\n  name\r\n});\r\n\r\nexport const setVariablesValue = (value) => ({\r\n  type: 'SET_VARIABLES_VALUE',\r\n  value\r\n});\r\n\r\nexport const toggleTeacherMode = () => ({\r\n  type: 'TOGGLE_TEACHER_MODE'\r\n});\r\n\r\nexport const importAppState = (content,diagramState) => ({\r\n  type: 'IMPORT_APP',\r\n  content,\r\n  diagramState\r\n});\r\n\r\nexport const importDiagramState = (state,focusOnBodyFunc) => ({\r\n  type: 'IMPORT_DIAGRAM_STATE',\r\n  state,\r\n  focusOnBodyFunc\r\n});\r\nexport const toggleEditableNodes = (value) => ({\r\n  type: 'TOGGLE_EDITABLE_NODES',\r\n  value\r\n});\r\n","import {connect} from 'react-redux';\r\nimport Expressions from \"../../math_view/components/Expressions\";\r\nimport {\r\n  addExpression,\r\n  checkExpressionSyntax,\r\n  lockExpressionAnswer,\r\n  lockExpressionValue,\r\n  removeExpression,\r\n  setExpressionAnswer\r\n} from \"../actions\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  formulas: state.expressions.formulas,\r\n  terms: state.expressions.terms,\r\n  domain: [...state.structureObject.domain],\r\n  teacherMode: state.common.teacherMode\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  onInputChange: checkExpressionSyntax,\r\n  addExpression: addExpression,\r\n  removeExpression: removeExpression,\r\n  setExpressionAnswer: setExpressionAnswer,\r\n  lockExpressionValue: lockExpressionValue,\r\n  lockExpressionAnswer: lockExpressionAnswer\r\n};\r\n\r\nconst ExpressionContainer = connect(\r\n   mapStateToProps,\r\n   mapDispatchToProps\r\n)(Expressions);\r\n\r\nexport default ExpressionContainer;","import * as React from 'react';\r\nimport styled from '@emotion/styled';\r\n\r\nexport const Tray = styled.div`\r\nmin-width: 10%;\r\nbackground: white !important;\r\nflex:0 0 0;\r\n\r\n@media (max-width: 990px) and  (min-width: 750px){\r\nmin-width: 10vw;\r\n}\r\n\r\n@media (max-width: 749px) and  (min-width: 481px){\r\nmin-width: 15vw;\r\n}\r\n\r\n@media (max-width: 480px){\r\nmin-width: 20vw;\r\n}\r\n\r\n`;\r\n\r\nexport class TrayWidget extends React.Component {\r\n\trender() {\r\n\t\treturn <Tray>{this.props.children}</Tray>;\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport styled from \"@emotion/styled\";\r\n\r\nexport interface TrayItemWidgetProps {\r\n\tmodel: any;\r\n\tcolor?: string | undefined;\r\n\tname: string;\r\n\telement:any;\r\n\tclickFunction:any;\r\n\treduxProps:any;\r\n\ttitle:string;\r\n}\r\n\r\nexport const BasicTray = styled.div`\r\n\t\tcursor: pointer;\r\n\t\tmin-width: 2em;\r\n\t\twidth:50%;\r\n\t\tmargin:auto;\r\n\t\tmargin-top:0.5em;\r\n\t\tmargin-bottom:0.5em;\r\n\t`;\r\n\r\nexport class ItemWidgetIcon extends React.Component<TrayItemWidgetProps> {\r\n\tconstructor(props:any){\r\n\t\tsuper(props);\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<BasicTray\r\n\t\t\t\ttitle={this.props.title}\r\n\t\t\t\tcolor={this.props.color}\r\n\t\t\t\tdraggable={true}\r\n\t\t\t\tonDragStart={event => {\r\n\t\t\t\t\tevent.dataTransfer.setData('storm-graph_view-node', JSON.stringify(this.props.model));\r\n\t\t\t\t}}\r\n\t\t\t\tonClick={e => {\r\n\t\t\t\t\tthis.props.clickFunction(this.props.element,JSON.stringify(this.props.model),this.props.reduxProps);\r\n\t\t\t\t}}\r\n\t\t\t\tclassName=\"tray-item\">\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</BasicTray>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n\r\n","import * as React from 'react';\r\nimport styled from '@emotion/styled';\r\n\r\nexport interface MainCanvasWidgetProps {\r\n\tcolor?: string;\r\n\tbackground?: string;\r\n}\r\n\r\n\texport const Container = styled.div<{ color: string; background: string }>`\r\n\t\theight: 100%;\r\n\t\tbackground-color:white !important;\r\n\t\tbackground-size: 50px 50px;\r\n\t\tdisplay: flex;\r\n\t\t/*border: 1px solid black;*/\r\n\r\n\t\t> * {\r\n\t\t\theight: 100%;\r\n\t\t\tmin-height: 100%;\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\t\tbackground-image: linear-gradient(\r\n\t\t\t\t0deg,\r\n\t\t\t\ttransparent 24%,\r\n\t\t\t\t${p => p.color} 25%,\r\n\t\t\t\t${p => p.color} 26%,\r\n\t\t\t\ttransparent 27%,\r\n\t\t\t\ttransparent 74%,\r\n\t\t\t\t${p => p.color} 75%,\r\n\t\t\t\t${p => p.color} 76%,\r\n\t\t\t\ttransparent 77%,\r\n\t\t\t\ttransparent\r\n\t\t\t),\r\n\t\t\tlinear-gradient(\r\n\t\t\t\t90deg,\r\n\t\t\t\ttransparent 24%,\r\n\t\t\t\t${p => p.color} 25%,\r\n\t\t\t\t${p => p.color} 26%,\r\n\t\t\t\ttransparent 27%,\r\n\t\t\t\ttransparent 74%,\r\n\t\t\t\t${p => p.color} 75%,\r\n\t\t\t\t${p => p.color} 76%,\r\n\t\t\t\ttransparent 77%,\r\n\t\t\t\ttransparent\r\n\t\t\t);\r\n\t`;\r\n\r\nexport class MainCanvasWidget extends React.Component<MainCanvasWidgetProps> {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Container\r\n\t\t\t\tbackground={this.props.background || 'rgb(60, 60, 60)'}\r\n\t\t\t\tcolor={this.props.color || 'rgba(0,0,0, 0.15)'}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</Container>\r\n\t\t);\r\n\t}\r\n}\r\n","import FontAwesome from \"react-fontawesome\";\r\nimport React from \"react\";\r\n\r\nexport const ADDPORT:any = <FontAwesome name='fas fa-plus'/>;\r\nexport const ADDPORTSELECTED:any =  <FontAwesome name='fas fa-times'/>;\r\nexport const INPORT:string = \"IN\";\r\nexport const OUTPORT:string = \"OUT\";\r\nexport const CONSTPORT:string = \"*\";\r\nexport const UNBINARY:string = \"unbinary\";\r\nexport const CONSTANT:string = \"constant\";\r\nexport const MAINPORT:string = \"MAINPORT\";\r\nexport const ADDPRED:string = \"P\";\r\nexport const ADDFUNC:string = \"F\";\r\nexport const BOTH:string = \"B\";\r\nexport const FROM:string = \"F\";\r\nexport const TO:string = \"T\";\r\nexport const PREDICATE:string =\"P\";\r\nexport const FUNCTION:string = \"F\";\r\nexport const BASIC_CURVYNESS:number = 85;\r\nexport const UNBINARYNODE:string = \"N\";\r\nexport const CONSTANTNODE:string = \"C\";\r\nexport const TERNARYNODE:string = \"T\";\r\nexport const QUATERNARYNODE:string = \"Q\";\r\nexport const TERNARY = \"T\";\r\nexport const QUATERNARY = \"Q\";","import {FUNCTION, PREDICATE, UNBINARY} from \"./ConstantNames\";\r\nimport {RULE_CONSTANTS, RULE_DOMAIN} from \"../../constants/parser_start_rules\";\r\nimport {DiagramEngine } from \"@projectstorm/react-diagrams\";\r\nlet parser = require('../../parser/grammar');\r\n\r\nexport function canUseNameForGivenArityAndType(elementName:string,elementArity:string,reduxProps:any,type:string):boolean{\r\n    let structureObject = reduxProps[\"store\"].getState().structureObject.language;\r\n\r\n    if(structureObject.constants && structureObject.constants.has(elementName)){\r\n        return false;\r\n    }\r\n\r\n    let givenSet = type === PREDICATE?structureObject.functions:structureObject.predicates;\r\n    if(givenSet && givenSet.has(elementName)){\r\n        return false;\r\n    }\r\n\r\n    let finalSet = type === PREDICATE?structureObject.predicates:structureObject.functions;\r\n\r\n    if(finalSet){\r\n        for(let [langaugeElementName,languageElementArity] of finalSet.entries()){\r\n            if(langaugeElementName === elementName){\r\n                return languageElementArity.toString() === elementArity;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function functionIsAlreadyDefinedForGivenFunction(functionParameters:[string],functionValue:string,functionName:string,reduxProps:any):boolean{\r\n    let functionInterpretation = reduxProps[\"store\"].getState().structureObject.iFunction;\r\n\r\n    if(functionInterpretation.has(functionName)){\r\n        for(let [funcParameters,funcValue] of Object.entries(functionInterpretation.get(functionName))){\r\n            if(funcParameters === JSON.stringify(functionParameters)){\r\n                return funcValue!==functionValue;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function selectOnlyCurrentGraphElement(currentModel:any,engine:DiagramEngine){\r\n    engine.getModel().clearSelection();\r\n    currentModel.setSelected(true);\r\n    engine.repaintCanvas();\r\n}\r\n\r\nexport function clearAllWithoutCurrentModel(currentModel:any,engine:DiagramEngine){\r\n    let selectedElements = engine.getModel().getSelectedEntities();\r\n    for(let graphObject of selectedElements){\r\n        if(graphObject!==currentModel){\r\n            graphObject.setSelected(false);\r\n        }\r\n    }\r\n    engine.repaintCanvas();\r\n}\r\n\r\nfunction setNodeBadNameIfStateContainsNodeWithSameName(state:Map<string,any>,newName:string,setNodeBadName:any){\r\n    if(state.has(newName)){\r\n        setNodeBadName(true);\r\n        return true;\r\n    }\r\n    else{\r\n        setNodeBadName(false);\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction parseText(name:string,setNodeBadName:any,startRule:any){\r\n    try{\r\n        parser.parse(name, {startRule: startRule});\r\n        setNodeBadName(false);\r\n        return false;\r\n    }\r\n    catch (e) {\r\n        setNodeBadName(true);\r\n        return true;\r\n    }\r\n}\r\nexport function setPredFuncBadNameIfRegexViolated(name:string,setBadName:any){\r\n   return parseText(name,setBadName,RULE_CONSTANTS);\r\n}\r\n\r\nfunction setDomainBadNameIfRegexViolated(newName:string,setNodeBadName:any){\r\n    parseText(newName,setNodeBadName,RULE_DOMAIN)\r\n}\r\n\r\nfunction setConstantsBadNameIfRegexViolated(newName:string,setNodeBadName:any){\r\n    parseText(newName,setNodeBadName,RULE_CONSTANTS);\r\n}\r\n\r\nexport function canUseNameForNode(oldName:string,newName:string,setNodeBadName:any,reduxProps:any,nodeType:string){\r\n    let diagramState = reduxProps[\"store\"].getState().diagramState;\r\n\r\n    if(oldName === newName){\r\n        setNodeBadName(false);\r\n        return;\r\n    }\r\n\r\n    if(newName.length === 0 ){\r\n        setNodeBadName(true);\r\n        return;\r\n    }\r\n\r\n    if(setNodeBadNameIfStateContainsNodeWithSameName(nodeType === UNBINARY?diagramState.domainNodes:diagramState.constantNodes,newName,setNodeBadName)){\r\n        return;\r\n    }\r\n    nodeType === UNBINARY?setDomainBadNameIfRegexViolated(newName,setNodeBadName):setConstantsBadNameIfRegexViolated(newName, setNodeBadName);\r\n}\r\n\r\nexport function getAvailableLanguageElementForGivenArity(arity:string,reduxProps:any,modelSet:Set<string>,type:string):Set<string> {\r\n    let languageElementSet: Set<string> = new Set();\r\n    let languageElement = type === PREDICATE?reduxProps[\"store\"].getState().structureObject.language.predicates:reduxProps[\"store\"].getState().structureObject.language.functions;\r\n\r\n    for(let [elementValue,elementArity] of languageElement.entries()){\r\n        if(elementArity.toString() === arity && !modelSet.has(elementValue)){\r\n            languageElementSet.add(elementValue);\r\n        }\r\n    }\r\n    return languageElementSet;\r\n}\r\n\r\n\r\nexport function getMaxLengthForGivenLanguageElementWithArity(arity:string,type:string,reduxProps:any):number{\r\n    let maxLength = 0;\r\n    let languageElement = type===PREDICATE?reduxProps[\"store\"].getState().structureObject.language.predicates:reduxProps[\"store\"].getState().structureObject.language.functions;\r\n\r\n    for(let [elementValue,elementArity] of languageElement.entries()){\r\n        if(elementArity === arity && maxLength<elementValue.length){\r\n            maxLength = elementValue.length;\r\n        }\r\n    }\r\n    return maxLength;\r\n}\r\n\r\nexport function getWidestElement(isDropDownMenu:boolean,inputElementTestLength:number,model:any,width:number,predicateArity:string,functionArity:string) {\r\n    if(isDropDownMenu){\r\n        let predicateWidth = getMaxLengthForGivenLanguageElementWithArity(predicateArity,PREDICATE,model.getReduxProps());\r\n        let functionWidth = 0;\r\n\r\n        if(functionArity !== \"0\"){\r\n            functionWidth = getMaxLengthForGivenLanguageElementWithArity(functionArity,FUNCTION,model.getReduxProps());\r\n        }\r\n\r\n        if(width<predicateWidth){\r\n            width = predicateWidth;\r\n        }\r\n        if(width<functionWidth){\r\n            width = functionWidth;\r\n        }\r\n        if(inputElementTestLength>width){\r\n            width = inputElementTestLength;\r\n        }\r\n    }\r\n    return width;\r\n}\r\n","export const RULE_DOMAIN = 'domain';\r\nexport const RULE_VARIABLE_VALUATION = 'e_tuples';\r\nexport const RULE_PREDICATES_FUNCTIONS_VALUE = 'tuples';\r\nexport const RULE_CONSTANTS = 'constants';\r\nexport const RULE_PREDICATES = 'predicates';\r\nexport const RULE_FUNCTIONS = 'functions';\r\nexport const RULE_FORMULA = 'formula';\r\nexport const RULE_TERM = 'term';","import { LabelModel} from '@projectstorm/react-diagrams-core';\r\nimport { DeserializeEvent } from '@projectstorm/react-canvas-core';\r\nimport {BaseModelListener} from '@projectstorm/react-canvas-core';\r\nimport { LabelModelOptions, LabelModelGenerics } from '@projectstorm/react-diagrams';\r\nimport {BOTH, FROM, PREDICATE, TO} from \"../../nodes/ConstantNames\";\r\nimport {functionIsAlreadyDefinedForGivenFunction} from \"../../nodes/functions\";\r\n\r\nexport interface BinaryLabelModelOptions extends LabelModelOptions {\r\n\tlabel?: string;\r\n\tpredicates?: Set<string>;\r\n\treduxProps?: any;\r\n\tname?:string;\r\n}\r\n\r\nexport interface NodeModelListener extends BaseModelListener {\r\n\r\n}\r\n\r\nexport interface BinaryLabelModelGenerics extends LabelModelGenerics {\r\n\tLISTENER: NodeModelListener;\r\n\tOPTIONS: BinaryLabelModelOptions;\r\n}\r\n\r\nexport class BinaryLabelModel extends LabelModel<BinaryLabelModelGenerics> {\r\n\tpredicates: Map<string,string>;\r\n\tfunctions: Map<string,string>;\r\n\teditable: boolean;\r\n\tchangeCounter: number;\r\n\r\n\tconstructor(options: BinaryLabelModelOptions = {},reduxProps?:any,name?:string) {\r\n\t\tsuper({\r\n\t\t\t...options,\r\n\t\t\toffsetY: 0,\r\n\t\t\ttype: 'binary',\r\n\t\t\treduxProps: reduxProps,\r\n\t\t\tname:name,\r\n\t\t});\r\n\r\n\t\tthis.predicates = new Map();\r\n\t\tthis.functions = new Map();\r\n\t\tthis.editable = true;\r\n\t\tthis.changeCounter = 0;\r\n\t\tthis.registerEvents();\r\n\t}\r\n\r\n\tregisterEvents() {\r\n\t\tlet label = this;\r\n\t\tthis.registerListener({\r\n\t\t\tentityRemoved(): void {\r\n\t\t\t\tlabel.removeLabelFromMathView();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tgetSourceDomainNode(){\r\n\t\treturn this.getParent().getSourcePort().getNode();\r\n\t}\r\n\r\n\tgetTargetDomainNode(){\r\n\t\treturn this.getParent().getTargetPort().getNode();\r\n\t}\r\n\r\n\tgetNodeCombinationKey(){\r\n\t\t// @ts-ignore\r\n\t\treturn [this.getSourceDomainNode().getNodeName(),this.getTargetDomainNode().getNodeName()].join(\",\");\r\n\t}\r\n\r\n\tgetReversedNodeCombinationKey(){\r\n\t\t// @ts-ignore\r\n\t\treturn [this.getTargetDomainNode().getNodeName(),this.getSourceDomainNode().getNodeName()].join(\",\");\r\n\t}\r\n\r\n\tclearPredicates(){\r\n\t\tthis.getPredicates().clear();\r\n\t}\r\n\r\n\tclearFunctions(){\r\n\t\tthis.getFunctions().clear();\r\n\t}\r\n\r\n\tremoveLabelFromMathView(){\r\n\t\tfor(let [predicateName,direction] of this.predicates.entries()){\r\n\t\t\t// @ts-ignore\r\n\t\t\tthis.getReduxProps()[\"removeBinaryPredicate\"](predicateName, this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),direction);\r\n\t\t}\r\n\t\tfor(let [functionName,direction] of this.functions.entries()){\r\n\t\t\t// @ts-ignore\r\n\t\t\tthis.getReduxProps()[\"removeUnaryFunction\"](functionName, this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),direction);\r\n\t\t}\r\n\t}\r\n\r\n\tsetLabel(label: string) {\r\n\t\tthis.options.label = label;\r\n\t}\r\n\r\n\tgetName():string{\r\n\t\treturn this.options.name;\r\n\t}\r\n\r\n\tgetPredicates():Map<string,string>{\r\n\t\treturn this.predicates;\r\n\t}\r\n\r\n\tgetFunctions():Map<string,string>{\r\n\t\treturn this.functions;\r\n\t}\r\n\r\n\tsetLockedParent(bool:boolean){\r\n\t\tthis.getParent().setLocked(bool);\r\n\t}\r\n\r\n\tgetReduxProps(){\r\n\t\treturn this.getOptions().reduxProps;\r\n\t}\r\n\r\n\taddPredicate(name:string){\r\n\t\tname = name.replace(/\\s/g, \"\");\r\n\t\tif (!this.predicates.has(name)) {\r\n\t\t\tthis.addBinaryPredicateToSet(name);\r\n\t\t\t// @ts-ignore\r\n\t\t\tthis.getReduxProps()[\"addBinaryPredicate\"](name, this.getParent().getSourcePort().getNode().getNodeName(), this.getParent().getTargetPort().getNode().getNodeName(), this.predicates.get(name));\r\n\t\t}\r\n\t}\r\n\r\n\taddFunction(name:string){\r\n\t\tname = name.replace(/\\s/g, \"\");\r\n\t\tif (!this.functions.has(name)) {\r\n\t\t\tthis.addUnaryFunctionToSet(name);\r\n\t\t\tlet alreadyDefinedInFromDirection = functionIsAlreadyDefinedForGivenFunction(this.getNodeParameters(FROM),this.getFunctionValue(FROM),name+\"/1\",this.getReduxProps());\r\n\t\t\tlet alreadyDefinedInToDirection = functionIsAlreadyDefinedForGivenFunction(this.getNodeParameters(TO),this.getFunctionValue(TO),name+\"/1\",this.getReduxProps());\r\n\r\n\t\t\tif(alreadyDefinedInFromDirection){\r\n\t\t\t\tthis.setLanguageElementDirection(name,TO,this.functions);\r\n\t\t\t}\r\n\t\t\telse if(alreadyDefinedInToDirection){\r\n\t\t\t\tthis.setLanguageElementDirection(name,FROM,this.functions);\r\n\t\t\t}\r\n\t\t\t// @ts-ignore\r\n\t\t\tthis.getReduxProps()[\"addUnaryFunction\"](name,this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),this.functions.get(name));\r\n\t\t}\r\n\t}\r\n\r\n\taddBinaryPredicateToSet(name: string){\r\n\t\tthis.predicates.set(name,BOTH);\r\n\t\tthis.increaseChangeCounter();\r\n\t}\r\n\r\n\taddUnaryFunctionToSet(name: string){\r\n\t\tthis.functions.set(name,BOTH);\r\n\t\tthis.increaseChangeCounter();\r\n\t}\r\n\r\n\taddUnaryFunctionToSetWithDirection(name: string,direction: string){\r\n\t\tthis.functions.set(name,direction);\r\n\t\tthis.increaseChangeCounter();\r\n\t}\r\n\r\n\taddBinaryPredicateToSetWithDirection(name: string,direction: string){\r\n\t\tthis.predicates.set(name,direction);\r\n\t\tthis.increaseChangeCounter();\r\n\t}\r\n\r\n\tincreaseChangeCounter(){\r\n\t\tthis.changeCounter+=1;\r\n\t}\r\n\r\n\tisEditable(){\r\n\t\treturn this.editable;\r\n\t}\r\n\r\n\tremoveBinaryPredicateFromSet(name: string){\r\n\t\tthis.predicates.delete(name);\r\n\t\tthis.increaseChangeCounter();\r\n\t}\r\n\r\n\tremoveUnaryFunctionFromSet(name: string){\r\n\t\tthis.functions.delete(name);\r\n\t\tthis.increaseChangeCounter();\r\n\t}\r\n\r\n\tremoveFunction(name:string){\r\n\t\tif(this.functions.has(name)){\r\n\t\t\t// @ts-ignore\r\n\t\t\tthis.getReduxProps()[\"removeUnaryFunction\"](name,this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),this.functions.get(name));\r\n\t\t\tthis.removeUnaryFunctionFromSet(name);\r\n\t\t}\r\n\t}\r\n\r\n\tremovePredicate(name:string){\r\n\t\tif(this.predicates.has(name)){\r\n\t\t\t// @ts-ignore\r\n\t\t\tthis.getReduxProps()[\"removeBinaryPredicate\"](name,this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),this.predicates.get(name));\r\n\t\t\tthis.removeBinaryPredicateFromSet(name);\r\n\t\t}\r\n\t}\r\n\r\n\tchangeDirection(name:string,currentDirection:string,givenSet:Map<string,string>){\r\n\t\tif(currentDirection === BOTH){\r\n\t\t\tgivenSet.set(name,FROM);\r\n\t\t}\r\n\t\telse if(currentDirection === FROM){\r\n\t\t\tgivenSet.set(name,TO);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tgivenSet.set(name,BOTH);\r\n\t\t}\r\n\t}\r\n\r\n\tsetLanguageElementDirection(name:string,direction:string,givenSet:Map<string,string>){\r\n\t\tgivenSet.set(name,direction);\r\n\t}\r\n\r\n\tgetNodeParameters(direction:string):[string]{\r\n\t\tif(direction === FROM){\r\n\t\t\t// @ts-ignore\r\n\t\t\treturn [this.getSourceDomainNode().getNodeName()];\r\n\t\t}\r\n\t\telse if(direction === TO){\r\n\t\t\t// @ts-ignore\r\n\t\t\treturn [this.getTargetDomainNode().getNodeName()];\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tgetFunctionValue(direction:string):string{\r\n\t\tif(direction === FROM){\r\n\t\t\t// @ts-ignore\r\n\t\t\treturn this.getTargetDomainNode().getNodeName();\r\n\r\n\t\t}\r\n\t\telse if(direction === TO){\r\n\t\t\t// @ts-ignore\r\n\t\t\treturn this.getSourceDomainNode().getNodeName();\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\t//going from b -> f -> t\r\n\t//b - both\r\n\t//f - from => means it goes from this node to another (so this node is first parameter)\r\n\t//t - to => means it goes to this node from another (so this node is second parameter)\r\n\tchangeDirectionOfBinaryRelation(name:string,currentDirection:string,type:string){\r\n\t\tlet givenSet = type === PREDICATE?this.getPredicates():this.getFunctions();\r\n\r\n\t\tif(type === PREDICATE){\r\n\t\t\tthis.changeDirection(name,currentDirection,givenSet);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tlet currDirection:string = currentDirection;\r\n\t\t\twhile(true){\r\n\t\t\t\tthis.changeDirection(name,currDirection,givenSet);\r\n\t\t\t\tcurrDirection = givenSet.get(name);\r\n\t\t\t\tif(currDirection === currentDirection){\r\n\t\t\t\t\tthis.setLanguageElementDirection(name,currentDirection,givenSet);\r\n\t\t\t\t\t//hint ze nejde zmenit direction\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet alreadyDefinedForDirection;\r\n\t\t\t\tif(currDirection!==BOTH){\r\n\t\t\t\t\talreadyDefinedForDirection = functionIsAlreadyDefinedForGivenFunction(this.getNodeParameters(currDirection),this.getFunctionValue(currDirection),name+\"/1\",this.getReduxProps());\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\talreadyDefinedForDirection = functionIsAlreadyDefinedForGivenFunction(this.getNodeParameters(FROM),this.getFunctionValue(FROM),name+\"/1\",this.getReduxProps()) || functionIsAlreadyDefinedForGivenFunction(this.getNodeParameters(TO),this.getFunctionValue(TO),name+\"/1\",this.getReduxProps());\r\n\t\t\t\t}\r\n\t\t\t\tif(!alreadyDefinedForDirection){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.increaseChangeCounter();\r\n\t\t// @ts-ignore\r\n\t\tthis.getReduxProps()[\"changeDirectionOfBinaryRelation\"](name,this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),givenSet.get(name),type);\r\n\t}\r\n\r\n\tchangeEditableState(value:boolean){\r\n\t\tthis.editable = value;\r\n\t}\r\n\r\n\tdeserialize(event: DeserializeEvent<this>) {\r\n\t\tsuper.deserialize(event);\r\n\t\tthis.options.label = event.data.label;\r\n\t\tthis.editable = event.data.editable;\r\n\t\tthis.changeCounter = event.data.changeCounter;\r\n\t}\r\n\r\n\tserialize() {\r\n\t\treturn {\r\n\t\t\t...super.serialize(),\r\n\t\t\tlabel: this.options.label,\r\n\t\t\teditable: this.editable,\r\n\t\t\tchangeCounter: this.changeCounter\r\n\t\t};\r\n\t}\r\n}\r\n","import {BinaryLinkModel} from \"../links/binary/BinaryLinkModel\";\r\nimport {ADDPORT} from \"./ConstantNames\";\r\nimport {UnBinaryNodeModel} from \"./unbinary/UnBinaryNodeModel\";\r\nimport { PortModelAlignment, PortModel, LinkModel } from \"@projectstorm/react-diagrams\";\r\n\r\nexport class NaryRelationPortModel extends PortModel {\r\n    constructor(name:string =\"default\",alignment: PortModelAlignment = PortModelAlignment.LEFT) {\r\n        super({\r\n            type: 'nary',\r\n            name: name,\r\n            alignment: alignment\r\n        });\r\n    }\r\n\r\n    createLinkModel(): LinkModel {\r\n        if (this.getMaximumLinks() === 0) {\r\n            return null;\r\n        }\r\n        return new BinaryLinkModel();\r\n    }\r\n\r\n    canLinkToPort(port: PortModel): boolean {\r\n        return port.getNode() instanceof UnBinaryNodeModel && port.getName() !== ADDPORT;\r\n    }\r\n}","import {LinkModel, PortModelAlignment, PortModel} from '@projectstorm/react-diagrams';\r\nimport _ from \"lodash\";\r\nimport {ADDPORT} from \"../ConstantNames\";\r\nimport {BinaryLinkModel} from \"../../links/binary/BinaryLinkModel\";\r\nimport {NaryRelationPortModel} from \"../NaryRelationPortModel\";\r\n\r\nexport class ConstantPortModel extends PortModel {\r\n\tconstructor(name: string) {\r\n\t\tsuper({\r\n\t\t\ttype: 'constant',\r\n\t\t\tname: name,\r\n\t\t\talignment: PortModelAlignment.BOTTOM\r\n\t\t});\r\n\t}\r\n\r\n\tcreateLinkModel(): LinkModel {\r\n\t\tif (this.getMaximumLinks() === 0) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tthis.getParentCanvasModel().clearSelection();\r\n\t\treturn new BinaryLinkModel();\r\n\t}\r\n\r\n\tcanLinkToPort(port: PortModel): boolean {\r\n\t\tif(this.getParent() === port.getParent()){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(port.getParent().getOptions().type==='constant') {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(port instanceof NaryRelationPortModel){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(port.getName() === ADDPORT){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfor (let link of _.values(this.getLinks())) {\r\n\t\t\tif(link.getSourcePort() === this && link.getTargetPort() === port){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n","import {NodeModel, NodeModelGenerics} from '@projectstorm/react-diagrams';\r\nimport {ConstantPortModel} from './ConstantPortModel';\r\nimport { BasePositionModelOptions } from '@projectstorm/react-canvas-core';\r\nimport _ from 'lodash';\r\nimport {CONSTPORT} from \"../ConstantNames\";\r\nimport {BinaryLinkModel} from \"../../links/binary/BinaryLinkModel\";\r\n\r\nexport interface ConstantNodeModelGenerics {\r\n\tPORT: ConstantPortModel;\r\n\tOPTIONS: ConstantNodeModelOptions;\r\n}\r\n\r\nexport interface ConstantNodeModelOptions extends BasePositionModelOptions {\r\n\tname?: string;\r\n\tcolor?: string;\r\n\treduxProps?:any;\r\n}\r\n\r\nexport class ConstantNodeModel extends NodeModel<NodeModelGenerics & ConstantNodeModelGenerics> {\r\n\tmainPort:ConstantPortModel;\r\n\teditable:boolean;\r\n\r\n\tconstructor(name: string, color: string,reduxProps:any);\r\n\tconstructor(options?: ConstantNodeModelOptions);\r\n\tconstructor(options: any = {}, color?: string, reduxProps?:any) {\r\n\t\tif (typeof options === 'string') {\r\n\t\t\toptions = {\r\n\t\t\t\tname: options,\r\n\t\t\t\tpreviousName:options,\r\n\t\t\t\tcolor: color,\r\n\t\t\t\treduxProps:reduxProps\r\n\t\t\t};\r\n\t\t}\r\n\t\tsuper({\r\n\t\t\ttype: 'constant',\r\n\t\t\tname: 'Untitled',\r\n\t\t\tcolor: 'rgb(92,192,125)',\r\n\t\t\t...options\r\n\t\t});\r\n\r\n\t\tthis.mainPort = this.setUpConstantPort();\r\n\t\tthis.editable = reduxProps[\"editable\"];\r\n\t\tthis.registerEvents();\r\n\t}\r\n\r\n\tsetUpConstantPort(){\r\n\t\tlet port: ConstantPortModel = new ConstantPortModel(CONSTPORT);\r\n\t\tthis.addPort(port);\r\n\t\treturn port;\r\n\t}\r\n\r\n\tremoveAllLinks(){\r\n\t\tfor (let link of _.values(this.getMainPort().getLinks())) {\r\n\t\t\tlink.remove();\r\n\t\t}\r\n\t}\r\n\r\n\tgetReduxProps(){\r\n\t\treturn this.options.reduxProps;\r\n\t}\r\n\r\n\tisEditable():boolean{\r\n\t\treturn this.editable;\r\n\t}\r\n\r\n\tchangeEditableState(value:boolean){\r\n\t\tthis.editable = value;\r\n\t}\r\n\r\n\tsetConstantValueInMathView(domainNodeName:string){\r\n\t\tthis.options.reduxProps[\"setConstantValueFromLink\"](this.getNodeName(),domainNodeName);\r\n\t}\r\n\r\n\tremoveNodeFromMathView(){\r\n\t\tthis.options.reduxProps[\"removeConstantNode\"](this.getNodeName());\r\n\t}\r\n\r\n\r\n\tregisterEvents(){\r\n\t\tlet node = this;\r\n\t\tthis.registerListener({\r\n\t\t\tentityRemoved(event: any): void {\r\n\t\t\t\tfor (let link of _.values(node.getMainPort().getLinks())) {\r\n\t\t\t\t\tif(link instanceof BinaryLinkModel){\r\n\t\t\t\t\t\tlink.setCallReduxFunc(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnode.removeNodeFromMathView();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tgetMainPort(): ConstantPortModel {\r\n\t\treturn this.mainPort;\r\n\t}\r\n\r\n\tgetNodeName(){\r\n\t\treturn this.options.name;\r\n\t}\r\n\r\n\trenameNode(name:string){\r\n\t\tthis.options.name = name;\r\n\t}\r\n\r\n\tremovePort(port: ConstantPortModel): void {\r\n\t\tfor (let link of _.values(port.getLinks())) {\r\n\t\t\tlink.remove();\r\n\t\t}\r\n\t\t//clear the parent node reference\r\n\t\tif (this.ports[port.getName()]) {\r\n\t\t\tthis.ports[port.getName()].setParent(null);\r\n\t\t\tdelete this.ports[port.getName()];\r\n\t\t}\r\n\t}\r\n\r\n\tserialize() {\r\n\t\treturn {\r\n\t\t\t...super.serialize(),\r\n\t\t\teditable: this.editable\r\n\t\t};\r\n\t}\r\n\r\n\tdeserialize(event: any) {\r\n\t\tsuper.deserialize(event);\r\n\t\tthis.editable = event.data.editable;\r\n\t}\r\n}\r\n","import {BasePositionModelOptions} from \"@projectstorm/react-canvas-core\";\r\nimport {NodeModel, NodeModelGenerics, PortModelAlignment} from \"@projectstorm/react-diagrams\";\r\nimport {UnBinaryPortModel} from \"./unbinary/UnBinaryPortModel\";\r\nimport _ from \"lodash\";\r\nimport {NaryRelationPortModel} from \"./NaryRelationPortModel\";\r\nimport {UnBinaryNodeModel} from \"./unbinary/UnBinaryNodeModel\";\r\nimport {ADDPORT, FUNCTION, PREDICATE} from \"./ConstantNames\";\r\nimport {functionIsAlreadyDefinedForGivenFunction} from \"./functions\";\r\n\r\nexport interface BaseNodeModelGenerics {\r\n    PORT: NaryRelationPortModel;\r\n    OPTIONS: BaseNodeModelOptions;\r\n}\r\n\r\nexport interface BaseNodeModelOptions extends BasePositionModelOptions {\r\n    name?: string;\r\n    color?: string;\r\n    numberOfPorts: number;\r\n    reduxProps:any;\r\n}\r\n\r\nexport class BaseNodeModel extends NodeModel<NodeModelGenerics & BaseNodeModelGenerics> {\r\n    changeCounter: number;\r\n    editable:boolean;\r\n    predicates: Set<string>;\r\n    functions: Set<string>;\r\n    parameterPorts: Map<NaryRelationPortModel,UnBinaryNodeModel>;\r\n    parameterPortsArray: Array<NaryRelationPortModel>;\r\n    appendPort: NaryRelationPortModel;\r\n\r\n    constructor(options?: BaseNodeModelOptions);\r\n    constructor(options: any = {}) {\r\n        super({\r\n            ...options\r\n        });\r\n\r\n        this.changeCounter = 0;\r\n        this.predicates = new Set();\r\n        this.functions = new Set();\r\n        this.parameterPorts = new Map<NaryRelationPortModel,UnBinaryNodeModel>();\r\n        this.parameterPortsArray = new Array<NaryRelationPortModel>(this.getNumberOfPorts());\r\n        this.editable = this.getReduxProps()[\"editable\"];\r\n        this.registerEvents();\r\n        this.registerParameterPorts();\r\n        this.registerAppendPort();\r\n    }\r\n\r\n    registerParameterPorts(){\r\n        let directions = [PortModelAlignment.LEFT,PortModelAlignment.RIGHT,PortModelAlignment.TOP,PortModelAlignment.BOTTOM];\r\n        for(let i = 0;i<this.getNumberOfPorts();i++){\r\n            let port = this.addPort(new NaryRelationPortModel(\"port\"+i,directions[i]));\r\n            this.parameterPorts.set(port,null);\r\n            this.parameterPortsArray[i] = port;\r\n        }\r\n    }\r\n\r\n    getNodeNameCombination(){\r\n        let value:any = [];\r\n        for(let i = 0; i<this.parameterPortsArray.length;i++){\r\n            let portValue:UnBinaryNodeModel = this.parameterPorts.get(this.parameterPortsArray[i]);\r\n            if(!portValue){\r\n                return null;\r\n            }\r\n            value.push(portValue.getNodeName());\r\n        }\r\n        return value;\r\n    }\r\n\r\n    getNodeParameters(){\r\n        let value:any = [];\r\n        for(let i = 0; i<this.parameterPortsArray.length;i++){\r\n            let portValue:UnBinaryNodeModel = this.parameterPorts.get(this.parameterPortsArray[i]);\r\n            if(!portValue){\r\n                return null;\r\n            }\r\n            if(i!==this.parameterPortsArray.length-1){\r\n                value.push(portValue.getNodeName());\r\n            }\r\n        }\r\n        return value;\r\n    }\r\n\r\n    getFunctionValue():string{\r\n        if(this.getNodeNameCombination()){\r\n            return this.parameterPorts.get(this.parameterPortsArray[this.parameterPortsArray.length-1]).getNodeName();\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getValueOfPort(port:NaryRelationPortModel){\r\n        if(this.parameterPorts.has(port)){\r\n            return this.parameterPorts.get(port);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getValueNameOfPort(port:NaryRelationPortModel){\r\n        if(this.parameterPorts.has(port)){\r\n            return this.parameterPorts.get(port).getNodeName();\r\n        }\r\n        return null;\r\n    }\r\n\r\n    removeValueFromPort(port:NaryRelationPortModel){\r\n        this.parameterPorts.set(port,null);\r\n    }\r\n\r\n    setValueToPort(port:NaryRelationPortModel,valueNode:UnBinaryNodeModel){\r\n        this.parameterPorts.set(port,valueNode);\r\n    }\r\n\r\n    increaseChangeCounter(){\r\n        this.changeCounter+=1;\r\n    }\r\n\r\n    getNumberOfPorts(){\r\n        return this.getOptions().numberOfPorts;\r\n    }\r\n\r\n    clearPredicates() {\r\n        this.predicates = new Set();\r\n        this.increaseChangeCounter();\r\n    }\r\n\r\n    clearFunctions() {\r\n        this.functions = new Set();\r\n        this.increaseChangeCounter();\r\n    }\r\n\r\n    getPredicates() {\r\n        return this.predicates;\r\n    }\r\n\r\n    getFunctions(){\r\n        return this.functions;\r\n    }\r\n\r\n    removePort(port: UnBinaryPortModel): void {\r\n        for (let link of _.values(port.getLinks())) {\r\n            link.remove();\r\n        }\r\n        //clear the parent node reference\r\n        if (this.ports[port.getName()]) {\r\n            this.ports[port.getName()].setParent(null);\r\n            delete this.ports[port.getName()];\r\n        }\r\n    }\r\n\r\n    serialize() {\r\n        return {\r\n            ...super.serialize(),\r\n            changeCounter: this.changeCounter,\r\n            editable: this.editable\r\n        };\r\n    }\r\n\r\n    getPortByIndex(index:number){\r\n        if(index<0 || index>= this.getNumberOfPorts()){\r\n            return null;\r\n        }\r\n        return this.parameterPortsArray[index];\r\n    }\r\n\r\n    deserialize(event: any) {\r\n        super.deserialize(event);\r\n        this.changeCounter = event.date.changeCounter;\r\n        this.editable = event.data.editable;\r\n    }\r\n\r\n    registerEvents() {\r\n        let node = this;\r\n        this.registerListener({\r\n            entityRemoved(): void {\r\n                node.removeNodeFromMathView();\r\n                node.removeNodeFromGraphView();\r\n            }\r\n        })\r\n    }\r\n\r\n    removeNodeFromGraphView(){\r\n        throw new Error(\"This method should be implemented in child\");\r\n    }\r\n\r\n    changeEditableState(value:boolean){\r\n        this.editable = value;\r\n    }\r\n\r\n    getNodeName() {\r\n        return this.getOptions().name;\r\n    }\r\n\r\n    getAppendPort(){\r\n        return this.appendPort;\r\n    }\r\n\r\n    renameNode(name: string) {\r\n        this.getOptions().name = name;\r\n    }\r\n\r\n    isEditable():boolean{\r\n        return this.editable;\r\n    }\r\n\r\n    addPredicateToSet(name: string){\r\n        this.predicates.add(name);\r\n        this.increaseChangeCounter();\r\n    }\r\n\r\n    addFunctionToSet(name: string){\r\n        this.functions.add(name);\r\n        this.increaseChangeCounter();\r\n    }\r\n\r\n    removePredicateFromSet(name: string){\r\n        this.predicates.delete(name);\r\n        this.increaseChangeCounter();\r\n    }\r\n\r\n    removeFunctionFromSet(name: string){\r\n        this.functions.delete(name);\r\n        this.increaseChangeCounter();\r\n    }\r\n\r\n    addPredicate(name:string){\r\n        name = name.replace(/\\s/g, \"\");\r\n        if (!this.predicates.has(name)) {\r\n            this.addPredicateToSet(name);\r\n            this.addElementToMathView(name,PREDICATE);\r\n        }\r\n    }\r\n\r\n    addFunction(name: string) {\r\n        name = name.replace(/\\s/g, \"\");\r\n        if (!this.functions.has(name)) {\r\n            this.addFunctionToSet(name);\r\n            this.addElementToMathView(name,FUNCTION);\r\n        }\r\n    }\r\n\r\n    removePredicate(name:string){\r\n        if(this.predicates.has(name)){\r\n            this.removeElementFromMathView(name,PREDICATE);\r\n        }\r\n        this.removePredicateFromSet(name);\r\n    }\r\n\r\n    removeFunction(name:string){\r\n        if(this.functions.has(name)){\r\n            this.removeElementFromMathView(name,FUNCTION);\r\n        }\r\n        this.removeFunctionFromSet(name);\r\n    }\r\n\r\n    removeNodeFromMathView(){\r\n        for(let predicate of this.getPredicates()){\r\n            this.removeElementFromMathView(predicate,PREDICATE);\r\n        }\r\n        for(let func of this.getFunctions()){\r\n            this.removeElementFromMathView(func,FUNCTION);\r\n        }\r\n    }\r\n\r\n    representNodeInMathView(){\r\n        for(let predicate of this.getPredicates()){\r\n            this.addElementToMathView(predicate,PREDICATE);\r\n        }\r\n        let functionsToDelete:Set<string> = new Set();\r\n        for(let func of this.getFunctions()){\r\n            if(!functionIsAlreadyDefinedForGivenFunction(this.getNodeParameters(),this.getFunctionValue(),func+\"/\"+(this.getNumberOfPorts()-1).toString(),this.getReduxProps())){\r\n                this.addElementToMathView(func,FUNCTION);\r\n            }\r\n            else{\r\n                functionsToDelete.add(func);\r\n            }\r\n        }\r\n        for(let func of functionsToDelete){\r\n            this.removeFunctionFromSet(func);\r\n        }\r\n    }\r\n\r\n    addElementToMathView(name:string,type:string){\r\n        throw new Error(\"This method should be implemented in child\");\r\n    }\r\n\r\n    removeElementFromMathView(name:string,type:string){\r\n        throw new Error(\"This method should be implemented in child\");\r\n    }\r\n\r\n    getReduxProps(){\r\n        return this.getOptions().reduxProps;\r\n    }\r\n\r\n    registerAppendPort() {\r\n        let port = new NaryRelationPortModel(ADDPORT);\r\n        port.setMaximumLinks(0);\r\n        this.addPort(port);\r\n        this.appendPort = port;\r\n    }\r\n}","import {BaseNodeModel, BaseNodeModelOptions} from \"../BaseNodeModel\";\r\nimport {PREDICATE} from \"../ConstantNames\";\r\n\r\nexport class TernaryNodeModel extends BaseNodeModel {\r\n\r\n\tconstructor(options?: BaseNodeModelOptions);\r\n\tconstructor(options: any = {}) {\r\n\t\tsuper({\r\n\t\t\ttype: 'ternary',\r\n\t\t\t...options\r\n\t\t});\r\n\t}\r\n\r\n\tremoveElementFromMathView(name: string, type: string) {\r\n\t\tlet removeElementFunction = type === PREDICATE?this.getReduxProps()[\"removeTernaryPredicate\"]:this.getReduxProps()[\"removeBinaryFunction\"];\r\n\t\tremoveElementFunction(name,this.getNodeNameCombination());\r\n\t}\r\n\r\n\taddElementToMathView(name:string,type:string){\r\n\t\tlet addElementFunction = type === PREDICATE?this.getReduxProps()[\"addTernaryPredicate\"]:this.getReduxProps()[\"addBinaryFunction\"];\r\n\t\taddElementFunction(name,this.getNodeNameCombination());\r\n\t}\r\n\r\n\tremoveNodeFromGraphView(){\r\n\t\tthis.getReduxProps()[\"removeTernaryNode\"](this.getNodeName());\r\n\t}\r\n}\r\n","import {BaseNodeModel, BaseNodeModelOptions} from \"../BaseNodeModel\";\r\nimport {PREDICATE} from \"../ConstantNames\";\r\n\r\nexport class QuaternaryNodeModel extends BaseNodeModel {\r\n\r\n\tconstructor(options?: BaseNodeModelOptions);\r\n\tconstructor(options: any = {}) {\r\n\t\tsuper({\r\n\t\t\ttype: 'quaternary',\r\n\t\t\t...options\r\n\t\t});\r\n\t}\r\n\r\n\tremoveElementFromMathView(name: string, type: string) {\r\n\t\tlet removeElementFunction = type === PREDICATE?this.getReduxProps()[\"removeQuaternaryPredicate\"]:this.getReduxProps()[\"removeTernaryFunction\"];\r\n\t\tremoveElementFunction(name,this.getNodeNameCombination());\r\n\t}\r\n\r\n\taddElementToMathView(name:string,type:string){\r\n\t\tlet addElementFunction = type === PREDICATE?this.getReduxProps()[\"addQuaternaryPredicate\"]:this.getReduxProps()[\"addTernaryFunction\"];\r\n\t\taddElementFunction(name,this.getNodeNameCombination());\r\n\t}\r\n\r\n\tremoveNodeFromGraphView(){\r\n\t\tthis.getReduxProps()[\"removeQuaternaryNode\"](this.getNodeName());\r\n\t}\r\n}\r\n","import {\r\n\tLabelModel,\r\n\tLinkModel,\r\n\tLinkModelGenerics,\r\n\tLinkModelListener,\r\n\tPortModel,\r\n\tPortModelAlignment\r\n} from '@projectstorm/react-diagrams-core';\r\nimport { BezierCurve } from '@projectstorm/geometry';\r\nimport { BaseEntityEvent, BaseModelOptions, DeserializeEvent } from '@projectstorm/react-canvas-core';\r\nimport {BinaryLabelModel} from \"../../labels/binary/BinaryLabelModel\";\r\nimport {UnBinaryNodeModel} from \"../../nodes/unbinary/UnBinaryNodeModel\";\r\nimport {ConstantNodeModel} from \"../../nodes/constant/ConstantNodeModel\";\r\nimport {ConstantPortModel} from \"../../nodes/constant/ConstantPortModel\";\r\nimport {BASIC_CURVYNESS} from \"../../nodes/ConstantNames\";\r\nimport {BaseNodeModel} from \"../../nodes/BaseNodeModel\";\r\nimport {TernaryNodeModel} from \"../../nodes/ternary/TernaryNodeModel\";\r\nimport {QuaternaryNodeModel} from \"../../nodes/quaternary/QuaternaryNodeModel\";\r\nimport {NaryRelationPortModel} from \"../../nodes/NaryRelationPortModel\";\r\nimport { DiagramModel } from '@projectstorm/react-diagrams';\r\nimport {selectOnlyCurrentGraphElement} from \"../../nodes/functions\";\r\n\r\nexport interface BinaryLinkModelListener extends LinkModelListener {\r\n\t// @ts-ignore\r\n\tcolorChanged?(event: BaseEntityEvent<BinaryLinkModel> & { color: null | string }): void;\r\n\r\n\t// @ts-ignore\r\n\twidthChanged?(event: BaseEntityEvent<BinaryLinkModel> & { width: 0 | number }): void;\r\n\r\n\t// @ts-ignore\r\n\tentityRemoved?(event: BaseEntityEvent<BinaryLinkModel>): void;\r\n}\r\n\r\nexport interface BinaryLinkModelOptions extends BaseModelOptions {\r\n\twidth?: number;\r\n\tcolor?: string;\r\n\tselectedColor?: string;\r\n\tcurvyness?: number;\r\n\ttype?: string;\r\n\ttestName?: string;\r\n}\r\n\r\nexport interface BinaryLinkModelGenerics extends LinkModelGenerics {\r\n\tLISTENER: BinaryLinkModelListener;\r\n\tOPTIONS: BinaryLinkModelOptions;\r\n}\r\n\r\nexport class BinaryLinkModel extends LinkModel<BinaryLinkModelGenerics> {\r\n\tlabel:BinaryLabelModel;\r\n\tcallReduxFunc:boolean;\r\n\tchangeCounter: number;\r\n\r\n\tconstructor(options: BinaryLinkModelOptions = {},canCallReduxFunc:boolean = true) {\r\n\t\tsuper({\r\n\t\t\ttype: 'binary',\r\n\t\t\twidth: options.width || 3,\r\n\t\t\tcolor: options.color || 'gray',\r\n\t\t\tselectedColor: options.selectedColor || 'rgb(0,192,255)',\r\n\t\t\tcurvyness: 0,\r\n\t\t\t...options\r\n\t\t});\r\n\r\n\t\tthis.changeCounter = 0;\r\n\t\tthis.callReduxFunc = canCallReduxFunc;\r\n\t\tlet link:BinaryLinkModel = this;\r\n\t\tlet removeLinkIfCondition = (port:PortModel,link:LinkModel) =>{\r\n\t\t\tlet numberOfLinks: number = Object.keys(port.getLinks()).length;\r\n\t\t\tif (numberOfLinks > 1) {\r\n\t\t\t\tfor (let linkObject of Object.values(port.getLinks())) {\r\n\t\t\t\t\tif (linkObject !== link) {\r\n\t\t\t\t\t\tlinkObject.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet existNodeWithSameCombination = (nodeCombination:[string],diagramModel:DiagramModel,naryNode:BaseNodeModel) => {\r\n\t\t\tfor(let node of Object.values(diagramModel.getNodes())){\r\n\t\t\t\tif((node instanceof TernaryNodeModel || node instanceof QuaternaryNodeModel) && naryNode !== node){\r\n\t\t\t\t\tif(JSON.stringify(node.getNodeNameCombination()) === JSON.stringify(nodeCombination)){\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\t\t// @ts-ignore\r\n\t\tthis.registerListener({\r\n\t\t\ttargetPortChanged(event: BaseEntityEvent<LinkModel> & { port: PortModel | null }): void {\r\n\t\t\t\tif (link.getTargetPort() === null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet sourceNode = link.getSourcePort().getNode();\r\n\t\t\t\tlet targetNode = link.getTargetPort().getNode();\r\n\r\n\t\t\t\tif (sourceNode instanceof UnBinaryNodeModel && targetNode instanceof UnBinaryNodeModel) {\r\n\t\t\t\t\tif(sourceNode === targetNode) {\r\n\t\t\t\t\t\tlink.getOptions().curvyness = BASIC_CURVYNESS;\r\n\t\t\t\t\t\tsourceNode.canSelectNode = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tlink.label = new BinaryLabelModel({},sourceNode.getOptions().reduxProps,sourceNode.getNodeName()+\" - \"+targetNode.getNodeName());\r\n\t\t\t\t\tlink.addLabel(link.label);\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t} else if ((sourceNode instanceof UnBinaryNodeModel && targetNode instanceof ConstantNodeModel) || (targetNode instanceof UnBinaryNodeModel && sourceNode instanceof ConstantNodeModel)) {\r\n\t\t\t\t\tlet constantNode: ConstantNodeModel = sourceNode instanceof ConstantNodeModel ? sourceNode : targetNode instanceof ConstantNodeModel ? targetNode : null;\r\n\t\t\t\t\tlet unbinaryNode: UnBinaryNodeModel = sourceNode instanceof UnBinaryNodeModel ? sourceNode : targetNode instanceof UnBinaryNodeModel ? targetNode : null;\r\n\r\n\t\t\t\t\tlet constantPort: ConstantPortModel = constantNode.getMainPort();\r\n\r\n\t\t\t\t\tif (constantPort === null || constantPort === undefined) {\r\n\t\t\t\t\t\tthrow new Error(\"Constant port can not be null, probably problem in initialization\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tremoveLinkIfCondition(constantPort,link);\r\n\r\n\t\t\t\t\t//When link is created through Redux Action, another Action would be called and error would be thrown, so if it is created with some Redux Action we will not allow this Action to be dispatched\r\n\t\t\t\t\tif(link.isCallReduxFunc()){\r\n\t\t\t\t\t\tconstantNode.setConstantValueInMathView(unbinaryNode.getNodeName());\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tlink.setCallReduxFunc(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse if((sourceNode instanceof UnBinaryNodeModel && (targetNode instanceof TernaryNodeModel || targetNode instanceof QuaternaryNodeModel)) || ((sourceNode instanceof TernaryNodeModel || sourceNode instanceof QuaternaryNodeModel) && targetNode instanceof UnBinaryNodeModel)){\r\n\t\t\t\t\tlet unbinaryNode: UnBinaryNodeModel = sourceNode instanceof UnBinaryNodeModel ? sourceNode : targetNode instanceof UnBinaryNodeModel ? targetNode : null;\r\n\t\t\t\t\tlet naryNode:BaseNodeModel = (sourceNode instanceof TernaryNodeModel || sourceNode instanceof QuaternaryNodeModel)?sourceNode:(targetNode instanceof TernaryNodeModel || targetNode instanceof QuaternaryNodeModel)?targetNode:null;\r\n\t\t\t\t\tlet naryPort: NaryRelationPortModel = link.getSourcePort() instanceof NaryRelationPortModel?link.getSourcePort():link.getTargetPort() instanceof NaryRelationPortModel?link.getTargetPort():null;\r\n\t\t\t\t\tlet previousCombination:any = naryNode.getNodeNameCombination();\r\n\r\n\t\t\t\t\tif(naryNode && previousCombination){\r\n\t\t\t\t\t\tnaryNode.removeNodeFromMathView();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tremoveLinkIfCondition(naryPort,link);\r\n\t\t\t\t\tnaryNode.setValueToPort(naryPort,unbinaryNode);\r\n\t\t\t\t\tlet naryNodeCombination = naryNode.getNodeNameCombination();\r\n\t\t\t\t\tif(naryNodeCombination){\r\n\t\t\t\t\t\tif(existNodeWithSameCombination(naryNodeCombination,link.getSourcePort().getNode().getParent(),naryNode)){\r\n\t\t\t\t\t\t\tlink.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tnaryNode.representNodeInMathView();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tentityRemoved(event:any): void {\r\n\t\t\t\tif(!link.isCallReduxFunc() || !link.getTargetPort()){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet sourceNode = link.getSourcePort().getNode();\r\n\t\t\t\tlet targetNode = link.getTargetPort().getNode();\r\n\r\n\t\t\t\tlet constantNode: ConstantNodeModel = sourceNode  instanceof ConstantNodeModel ? sourceNode : targetNode instanceof ConstantNodeModel ? targetNode : null;\r\n\t\t\t\tlet naryNode:BaseNodeModel = (sourceNode instanceof TernaryNodeModel || sourceNode instanceof QuaternaryNodeModel)?sourceNode:(targetNode instanceof TernaryNodeModel || targetNode instanceof QuaternaryNodeModel)?targetNode:null;\r\n\r\n\r\n\t\t\t\tif(constantNode){\r\n\t\t\t\t\tconstantNode.setConstantValueInMathView(\"\");\r\n\t\t\t\t}\r\n\t\t\t\telse if(naryNode){\r\n\t\t\t\t\tlet naryPort:NaryRelationPortModel = targetNode === naryNode?link.getTargetPort():link.getSourcePort();\r\n\t\t\t\t\tif(naryNode.getNodeNameCombination()){\r\n\t\t\t\t\t\tnaryNode.removeNodeFromMathView();\r\n\t\t\t\t\t\tnaryNode.removeValueFromPort(naryPort);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tif(link.label){\r\n\t\t\t\t\t\tlink.label.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetCurvyness(num:number){\r\n\t\tthis.getOptions().curvyness = num;\r\n\t}\r\n\r\n\tincreaseChangeCounter(){\r\n\t\tthis.changeCounter+=1;\r\n\t}\r\n\r\n\tsetCallReduxFunc(value:boolean){\r\n\t\tthis.callReduxFunc = value;\r\n\t}\r\n\r\n\tisCallReduxFunc(){\r\n\t\treturn this.callReduxFunc;\r\n\t}\r\n\r\n\tcalculateControlOffset(port: PortModel): [number, number] {\r\n\t\tif (port.getOptions().alignment === PortModelAlignment.RIGHT) {\r\n\t\t\treturn [this.options.curvyness, 0];\r\n\t\t} else if (port.getOptions().alignment === PortModelAlignment.LEFT) {\r\n\t\t\treturn [-this.options.curvyness, 0];\r\n\t\t} else if (port.getOptions().alignment === PortModelAlignment.TOP) {\r\n\t\t\treturn [0, -this.options.curvyness];\r\n\t\t}\r\n\t\treturn [0, this.options.curvyness];\r\n\t}\r\n\r\n\tgetLabel(){\r\n\t\treturn this.label;\r\n\t}\r\n\r\n\tgetSVGPath(): string {\r\n\t\tif (this.points.length == 2) {\r\n\t\t\tconst curve = new BezierCurve();\r\n\t\t\tcurve.setSource(this.getFirstPoint().getPosition());\r\n\t\t\tcurve.setTarget(this.getLastPoint().getPosition());\r\n\t\t\tcurve.setSourceControl(\r\n\t\t\t\tthis.getFirstPoint()\r\n\t\t\t\t\t.getPosition()\r\n\t\t\t\t\t.clone()\r\n\t\t\t);\r\n\t\t\tcurve.setTargetControl(\r\n\t\t\t\tthis.getLastPoint()\r\n\t\t\t\t\t.getPosition()\r\n\t\t\t\t\t.clone()\r\n\t\t\t);\r\n\r\n\t\t\tif (this.sourcePort) {\r\n\t\t\t\tcurve.getSourceControl().translate(...this.calculateControlOffset(this.getSourcePort()));\r\n\t\t\t}\r\n\r\n\t\t\tif (this.targetPort) {\r\n\t\t\t\tcurve.getTargetControl().translate(...this.calculateControlOffset(this.getTargetPort()));\r\n\t\t\t}\r\n\t\t\treturn curve.getSVGCurve();\r\n\t\t}\r\n\t}\r\n\r\n\tclearLabels() {\r\n\t\tif (this.label) {\r\n\t\t\tlet label = new BinaryLabelModel({},this.label.getReduxProps());\r\n\r\n\t\t\tlabel.changeCounter = this.label.changeCounter;\r\n\t\t\tlabel.predicates = this.label.predicates;\r\n\t\t\tlabel.editable = this.label.editable;\r\n\r\n\t\t\tthis.label.setParent(null);\r\n\t\t\tdelete this.label;\r\n\r\n\t\t\tthis.labels = [];\r\n\r\n\t\t\tthis.label = label;\r\n\t\t}\r\n\t}\r\n\r\n\tserialize() {\r\n\t\treturn {\r\n\t\t\t...super.serialize(),\r\n\t\t\twidth: this.options.width,\r\n\t\t\tcolor: this.options.color,\r\n\t\t\tcurvyness: this.options.curvyness,\r\n\t\t\tselectedColor: this.options.selectedColor,\r\n\t\t\tchangeCounter: this.changeCounter\r\n\t\t};\r\n\t}\r\n\r\n\tdeserialize(event: DeserializeEvent<this>) {\r\n\t\tsuper.deserialize(event);\r\n\t\tthis.options.color = event.data.color;\r\n\t\tthis.options.width = event.data.width;\r\n\t\tthis.options.curvyness = event.data.curvyness;\r\n\t\tthis.options.selectedColor = event.data.selectedColor;\r\n\t\tthis.changeCounter = event.data.changeCounter;\r\n\t}\r\n\r\n\taddLabel(label: LabelModel | string) {\r\n\t\tif (label instanceof LabelModel) {\r\n\t\t\t\treturn super.addLabel(label);\r\n\t\t\t}\r\n\t\tlet labelOb = new BinaryLabelModel();\r\n\t\tlabelOb.setLabel(label);\r\n\t\treturn super.addLabel(labelOb);\r\n\t}\r\n\r\n\tsetWidth(width: number) {\r\n\t\tthis.options.width += width;\r\n\t\tthis.fireEvent({ width }, 'widthChanged');\r\n\t}\r\n\r\n\tsetColor(color: string) {\r\n\t\tthis.options.color = color;\r\n\t\tthis.fireEvent({ color }, 'colorChanged');\r\n\t}\r\n\r\n\tremove() {\r\n\t\tif (this.sourcePort) {\r\n\t\t\tthis.sourcePort.removeLink(this);\r\n\t\t}\r\n\t\tif (this.targetPort) {\r\n\t\t\tthis.targetPort.removeLink(this);\r\n\t\t}\r\n\t\tsuper.remove();\r\n\t}\r\n}\r\n","import {LinkModel, PortModelAlignment, PortModel} from '@projectstorm/react-diagrams';\r\nimport _ from \"lodash\";\r\nimport {BinaryLinkModel} from \"../../links/binary/BinaryLinkModel\";\r\nimport {ADDPORT} from \"../ConstantNames\";\r\n\r\nexport class UnBinaryPortModel extends PortModel {\r\n\tconstructor(name: string) {\r\n\t\tsuper({\r\n\t\t\ttype: 'unbinary',\r\n\t\t\tname: name,\r\n\t\t\talignment: PortModelAlignment.LEFT\r\n\t\t});\r\n\t}\r\n\r\n\tsetPortAlignment(alignment:PortModelAlignment){\r\n\t\tthis.getOptions().alignment = alignment;\r\n\t}\r\n\r\n\tcreateLinkModel(): LinkModel {\r\n\t\tif(this.getMaximumLinks()=== 0){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn new BinaryLinkModel();\r\n\t}\r\n\r\n\tremoveBadLink(){\r\n\t\tfor (let link of _.values(this.getLinks())) {\r\n\t\t\tif (link.getSourcePort() !== null && link.getTargetPort() === null) {\r\n\t\t\t\tlink.remove();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcanLinkToPort(port: PortModel): boolean {\r\n\t\tfor (let link of _.values(this.getLinks())) {\r\n\t\t\tif ((link.getSourcePort() === this && link.getTargetPort() === port) || (link.getSourcePort() === port && link.getTargetPort() === this)) {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tthis.getParent().canSelectNode = false;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.getParent() === port.getParent()) {\r\n\t\t\treturn this !== port;\r\n\t\t}\r\n\r\n\t\tif(port.getName() === ADDPORT){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(port.getParent().getOptions().type==='constant') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\taddLink(link: LinkModel) {\r\n\t\tthis.links[link.getID()] = link;\r\n\t}\r\n\r\n}\r\n","import {NodeModel, NodeModelGenerics} from '@projectstorm/react-diagrams';\r\nimport {UnBinaryPortModel} from './UnBinaryPortModel';\r\nimport {BasePositionModelOptions} from '@projectstorm/react-canvas-core';\r\nimport _ from 'lodash';\r\nimport {ADDPORT, MAINPORT} from \"../ConstantNames\";\r\n\r\nexport interface UnBinaryNodeModelGenerics {\r\n\tPORT: UnBinaryPortModel;\r\n\tOPTIONS: UnBinaryNodeModelOptions;\r\n}\r\n\r\nexport interface UnBinaryNodeModelOptions extends BasePositionModelOptions {\r\n\tname?: string;\r\n\tcolor?: string;\r\n\treduxProps:any;\r\n\tdomainNodeName:any;\r\n}\r\n\r\nexport class UnBinaryNodeModel extends NodeModel<NodeModelGenerics & UnBinaryNodeModelGenerics> {\r\n\tchangeCounter: number;\r\n\tunaryPredicates: Set<string>;\r\n\tappendPort: UnBinaryPortModel;\r\n\tmainPort: UnBinaryPortModel;\r\n\teditable:boolean;\r\n\tcanSelectNode:boolean;\r\n\r\n\tconstructor(name: string, color: string, reduxProps: any);\r\n\tconstructor(options?: UnBinaryNodeModelOptions);\r\n\tconstructor(options: any = {}, color?: string, reduxProps?: any) {\r\n\t\tif (typeof options === 'string') {\r\n\t\t\toptions = {\r\n\t\t\t\tname: options,\r\n\t\t\t\tcolor: color,\r\n\t\t\t\treduxProps: reduxProps,\r\n\t\t\t};\r\n\t\t}\r\n\t\tsuper({\r\n\t\t\ttype: 'unbinary',\r\n\t\t\tname: 'Untitled',\r\n\t\t\tcolor: 'rgb(92,192,125)',\r\n\t\t\t...options\r\n\t\t});\r\n\t\tthis.addTemplatePorts();\r\n\t\tthis.registerEvents();\r\n\t\tthis.changeCounter = 0;\r\n\t\tthis.unaryPredicates = new Set();\r\n\t\tthis.canSelectNode = true;\r\n\t\tthis.editable = reduxProps[\"editable\"];\r\n\t}\r\n\r\n\taddPredicate(name:string){\r\n\t\tthis.addUnaryPredicate(name);\r\n\t}\r\n\r\n\tgetReduxProps(){\r\n\t\treturn this.getOptions().reduxProps;\r\n\t}\r\n\r\n\tgetPredicates(){\r\n\t\treturn this.unaryPredicates;\r\n\t}\r\n\r\n\tgetMainPort():UnBinaryPortModel{\r\n\t\treturn this.mainPort;\r\n\t}\r\n\r\n\tisEditable():boolean{\r\n\t\treturn this.editable;\r\n\t}\r\n\r\n\tchangeEditableState(value:boolean){\r\n\t\tthis.editable = value;\r\n\t}\r\n\r\n\taddTemplatePorts() {\r\n\t\tlet port:UnBinaryPortModel = new UnBinaryPortModel(ADDPORT);\r\n\t\tthis.appendPort = port;\r\n\t\tport.setMaximumLinks(0);\r\n\t\tthis.addPort(port);\r\n\r\n\t\tport = new UnBinaryPortModel(MAINPORT);\r\n\t\t//port.setPortAlignment(PortModelAlignment.TOP);\r\n\t\tthis.mainPort = port;\r\n\t\tthis.addPort(port);\r\n\t}\r\n\r\n\tregisterEvents() {\r\n\t\tlet node = this;\r\n\t\tthis.registerListener({\r\n\t\t\tentityRemoved(): void {\r\n\t\t\t\tnode.removeNodeFromMathView();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tclearPredicates() {\r\n\t\tthis.unaryPredicates = new Set();\r\n\t\tthis.increaseChangeCounter();\r\n\t}\r\n\r\n\tgetUnaryPredicates() {\r\n\t\treturn this.unaryPredicates;\r\n\t}\r\n\r\n\tincreaseChangeCounter(){\r\n\t\tthis.changeCounter+=1;\r\n\t}\r\n\r\n\taddUnaryPredicateToSet(name: string){\r\n\t\tthis.unaryPredicates.add(name);\r\n\t\tthis.increaseChangeCounter();\r\n\t}\r\n\r\n\taddUnaryPredicate(name: string) {\r\n\t\tname = name.replace(/\\s/g, \"\");\r\n\t\tif (!this.unaryPredicates.has(name)) {\r\n\t\t\tthis.getReduxProps()[\"addUnaryPredicate\"](name, this.getNodeName());\r\n\t\t\tthis.addUnaryPredicateToSet(name);\r\n\t\t}\r\n\t}\r\n\r\n\tremoveUnaryPredicate(name: string) {\r\n\t\tif (this.unaryPredicates.has(name)) {\r\n\t\t\tthis.removeUnaryPredicateFromSet(name);\r\n\t\t\tthis.getReduxProps()[\"removeUnaryPredicate\"](name, this.getNodeName());\r\n\t\t}\r\n\t}\r\n\r\n\tremoveNodeFromMathView(){\r\n\t\tfor(let unaryPredicate of this.unaryPredicates){\r\n\t\t\tthis.getReduxProps()[\"removeUnaryPredicate\"](unaryPredicate, this.getNodeName());\r\n\t\t}\r\n\t\tthis.getReduxProps()[\"removeDomainNode\"](this.getNodeName());\r\n\t}\r\n\r\n\tremoveUnaryPredicateFromSet(name: string){\r\n\t\tthis.unaryPredicates.delete(name);\r\n\t\tthis.increaseChangeCounter();\r\n\t}\r\n\r\n\tgetNodeName() {\r\n\t\treturn this.getOptions().name;\r\n\t}\r\n\r\n\tgetAppendPort() {\r\n\t\treturn this.appendPort;\r\n\t}\r\n\r\n\trenameNode(name: string) {\r\n\t\tthis.getOptions().name = name;\r\n\t}\r\n\r\n\tremovePort(port: UnBinaryPortModel): void {\r\n\t\tfor (let link of _.values(port.getLinks())) {\r\n\t\t\tlink.remove();\r\n\t\t}\r\n\t\t//clear the parent node reference\r\n\t\tif (this.ports[port.getName()]) {\r\n\t\t\tthis.ports[port.getName()].setParent(null);\r\n\t\t\tdelete this.ports[port.getName()];\r\n\t\t}\r\n\t}\r\n\r\n\tserialize() {\r\n\t\treturn {\r\n\t\t\t...super.serialize(),\r\n\t\t\tchangeCounter: this.changeCounter,\r\n\t\t\tappendPort: this.appendPort,\r\n\t\t\teditable: this.editable\r\n\t\t};\r\n\t}\r\n\r\n\tdeserialize(event: any) {\r\n\t\tsuper.deserialize(event);\r\n\t\tthis.changeCounter = event.date.changeCounter;\r\n\t\tthis.appendPort = event.data.appendPort;\r\n\t\tthis.editable = event.data.editable;\r\n\t}\r\n}","import * as React from 'react';\r\nimport { DiagramEngine, PortWidget } from '@projectstorm/react-diagrams-core';\r\nimport styled from '@emotion/styled';\r\nimport { DefaultPortModel } from '@projectstorm/react-diagrams';\r\n\r\nexport interface DefaultPortLabelProps {\r\n    port: DefaultPortModel;\r\n    engine: DiagramEngine;\r\n    width: number;\r\n}\r\n\r\nexport const PortLabel = styled.div`\r\n\t\tdisplay: flex;\r\n\t\tmargin-top: 1px;\r\n\t\talign-items: center;\r\n\t\twidth:100%;\r\n`;\r\n\r\nexport const Label = styled.div`\r\n\t\tpadding: 0 5px;\r\n\t\tflex-grow: 1;\r\n`;\r\n\r\nexport const Port = styled.div<{ width: number; height: number }>`\r\n        font-size: 11px;\r\n        flex:auto;\r\n\t\theight: ${p => p.height}px;\r\n\t\tbackground: rgba(white, 0.1);\r\n\t\ttext-align:center;\r\n\t\t\r\n\t\t&:hover {\r\n\t\t\tbackground: rgba(256, 256, 256, 0.6);\r\n\t\t}\r\n\t\tcursor:pointer;\r\n\t`;\r\n\r\nexport class UnBinaryPortLabelWidget extends React.Component<DefaultPortLabelProps> {\r\n    render() {\r\n        const port = (\r\n            <PortWidget engine={this.props.engine} port={this.props.port}>\r\n                <Port width={this.props.width} height={20} />\r\n            </PortWidget>\r\n        );\r\n        const label = <Label>{this.props.port.getOptions().label}</Label>;\r\n\r\n        return (\r\n            <PortLabel>\r\n                {port}\r\n           </PortLabel>\r\n        );\r\n    }\r\n}\r\n","import styled from \"@emotion/styled\";\r\nimport _ from 'lodash';\r\nimport * as React from 'react';\r\nimport FontAwesome from \"react-fontawesome\";\r\nimport { DiagramEngine } from \"@projectstorm/react-diagrams\";\r\nimport {ADDFUNC, ADDPRED, FROM, FUNCTION, PREDICATE, TO} from \"./ConstantNames\";\r\nimport {\r\n    canUseNameForGivenArityAndType, functionIsAlreadyDefinedForGivenFunction,\r\n    getAvailableLanguageElementForGivenArity,\r\n    setPredFuncBadNameIfRegexViolated\r\n} from \"./functions\";\r\nimport {BinaryLabelModel} from \"../labels/binary/BinaryLabelModel\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nexport const DropDownModel = styled.div<{pointerEvents: string, cursor:string}>`\r\n\t\twidth: 100%;\r\n\t\tpointer-events: ${p => p.pointerEvents};\r\n\t\tcursor: ${p => p.cursor};\r\n\t\tbackground-color: green;\r\n\t\tborder-radius: 5px;\r\n\t\tfont-family: sans-serif;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: black;\r\n\t\toverflow: visible;\r\n\t\tfont-size: 13px;\r\n\t\tborder: solid 2px black;\r\n\t`;\r\n\r\nexport const DropDownPorts = styled.div`\r\n\t\tdisplay: flex;\r\n\t\tbackground-image: linear-gradient(rgba(256, 256, 256, 0.9), rgba(256, 256, 256, 0.9));\r\n\t`;\r\n\r\nexport const DropDownTitleName = styled.div`\r\n\t\twidth: 100%;\r\n\t\tflex-grow: 1;\r\n\t\tpadding: 3px 3px;\r\n\t\tfont-size:11px;\r\n\t\ttext-align:center;\r\n\t\tcursor: context-menu;\r\n\t`;\r\n\r\nexport const DropDownContainer = styled.div`\r\n\t\twidth: auto;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tflex: 1 0 0;\r\n\t`;\r\n\r\nexport const DropDownInputElement = styled.div`\r\n\t\twidth: 100%;\r\n\t\tflex-grow: 1;\r\n\t\tpadding: 3px 3px;\r\n\t`;\r\n\r\nexport const DropDownRowContainer = styled.div`\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tflex: 1 0 0;\r\n\t`;\r\n\r\nexport const DropDownLanguageElement = styled.div`\r\n\t\tmin-width: 2em;\r\n\t\twidth: 100%;\r\n\t\theight: 20px;\r\n\t\tbackground: rgba(white, 0.1);\r\n\t\tcolor: black;\r\n\t\ttext-align:center;\r\n\t`;\r\n\r\n\r\nexport interface DropDownMenuWidgetProps {\r\n    model: any;\r\n    engine: DiagramEngine;\r\n    setStateInputElementTextLength:any;\r\n    widthOfInputElement:number;\r\n    modelName?:string;\r\n    arity:string;\r\n    closeDropDown:any;\r\n}\r\n\r\ninterface DropDownMenuWidgetState {\r\n    badNameForLanguageElement:boolean;\r\n    canAddAsPredicate:boolean;\r\n    canAddAsFunction:boolean;\r\n    inputTitle:string,\r\n    predicateButtonTitle:string,\r\n    functionButtonTitle:string,\r\n}\r\n\r\nexport class DropDownMenuWidget extends React.Component<DropDownMenuWidgetProps,DropDownMenuWidgetState> {\r\n    textInput:HTMLInputElement;\r\n\r\n    constructor(props:DropDownMenuWidgetProps) {\r\n        super(props);\r\n        this.generatePredicateComponent = this.generatePredicateComponent.bind(this);\r\n        this.generateFunctionComponent = this.generateFunctionComponent.bind(this);\r\n        this.setStateBadNameForLanguageElement = this.setStateBadNameForLanguageElement.bind(this);\r\n        this.clearTextInput = this.clearTextInput.bind(this);\r\n\r\n        this.state = {\r\n            badNameForLanguageElement:true,\r\n            canAddAsFunction:true,\r\n            canAddAsPredicate:true,\r\n            inputTitle:\"Zadaj názov pre predikát alebo funkciu\",\r\n            predicateButtonTitle:\"Pridaj nový predikát\",\r\n            functionButtonTitle:\"Pridaj novú funkciu\",\r\n        }\r\n    }\r\n\r\n    setStateBadNameForPredFunc(elementName:string){\r\n        if(setPredFuncBadNameIfRegexViolated(elementName,this.setStateBadNameForLanguageElement)){\r\n            this.setState({inputTitle:\"Zadaný názov nie je v správnom tvare\"});\r\n            return true;\r\n        }\r\n        this.setState({inputTitle:\"Zadaj názov pre predikát alebo funkciu\"});\r\n        return false;\r\n    }\r\n\r\n    generatePredicateComponent(elementObject:string){\r\n        return this.generateAvailableLanguageElement(elementObject,PREDICATE);\r\n    }\r\n\r\n\r\n    setStateBadNameForLanguageElement(bool:boolean){\r\n        this.setState({badNameForLanguageElement: bool});\r\n    }\r\n\r\n    generateFunctionComponent(elementObject:string){\r\n        return this.generateAvailableLanguageElement(elementObject,FUNCTION);\r\n    }\r\n\r\n    generateAvailableLanguageElement = (languageElement: string,type:string) => {\r\n        let alreadyDefined:boolean;\r\n        if(type === FUNCTION){\r\n            if(this.props.arity!==\"2\"){\r\n                alreadyDefined = functionIsAlreadyDefinedForGivenFunction(this.props.model.getNodeParameters(),this.props.model.getFunctionValue(),languageElement+\"/\"+(parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps());\r\n            }\r\n            else{\r\n                alreadyDefined = functionIsAlreadyDefinedForGivenFunction(this.props.model.getNodeParameters(FROM),this.props.model.getFunctionValue(FROM),languageElement+\"/\"+(parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps()) && functionIsAlreadyDefinedForGivenFunction(this.props.model.getNodeParameters(TO),this.props.model.getFunctionValue(TO),languageElement+\"/\"+(parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps());\r\n            }\r\n        }\r\n\r\n\r\n        return (\r\n            <DropDownRowContainer key={languageElement} >\r\n                <DropDownLanguageElement>\r\n                    {languageElement}\r\n                </DropDownLanguageElement>\r\n                <Button className={'btn-graph'} variant={type===PREDICATE?\"outline-success\":!alreadyDefined?\"outline-success\":\"outline-danger\"} disabled={type===FUNCTION && alreadyDefined} title={(type===FUNCTION && alreadyDefined)?\"Funkcia nemôže byť viackrát definovaná pre rovnaký(é) parameter(tre)\":(\"Pridaj \"+(type===PREDICATE?\"predikát\":\"funkciu\"))} onClick={() =>{\r\n                    if(type === PREDICATE){\r\n                        this.props.model.addPredicate(languageElement)\r\n                    }\r\n                    else{\r\n                        if(!alreadyDefined){\r\n                            this.props.model.addFunction(languageElement)\r\n                        }\r\n                    }\r\n                    this.props.engine.repaintCanvas();\r\n                }}><FontAwesome name={\"fas fa-plus\"}/></Button>\r\n            </DropDownRowContainer>\r\n        )\r\n    };\r\n\r\n    setLockedParentIfNeeded(bool:boolean){\r\n        if(this.props.model instanceof BinaryLabelModel){\r\n            this.props.model.setLockedParent(bool);\r\n        }\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        //will re-render link so the position will be correct\r\n        if(this.props.model instanceof BinaryLabelModel){\r\n            // @ts-ignore\r\n            this.props.model.getParent().increaseChangeCounter();\r\n            this.props.engine.repaintCanvas();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount(): void {\r\n        this.props.model.getReduxProps()[\"focusOnBodyElement\"]();\r\n    }\r\n\r\n    setCanUseForGivenType(type:string,elementName:string){\r\n        if(canUseNameForGivenArityAndType(elementName, type === PREDICATE ? this.props.arity : ((parseInt(this.props.arity) - 1).toString()), this.props.model.getReduxProps(), type)){\r\n            if(type === PREDICATE){\r\n                this.setState({canAddAsPredicate:true,predicateButtonTitle:\"Pridaj nový predikát\"});\r\n            }\r\n            else{\r\n                this.setState({canAddAsFunction:true,functionButtonTitle:\"Pridaj novú funkciu\"});\r\n                if(this.props.arity!==\"2\"){\r\n                    if(functionIsAlreadyDefinedForGivenFunction(this.props.model.getNodeParameters(),this.props.model.getFunctionValue(),this.textInput.value+\"/\"+(parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps())){\r\n                        this.setState({canAddAsFunction:false,functionButtonTitle:\"Funkcia nemôže byť viackrát definovaná pre rovnaký(é) parameter(tre)\"});\r\n                    }\r\n                }\r\n                else{\r\n                    if(functionIsAlreadyDefinedForGivenFunction(this.props.model.getNodeParameters(FROM),this.props.model.getFunctionValue(FROM),this.textInput.value+\"/\"+(parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps()) && functionIsAlreadyDefinedForGivenFunction(this.props.model.getNodeParameters(TO),this.props.model.getFunctionValue(TO),this.textInput.value+\"/\"+(parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps())){\r\n                        this.setState({canAddAsFunction:false,functionButtonTitle:\"Funkcia nemôže byť viackrát definovaná pre rovnaký(é) parameter(tre)\"});\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else{\r\n            if(type === PREDICATE){\r\n                this.setState({canAddAsPredicate:false,predicateButtonTitle:\"Predikát nejde pridať, predikát alebo funkcia s daným menom už existuje pre iný typ alebo pre inú aritu\"});\r\n            }\r\n            else{\r\n                this.setState({canAddAsFunction:false,functionButtonTitle:\"Funkciu nejde pridať, predikát alebo funkcia s daným menom už existuje pre iný typ alebo pre inú aritu\"});\r\n            }\r\n            return;\r\n        }\r\n    }\r\n\r\n    clearTextInput(){\r\n        this.textInput.value = \"\";\r\n        this.setState({badNameForLanguageElement:true,canAddAsFunction:true,canAddAsPredicate:true});\r\n        this.props.engine.repaintCanvas();\r\n    }\r\n\r\n    addGivenInputElement(type:string) {\r\n        if(!this.setStateBadNameForPredFunc(this.textInput.value.replace(/\\s/g, \"\")) && canUseNameForGivenArityAndType(this.textInput.value, type === PREDICATE ? this.props.arity : ((parseInt(this.props.arity) - 1).toString()), this.props.model.getReduxProps(), type)){\r\n            if (type === PREDICATE) {\r\n                this.props.model.addPredicate(this.textInput.value);\r\n            } else {\r\n                if(!this.state.canAddAsFunction){\r\n                    return;\r\n                }\r\n                this.props.model.addFunction(this.textInput.value);\r\n            }\r\n            this.clearTextInput();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let funcArity:number = parseInt(this.props.arity)-1;\r\n\r\n        return (\r\n            <DropDownModel pointerEvents={this.props.model.isEditable() ? \"auto\" : \"none\"}\r\n                           cursor={this.props.model.isEditable() ? \"pointer\" : \"move\"}>\r\n                <DropDownPorts>\r\n                    <DropDownContainer>\r\n                        <DropDownTitleName title={\"Zoznam použiteľných predikátov pre aritu \"+this.props.arity}>\r\n                            Pred\r\n                        </DropDownTitleName>\r\n                        {_.map(Array.from(getAvailableLanguageElementForGivenArity(this.props.arity,this.props.model.getReduxProps(),this.props.model.getPredicates(),PREDICATE)), this.generatePredicateComponent)}\r\n                        {funcArity !== 0?\r\n                            <DropDownTitleName title={\"Zoznam použiteľných funkcií pre aritu \"+funcArity}>\r\n                                Func\r\n                            </DropDownTitleName>:null\r\n                        }\r\n                        {funcArity !== 0?_.map(Array.from(getAvailableLanguageElementForGivenArity((parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps(),this.props.model.getFunctions(),FUNCTION)), this.generateFunctionComponent):null}\r\n                        <DropDownInputElement>\r\n                            <DropDownRowContainer key={\"lastPredicateOption\"}>\r\n                                <input title={this.state.inputTitle} onChange={(e) => {\r\n                                    let elName:string = e.target.value.replace(/\\s/g, \"\");\r\n                                    this.props.setStateInputElementTextLength(e.target.value.length);\r\n                                    this.setStateBadNameForPredFunc(elName);\r\n                                    this.setCanUseForGivenType(PREDICATE,elName);\r\n                                    if(this.props.arity!==\"1\"){\r\n                                        this.setCanUseForGivenType(FUNCTION,elName);\r\n                                    }\r\n                                }}\r\n                                       ref={(input) => this.textInput = input}\r\n                                       onFocus={() => {\r\n                                           this.props.model.setLocked(true);\r\n                                           this.setLockedParentIfNeeded(true);\r\n                                       }}\r\n                                       onBlur={() => {\r\n                                           this.props.model.setLocked(false);\r\n                                           this.setLockedParentIfNeeded(false);\r\n                                       }}\r\n                                       onKeyDown={(e) => {\r\n                                           if (e.key === \"Escape\") {\r\n                                               this.props.closeDropDown();\r\n                                           }\r\n                                           else if (e.key === \"Enter\" && funcArity === 0) {\r\n                                               this.addGivenInputElement(PREDICATE);\r\n                                           }\r\n                                       }}\r\n                                       placeholder={funcArity!==0?\"Add pred/func\":\"Add predicate\"} style={{\r\n                                    width: (this.props.widthOfInputElement===1?2:this.props.widthOfInputElement) + \"ch\",\r\n                                    height: 20 + \"px\",\r\n                                    border: this.state.badNameForLanguageElement ? \"1px solid red\" : \"1px solid black\"\r\n                                }}>\r\n                                </input>\r\n                                <Button className={'btn-graph'} variant={this.state.canAddAsPredicate?\"outline-success\":\"outline-danger\"} disabled={!this.state.canAddAsPredicate} title={this.state.predicateButtonTitle} onClick={() => {\r\n                                    this.addGivenInputElement(PREDICATE);\r\n                                }}>{ADDPRED}</Button>\r\n                                {\r\n                                    funcArity!==0?\r\n                                        <Button className={'btn-graph'} variant={this.state.canAddAsFunction?\"outline-success\":\"outline-danger\"} disabled={!this.state.canAddAsFunction} title={this.state.functionButtonTitle} onClick={() => {\r\n                                            this.addGivenInputElement(FUNCTION);\r\n                                        }}>{ADDFUNC}</Button>\r\n                                        :null\r\n                                }\r\n                            </DropDownRowContainer>\r\n                        </DropDownInputElement>\r\n                    </DropDownContainer>\r\n                </DropDownPorts>\r\n            </DropDownModel>\r\n        )\r\n    }\r\n}\r\n","import _ from \"lodash\";\r\nimport * as React from 'react';\r\nimport styled from '@emotion/styled';\r\nimport FontAwesome from \"react-fontawesome\";\r\nimport { BinaryLabelModel } from './BinaryLabelModel';\r\nimport {DiagramEngine} from '@projectstorm/react-diagrams';\r\nimport {ADDPORT, ADDPORTSELECTED, BOTH, FROM, FUNCTION, PREDICATE} from \"../../nodes/ConstantNames\";\r\nimport {DropDownMenuWidget} from \"../../nodes/DropDownMenuWidget\";\r\nimport {Port} from \"../../nodes/unbinary/UnBinaryPortLabelWidget\";\r\nimport {getWidestElement} from \"../../nodes/functions\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nexport interface BinaryLabelWidgetProps {\r\n\tmodel: BinaryLabelModel;\r\n\tengine: DiagramEngine;\r\n\tname?:string;\r\n\tsize?: number;\r\n}\r\n\r\nexport const ElementsNode = styled.div<{pointerEvents: string, cursor:string}>`\r\n\t\tpointer-events: ${p => p.pointerEvents};\r\n\t\tcursor: ${p => p.cursor};\r\n\t\twidth:100%;\r\n\t\theight:100%;\r\n\t\tbackground-color: yellow;\r\n\t\tborder-radius: 5px;\r\n\t\tfont-family: sans-serif;\r\n\t\tcolor: black;\r\n\t\tborder: solid 2px black;\r\n\t\toverflow: visible;\r\n\t\tfont-size: 12px;\r\n\t\tfont-weight: bold;\r\n\t`;\r\n\r\nexport const Element = styled.div`\r\n\t\tmin-width: 2em;\r\n\t\twidth: 100%;\r\n\t\theight: 20px;\r\n\t\tbackground: rgba(white, 0.1);\r\n\t\tcolor: black;\r\n\t\ttext-align:center;\r\n\t`;\r\n\r\nexport const Elements = styled.div`\r\n\t\tdisplay: flex;\r\n\t\tbackground-image: linear-gradient(rgba(256, 256, 256, 0.4), rgba(256, 256, 256, 0.5));\r\n\t`;\r\n\r\nexport const ElementContainer = styled.div`\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tflex-grow:1;\r\n\r\n\t\t&:first-of-type {\r\n\t\t\tmargin-right: 10px;\r\n\t\t}\r\n\r\n\t\t&:only-child {\r\n\t\t\tmargin-right: 0px;\r\n\t\t}\r\n\t`;\r\n\r\nexport const ElementRowContainer = styled.div`\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tflex: 1 0 0;\r\n\t`;\r\n\r\nexport const Title = styled.div`\r\n\t\twidth: 100%;\r\n\t\tbackground: rgba(256, 256, 256, 0.15);\r\n\t\tdisplay: flex;\r\n\t\twhite-space: nowrap;\r\n\t\tjustify-items: center;\r\n\t\ttext-align:center;\r\n\t\tcursor: default;\r\n\t`;\r\n\r\nexport const TitleName = styled.div`\r\n\t\twidth: 100%;\r\n\t\tflex-grow: 1;\r\n\t\tpadding: 5px 5px;\r\n\t`;\r\n\r\ninterface BinaryNodeWidgetState {\r\n\trenameActive?:boolean;\r\n\ttitleChanged?:boolean;\r\n\tisDropDownMenu:boolean;\r\n\tbadNameForNewPredicate: boolean;\r\n\tinputElementTextLength: number;\r\n}\r\n\r\nexport class BinaryLabelWidget extends React.Component<BinaryLabelWidgetProps,BinaryNodeWidgetState> {\r\n\tsourceNodeName:string;\r\n\ttargetNodeName:string;\r\n\r\n\tconstructor(props: BinaryLabelWidgetProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisDropDownMenu: false,\r\n\t\t\tbadNameForNewPredicate: false,\r\n\t\t\tinputElementTextLength: 0\r\n\t\t};\r\n\t\tthis.setInputElementTextLength = this.setInputElementTextLength.bind(this);\r\n\t\tthis.closeDropDown = this.closeDropDown.bind(this);\r\n\t\tthis.generateElementType = this.generateElementType.bind(this);\r\n\t\tthis.generatePredicateComponent = this.generatePredicateComponent.bind(this);\r\n\t\tthis.generateFunctionComponent = this.generateFunctionComponent.bind(this);\r\n\t}\r\n\r\n\tgenerateElementType = (elementObject: string,type: string) => {\r\n\t\treturn (\r\n\t\t\t\t<ElementRowContainer key={elementObject[0]} >\r\n\t\t\t\t\t{this.sourceNodeName !== this.targetNodeName?\r\n\t\t\t\t\t<Button className={'btn-graph'} variant={\"outline-warning\"} onClick={() =>{\r\n\t\t\t\t\t\tthis.props.model.changeDirectionOfBinaryRelation(elementObject[0], elementObject[1],type);\r\n\t\t\t\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t\t\t\t}}><FontAwesome title={\"Smer \"+(type===PREDICATE?\"predikátu\":\"funkcie\")} name={elementObject[1]===BOTH?'fas fa-arrows-alt-h':(elementObject[1]===FROM?\"fas fa-long-arrow-alt-right\":\"fas fa-long-arrow-alt-left\")}/></Button>:null}\r\n\t\t\t\t<Element title={type===PREDICATE?\"Predikát\":\"Funkcia\"}>\r\n\t\t\t\t\t{elementObject[0]}\r\n\t\t\t\t</Element>\r\n\t\t\t\t\t<Button className={'btn-graph'} variant={\"outline-warning\"} title={\"Zmazať \"+(type===PREDICATE?\"daný predikát\":\"danú funkciu\")+\" z vrcholu\"} onClick={() =>{\r\n\t\t\t\t\t\ttype===PREDICATE?this.props.model.removePredicate(elementObject[0]):this.props.model.removeFunction(elementObject[0]);\r\n\t\t\t\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t\t\t\t}}><FontAwesome name={\"fas fa-trash\"}/></Button>\r\n\t\t\t\t</ElementRowContainer>\r\n\t\t\t)\r\n\t\t};\r\n\r\n\tgeneratePredicateComponent(elementObject:string){\r\n\t\t\treturn this.generateElementType(elementObject,PREDICATE);\r\n\t}\r\n\r\n\tgenerateFunctionComponent(elementObject:string){\r\n\t\treturn this.generateElementType(elementObject,FUNCTION);\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.setIsDropDownMenuAccordingBehaviour();\r\n\t}\r\n\r\n\tsetIsDropDownMenuAccordingBehaviour(){\r\n\t\tif(!this.props.model.getParent().isSelected() && this.state.isDropDownMenu){\r\n\t\t\tthis.setState({isDropDownMenu:false});\r\n\t\t\tthis.props.model.setLockedParent(false);\r\n\t\t\tthis.props.model.setLocked(false);\r\n\t\t}\r\n\t}\r\n\r\n\tgetWidestElement():number{\r\n\t\tlet width:number = this.sourceNodeName.length+this.targetNodeName.length;\r\n\t\tlet compareWidth:number = getWidestElement(this.state.isDropDownMenu,this.state.inputElementTextLength,this.props.model,width,\"2\",\"1\");\r\n\r\n\t\tif(compareWidth>width){\r\n\t\t\treturn compareWidth;\r\n\t\t}\r\n\r\n\t\treturn width;\r\n\t}\r\n\r\n\tsetInputElementTextLength(length: number){\r\n\t\tthis.setState({inputElementTextLength:length});\r\n\t}\r\n\r\n\tcloseDropDown(){\r\n\t\tthis.setState({isDropDownMenu:false});\r\n\t\tthis.props.model.setLocked(false);\r\n\t\tthis.props.engine.getModel().clearSelection();\r\n\t\tthis.props.engine.repaintCanvas();\r\n\t}\r\n\r\n\trender() {\r\n\t\t// @ts-ignore\r\n\t\tthis.sourceNodeName = this.props.model.getParent().getSourcePort().getNode().getNodeName();\r\n\t\t// @ts-ignore\r\n\t\tthis.targetNodeName = this.props.model.getParent().getTargetPort().getNode().getNodeName();\r\n\r\n\t\tlet width = this.getWidestElement();\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<ElementsNode pointerEvents={this.props.model.editable ? \"all\" : \"none\"}\r\n\t\t\t\t\t\t\t  cursor={this.props.model.editable ? \"pointer\" : \"move\"}>\r\n\t\t\t\t\t<Title title={\"Smerovanie predikátov/funkcií (od – do)\"}>\r\n\t\t\t\t\t\t<TitleName>\r\n\t\t\t\t\t\t\t{this.sourceNodeName + \" – \" + this.targetNodeName}\r\n\t\t\t\t\t\t</TitleName>\r\n\t\t\t\t\t</Title>\r\n\t\t\t\t\t<Elements>\r\n\t\t\t\t\t\t<ElementContainer>\r\n\t\t\t\t\t\t\t{_.map(Array.from(this.props.model.getPredicates()), this.generatePredicateComponent)}\r\n\t\t\t\t\t\t\t{_.map(Array.from(this.props.model.getFunctions()), this.generateFunctionComponent)}\r\n\t\t\t\t\t\t\t<Port title={\"Otvoriť/zatvoriť rozbaľovaciu ponuku\"} onClick={() => {\r\n\t\t\t\t\t\t\t\tif (this.state.isDropDownMenu) {\r\n\t\t\t\t\t\t\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\t\t\t\t\t\t\tthis.setState({isDropDownMenu: false});\r\n\t\t\t\t\t\t\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\t\t\t\t\t\t\tthis.props.model.setSelected(true);\r\n\t\t\t\t\t\t\t\t\tthis.props.model.getParent().setSelected(true);\r\n\t\t\t\t\t\t\t\t\tthis.setState({isDropDownMenu: true});\r\n\t\t\t\t\t\t\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t  height={20}\r\n\t\t\t\t\t\t\t\t  width={this.props.model.getOptions().name?0:20}>{this.state.isDropDownMenu ? ADDPORTSELECTED : ADDPORT}</Port>\r\n\t\t\t\t\t\t</ElementContainer>\r\n\t\t\t\t\t</Elements>\r\n\t\t\t\t</ElementsNode>\r\n\t\t\t\t{(this.state.isDropDownMenu && this.props.model.getParent().isSelected()) ?\r\n\t\t\t\t\t<DropDownMenuWidget model={this.props.model} engine={this.props.engine}\r\n\t\t\t\t\t\t\t\t\t\tbadNameForLanguageElement={this.state.badNameForNewPredicate}\r\n\t\t\t\t\t\t\t\t\t\tsetStateInputElementTextLength={this.setInputElementTextLength}\r\n\t\t\t\t\t\t\t\t\t\twidthOfInputElement={width} arity={\"2\"} closeDropDown={this.closeDropDown}/> : null\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n","import _ from 'lodash';\r\nimport * as React from 'react';\r\nimport styled from '@emotion/styled';\r\nimport FontAwesome from \"react-fontawesome\";\r\nimport { UnBinaryNodeModel } from './UnBinaryNodeModel';\r\nimport { DiagramEngine, PortWidget } from '@projectstorm/react-diagrams';\r\nimport { Port } from \"./UnBinaryPortLabelWidget\";\r\nimport {ADDPORT, ADDPORTSELECTED, UNBINARY} from \"../ConstantNames\";\r\nimport {Element, ElementRowContainer} from \"../../labels/binary/BinaryLabelWidget\";\r\nimport {DropDownMenuWidget} from \"../DropDownMenuWidget\";\r\nimport {canUseNameForNode, getWidestElement, selectOnlyCurrentGraphElement} from \"../functions\";\r\nimport { Button } from 'react-bootstrap';\r\n\r\nexport interface UnBinaryNodeWidgetProps {\r\n\tmodel: UnBinaryNodeModel;\r\n\tengine: DiagramEngine;\r\n\trenameDomainNode:any;\r\n\tremoveDomainNode:any;\r\n\tname?:string;\r\n\tsize?: number;\r\n}\r\n\r\ninterface UnBinaryNodeWidgetState {\r\n\trenameActive?:boolean;\r\n\ttitleChanged?:boolean;\r\n\tnodeName?:string;\r\n\tbadName?:boolean;\r\n\tisDropDownMenu?:boolean;\r\n\tinputElementTextLength?:number;\r\n}\r\n\r\nexport const Node = styled.div<{ background: string; selected: boolean, pointerEvents: string, cursor:string}>`\r\n\t\twidth: 100%;\r\n\t\tpointer-events: ${p => p.pointerEvents};\r\n\t\tcursor: ${p => p.cursor};\r\n\t\t/*background-color: ${p => p.background};*/\r\n\t\tbackground-color: green;\r\n\t\tborder-radius: 5px;\r\n\t\tfont-family: sans-serif;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: black;\r\n\t\toverflow: visible;\r\n\t\tfont-size: 13px;\r\n\t\tborder: solid 2px ${p => (p.selected ? 'rgb(0,192,255)' : 'black')};\r\n\t`;\r\n\r\nexport const Title = styled.div`\r\n\t\twidth: 100%;\r\n\t\tbackground: rgba(255, 255, 255, 0.45);\r\n\t\tdisplay: flex;\r\n\t\twhite-space: nowrap;\r\n\t\tjustify-items: center;\r\n\t\ttext-align:center;\r\n\t`;\r\n\r\nexport const TitleName = styled.div`\r\n\t\twidth: 100%;\r\n\t\tflex-grow: 1;\r\n\t\tpadding: 5px 5px;\r\n\t\t\t\t\r\n\t\t&:hover {\r\n\t\t\tbackground: rgba(255, 255, 255, 0.7);\r\n\t\t}\r\n\t`;\r\n\r\nexport const Ports = styled.div`\r\n\t\tdisplay: flex;\r\n\t\tbackground-image: linear-gradient(rgba(255, 255, 255, 0.55), rgba(255, 255, 255, 0.65));\r\n\t`;\r\n\r\nexport const PortsContainer = styled.div`\r\n\t\twidth: auto;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tflex: 1 0 0;\r\n\t`;\r\n\r\nexport class UnBinaryNodeWidget extends React.Component<UnBinaryNodeWidgetProps,UnBinaryNodeWidgetState> {\r\n\tconstructor(props: UnBinaryNodeWidgetProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\trenameActive: false,\r\n\t\t\ttitleChanged: false,\r\n\t\t\tnodeName: this.props.model.getOptions().name,\r\n\t\t\tbadName: false,\r\n\t\t\tisDropDownMenu: false,\r\n\t\t\tinputElementTextLength: 0\r\n\t\t};\r\n\t\tthis.setBadNodeNameState = this.setBadNodeNameState.bind(this);\r\n\t\tthis.setInputElementTextLength = this.setInputElementTextLength.bind(this);\r\n\t\tthis.closeDropDown = this.closeDropDown.bind(this);\r\n\t}\r\n\r\n\tcomponentDidUpdate(): void {\r\n\t\tthis.setIsDropDownMenuAccordingBehaviour();\r\n\t}\r\n\r\n\tgeneratePredicate = (predicate: string) => {\r\n\t\treturn (\r\n\t\t\t<ElementRowContainer key={predicate} >\r\n\t\t\t\t<Element>\r\n\t\t\t\t\t{predicate}\r\n\t\t\t\t</Element>\r\n\t\t\t\t<Button className={'btn-graph'} variant={\"outline-success\"} onClick={() =>{\r\n\t\t\t\t\tthis.props.model.removeUnaryPredicate(predicate);\r\n\t\t\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t\t\t}}><FontAwesome name={\"fas fa-trash\"}/></Button>\r\n\t\t\t</ElementRowContainer>\r\n\t\t)\r\n\t};\r\n\r\n\tcancelRenameNode() {\r\n\t\tthis.setState({renameActive: false, nodeName: this.props.model.getNodeName(), badName: false});\r\n\t\tthis.props.model.setLocked(false);\r\n\t}\r\n\r\n\trenameNode(nodeName:string) {\r\n\t\tthis.props.model.setLocked(false);\r\n\r\n\t\tif (nodeName !== this.props.model.getNodeName()) {\r\n\t\t\tif (!this.state.badName) {\r\n\t\t\t\tthis.props.renameDomainNode(this.props.model.getNodeName(),nodeName);\r\n\t\t\t\tthis.props.model.renameNode(nodeName);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setState({nodeName: this.props.model.getNodeName()});\r\n\t\tthis.setState({renameActive: false});\r\n\t\tthis.setState({badName: false});\r\n\t}\r\n\r\n\tsetBadNodeNameState(bool: boolean) {\r\n\t\tthis.setState({badName: bool});\r\n\t}\r\n\r\n\tsetInputElementTextLength(length: number){\r\n\t\tthis.setState({inputElementTextLength:length});\r\n\t}\r\n\r\n\tsetIsDropDownMenuAccordingBehaviour(){\r\n\t\tif(!this.props.model.isSelected() && this.state.isDropDownMenu){\r\n\t\t\tthis.setState({isDropDownMenu:false});\r\n\t\t\tthis.props.model.setLocked(false);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropDown(){\r\n\t\tif(this.state.isDropDownMenu){\r\n\t\t\tthis.setState({isDropDownMenu:false});\r\n\t\t\tthis.props.model.setLocked(false);\r\n\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t}\r\n\t}\r\n\r\n\tgetWidestElement():number{\r\n\t\tlet width:number = this.state.nodeName.length;\r\n\t\tlet compareWidth:number = getWidestElement(this.state.isDropDownMenu,this.state.inputElementTextLength,this.props.model,width,\"1\",\"0\");\r\n\r\n\t\tif(compareWidth>width){\r\n\t\t\treturn compareWidth;\r\n\t\t}\r\n\r\n\t\treturn width;\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet width = this.getWidestElement();\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Node\r\n\t\t\t\t\tdata-basic-node-name={this.props.name}\r\n\t\t\t\t\tselected={this.props.model.isSelected()}\r\n\t\t\t\t\tbackground={this.props.model.getOptions().color}\r\n\t\t\t\t\tpointerEvents={this.props.model.isEditable() ? \"auto\" : \"none\"}\r\n\t\t\t\t\tcursor={this.props.model.isEditable() ? \"pointer\" : \"move\"}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif(this.props.model.canSelectNode){\r\n\t\t\t\t\t\t\tselectOnlyCurrentGraphElement(this.props.model,this.props.engine);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tthis.props.model.canSelectNode = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Title title={\"Vytvoriť novú linku ťahaním/dvojklikom premenovať názov vrcholu\"}>\r\n\t\t\t\t\t\t<PortWidget style={{flexGrow: 1}} engine={this.props.engine}\r\n\t\t\t\t\t\t\t\t\tport={this.props.model.getMainPort()}>\r\n\t\t\t\t\t\t\t<TitleName onDoubleClick={() => {\r\n\t\t\t\t\t\t\t\tif (this.state.isDropDownMenu) {\r\n\t\t\t\t\t\t\t\t\tthis.setState({isDropDownMenu: false});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!this.state.renameActive) {\r\n\t\t\t\t\t\t\t\t\tthis.setState({renameActive: true});\r\n\t\t\t\t\t\t\t\t\tthis.props.model.setLocked(true);\r\n\t\t\t\t\t\t\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\t\t\t\t\t\t\tthis.props.model.setSelected(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{!this.state.renameActive ? this.props.model.getNodeName() :\r\n\t\t\t\t\t\t\t\t\t<input autoFocus onBlur={() => {\r\n\t\t\t\t\t\t\t\t\t\tlet name = this.state.nodeName.replace(/\\s/g, \"\");\r\n\t\t\t\t\t\t\t\t\t\tthis.renameNode(name);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t   onKeyDown={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t   if (e.key === \"Escape\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t   this.cancelRenameNode();\r\n\t\t\t\t\t\t\t\t\t\t\t   } else if (e.key === \"Enter\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t   let name = this.state.nodeName.replace(/\\s/g, \"\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t   this.renameNode(name);\r\n\t\t\t\t\t\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t\t\t\t\t   }\r\n\r\n\t\t\t\t\t\t\t\t\t\t   type=\"text\" style={{\r\n\t\t\t\t\t\t\t\t\t\twidth: (width + 1.5) + \"ch\",\r\n\t\t\t\t\t\t\t\t\t\theight: 20 + \"px\",\r\n\t\t\t\t\t\t\t\t\t\tborder: this.state.badName ? \"1px solid red\" : \"1px solid black\"\r\n\t\t\t\t\t\t\t\t\t}} name=\"\" value={this.state.nodeName}\r\n\t\t\t\t\t\t\t\t\t\t   onChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t   this.setState({nodeName: e.target.value});\r\n\t\t\t\t\t\t\t\t\t\t\t   let name: string = e.target.value.replace(/\\s/g, \"\");\r\n\t\t\t\t\t\t\t\t\t\t\t   canUseNameForNode(this.props.model.getNodeName(),name,this.setBadNodeNameState,this.props.model.getReduxProps(),UNBINARY);\r\n\t\t\t\t\t\t\t\t\t\t   }}/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</TitleName>\r\n\t\t\t\t\t\t</PortWidget>\r\n\t\t\t\t\t</Title>\r\n\t\t\t\t\t<Ports>\r\n\t\t\t\t\t\t<PortsContainer>\r\n\t\t\t\t\t\t\t{_.map(Array.from(this.props.model.getUnaryPredicates()), this.generatePredicate)}\r\n\t\t\t\t\t\t\t<PortWidget style={{flexGrow: 1}} engine={this.props.engine}\r\n\t\t\t\t\t\t\t\t\t\tport={this.props.model.getAppendPort()}>\r\n\t\t\t\t\t\t\t\t<Port title={\"Otvoriť/zatvoriť rozbaľovaciu ponuku\"} onClick={() => {\r\n\t\t\t\t\t\t\t\t\tif (this.state.isDropDownMenu) {\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({isDropDownMenu: false});\r\n\t\t\t\t\t\t\t\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\t\t\t\t\t\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({isDropDownMenu: true, badNameForNewPredicate: true});\r\n\t\t\t\t\t\t\t\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\t\t\t\t\t\t\t\tthis.props.model.setSelected(true);\r\n\t\t\t\t\t\t\t\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t  height={20}\r\n\t\t\t\t\t\t\t\t\t  width={this.props.model.getOptions().name.length * 20}>{this.state.isDropDownMenu ? ADDPORTSELECTED : ADDPORT}</Port>\r\n\t\t\t\t\t\t\t</PortWidget>\r\n\t\t\t\t\t\t</PortsContainer>\r\n\t\t\t\t\t</Ports>\r\n\t\t\t\t</Node>\r\n\r\n\t\t\t\t{(this.state.isDropDownMenu && this.props.model.isSelected()) ?\r\n\t\t\t\t\t<DropDownMenuWidget widthOfInputElement={width}\r\n\t\t\t\t\t\t\t\t\t\tsetStateInputElementTextLength={this.setInputElementTextLength}\r\n\t\t\t\t\t\t\t\t\t\tmodel={this.props.model}\r\n\t\t\t\t\t\t\t\t\t\tengine={this.props.engine} modelName={this.props.model.getNodeName()}\r\n\t\t\t\t\t\t\t\t\t\tarity={\"1\"}\r\n\t\t\t\t\t\t\t\t\t\tcloseDropDown={this.closeDropDown}/> : null\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { ConstantNodeModel } from './ConstantNodeModel';\r\nimport {DiagramEngine, PortWidget} from '@projectstorm/react-diagrams';\r\nimport styled from '@emotion/styled';\r\nimport {CONSTANT, UNBINARY} from \"../ConstantNames\";\r\nimport {canUseNameForNode, selectOnlyCurrentGraphElement} from \"../functions\";\r\n\r\nexport interface ConstantNodeWidgetProps {\r\n\tmodel: ConstantNodeModel;\r\n\tengine: DiagramEngine;\r\n\trenameConstantNode:any;\r\n\tremoveConstantNode:any;\r\n\tname?:string;\r\n\tsize?: number;\r\n}\r\n\r\ninterface ConstantNodeWidgetState {\r\n\trenameActive?:boolean;\r\n\ttitleChanged?:boolean;\r\n\tnodeName?:string;\r\n\tbadName?:boolean;\r\n}\r\n\r\nexport const Node = styled.div<{ background: string; selected: boolean, pointerEvents: string, cursor:string}>`\r\n\t\t/*background-color: ${p => p.background};*/\r\n\t\tbackground-color: #a6adbd;\r\n\t\tpointer-events: ${p => p.pointerEvents};\r\n\t\tcursor: ${p => p.cursor};\r\n\t\tborder-radius: 50%;\r\n\t\tfont-family: sans-serif;\r\n\t\tfont-weight:bold;\r\n\t\tcolor: black;\r\n\t\tborder: solid 2px black;\r\n\t\toverflow: hidden;\r\n\t\tfont-size: 13px;\r\n\t\tborder: solid 2.5px ${p => (p.selected ? 'rgb(0,192,255)' : 'black')};\r\n\t\tjustify-items: center;\r\n\t\ttext-align:center;\r\n\t`;\r\n\r\nexport const Title = styled.div`\r\n\t\tbackground: rgba(256, 256, 256, 0.15);\r\n\t\tdisplay: flex;\r\n\t\twhite-space: nowrap;\r\n\t\tjustify-items: center;\r\n\t\ttext-align:center;\r\n\t`;\r\n\r\nexport const TitleName = styled.div`\r\n\t\tflex-grow: 1;\r\n\t\tpadding: 10px 10px;\r\n\t\t\t\t\r\n\t\t&:hover {\r\n\t\t\tbackground: rgba(256, 256, 256, 0.4);\r\n\t\t}\r\n\t`;\r\n\r\n\r\nexport class ConstantNodeWidget extends React.Component<ConstantNodeWidgetProps,ConstantNodeWidgetState> {\r\n\tconstructor(props:ConstantNodeWidgetProps){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\trenameActive: false,\r\n\t\t\ttitleChanged: false,\r\n\t\t\tnodeName: this.props.model.getOptions().name,\r\n\t\t\tbadName: false\r\n\t\t};\r\n\t\tthis.setBadNodeNameState = this.setBadNodeNameState.bind(this);\r\n\t}\r\n\r\n\tcancelRenameNode() {\r\n\t\tthis.setState({renameActive: false, nodeName: this.props.model.getNodeName(), badName: false});\r\n\t\tthis.props.model.setLocked(false);\r\n\t}\r\n\r\n\trenameNode(nodeName:string) {\r\n\t\tthis.props.model.setLocked(false);\r\n\r\n\t\tif (nodeName !== this.props.model.getNodeName()) {\r\n\t\t\tif (!this.state.badName) {\r\n\t\t\t\tthis.props.renameConstantNode(this.props.model.getNodeName(),nodeName);\r\n\t\t\t\tthis.props.model.renameNode(nodeName);\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({nodeName: this.props.model.getNodeName()});\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({nodeName: this.props.model.getNodeName()});\r\n\t\tthis.setState({renameActive: false});\r\n\t\tthis.setState({badName: false});\r\n\t}\r\n\r\n\tgetWidestElement():number{\r\n\t\tlet width:number = this.props.model.getNodeName().length;\r\n\r\n\t\tif(this.state.renameActive){\r\n\t\t\treturn width;\r\n\t\t}\r\n\t\treturn width;\r\n\t}\r\n\r\n\tsetBadNodeNameState(bool: boolean) {\r\n\t\tthis.setState({badName: bool});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet width = this.getWidestElement();\r\n\r\n\t\treturn (\r\n\t\t\t<Node\r\n\t\t\t\tdata-basic-node-name={this.props.name}\r\n\t\t\t\tselected={this.props.model.isSelected()}\r\n\t\t\t\tbackground={this.props.model.getOptions().color}\r\n\t\t\t\tpointerEvents={this.props.model.isEditable()?\"auto\":\"none\"}\r\n\t\t\t\tcursor={this.props.model.isEditable()?\"pointer\":\"move\"}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tselectOnlyCurrentGraphElement(this.props.model,this.props.engine);\r\n\t\t\t\t}}>\r\n\t\t\t\t<Title>\r\n\t\t\t\t\t<PortWidget engine={this.props.engine} port={this.props.model.getMainPort()}>\r\n\t\t\t\t\t\t<TitleName onDoubleClick={() => {\r\n\t\t\t\t\t\t\tif (!this.state.renameActive) {\r\n\t\t\t\t\t\t\t\tthis.setState({renameActive: true});\r\n\t\t\t\t\t\t\t\tthis.props.model.setLocked(true);\r\n\t\t\t\t\t\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\t\t\t\t\t\tthis.props.model.setSelected(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{!this.state.renameActive ? this.props.model.getNodeName() :\r\n\t\t\t\t\t\t\t\t<input autoFocus onBlur={() => {\r\n\t\t\t\t\t\t\t\t\tlet name = this.state.nodeName.replace(/\\s/g, \"\");\r\n\t\t\t\t\t\t\t\t\tthis.renameNode(name);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t   onKeyDown={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t   if (e.key === \"Escape\") {\r\n\t\t\t\t\t\t\t\t\t\t\t   this.cancelRenameNode();\r\n\t\t\t\t\t\t\t\t\t\t   } else if (e.key === \"Enter\") {\r\n\t\t\t\t\t\t\t\t\t\t\t   let name = this.state.nodeName.replace(/\\s/g, \"\");\r\n\t\t\t\t\t\t\t\t\t\t\t   this.renameNode(name);\r\n\t\t\t\t\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t\t\t\t   }\r\n\r\n\t\t\t\t\t\t\t\t\t   type=\"text\" style={{\r\n\t\t\t\t\t\t\t\t\twidth: (width+1.5)+\"ch\",\r\n\t\t\t\t\t\t\t\t\theight: 20 + \"px\",\r\n\t\t\t\t\t\t\t\t\tborder: this.state.badName ? \"1px solid red\" : \"1px solid black\"\r\n\t\t\t\t\t\t\t\t}} name=\"\" value={this.state.nodeName}\r\n\t\t\t\t\t\t\t\t\t   onChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t   this.setState({nodeName: e.target.value});\r\n\t\t\t\t\t\t\t\t\t\t   let name = e.target.value.replace(/\\s/g, \"\");\r\n\t\t\t\t\t\t\t\t\t\t   canUseNameForNode(this.props.model.getNodeName(),name,this.setBadNodeNameState,this.props.model.getReduxProps(),CONSTANT);\r\n\t\t\t\t\t\t\t\t\t   }}/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</TitleName>\r\n\t\t\t\t\t</PortWidget>\r\n\t\t\t\t</Title>\r\n\t\t\t</Node>)\r\n\t}\r\n}\r\n","import * as React from \"react\";\r\nimport {Element, ElementRowContainer} from \"../labels/binary/BinaryLabelWidget\";\r\nimport FontAwesome from \"react-fontawesome\";\r\nimport {PREDICATE} from \"./ConstantNames\";\r\nimport {DiagramEngine} from \"@projectstorm/react-diagrams\";\r\nimport {BaseNodeModel} from \"./BaseNodeModel\";\r\nimport {Button} from \"react-bootstrap\";\r\n\r\nexport interface NaryListWidgetProps {\r\n    model: BaseNodeModel;\r\n    engine: DiagramEngine;\r\n    type: string;\r\n    elementName: string;\r\n}\r\n\r\nexport class NaryListWidget extends React.Component<NaryListWidgetProps> {\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <ElementRowContainer key={this.props.elementName} >\r\n                <Element title={this.props.type===PREDICATE?\"Predikát\":\"Funkcia\"}>\r\n                    {this.props.elementName}\r\n                </Element>\r\n                <Button className={'btn-graph'} variant={\"outline-warning\"} title={\"Zmazať \"+(this.props.type===PREDICATE?\"daný predikát\":\"danú funkciu\")+\" z vrcholu\"} onClick={() =>{\r\n                    this.props.type===PREDICATE?this.props.model.removePredicate(this.props.elementName):this.props.model.removeFunction(this.props.elementName);\r\n                    this.props.engine.repaintCanvas();\r\n                }}><FontAwesome name={\"fas fa-trash\"}/></Button>\r\n            </ElementRowContainer>\r\n        )\r\n    }\r\n}","import * as React from 'react';\r\nimport { DiagramEngine, PortWidget } from '@projectstorm/react-diagrams';\r\nimport styled from '@emotion/styled';\r\nimport { TernaryNodeModel } from './TernaryNodeModel';\r\nimport {\r\n\tDropDownMenuWidget\r\n} from \"../DropDownMenuWidget\";\r\nimport {getWidestElement, selectOnlyCurrentGraphElement} from '../functions';\r\nimport {ADDPORT, ADDPORTSELECTED, FUNCTION, PREDICATE} from \"../ConstantNames\";\r\nimport {ElementContainer} from \"../../labels/binary/BinaryLabelWidget\";\r\nimport {Port as PortClassic} from \"../../nodes/unbinary/UnBinaryPortLabelWidget\";\r\nimport _ from \"lodash\";\r\nimport {NaryListWidget} from \"../NaryListWidget\";\r\n\r\nexport interface TernaryNodeWidgetProps {\r\n\tmodel: TernaryNodeModel;\r\n\tengine: DiagramEngine;\r\n\tsize?: number;\r\n}\r\n\r\ninterface TernaryNodeWidgetState {\r\n\tnodeName?:string;\r\n\tbadName?:boolean;\r\n\tcolor?:any;\r\n\tisDropDownMenu?:boolean;\r\n\tinputElementTextLength?:number;\r\n}\r\n\r\nexport const Element = styled.div`\r\n\tdisplay: flex;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n`;\r\n\r\nexport const Port = styled.div`\r\n\twidth: 16px;\r\n\theight: 16px;\r\n\tz-index: 10;\r\n\tbackground: rgba(0, 0, 0, 0.5);\r\n\tborder-radius: 8px;\r\n\tcursor: pointer;\r\n\r\n\t&:hover {\r\n\t\tbackground: rgba(0, 0, 0, 1);\r\n\t}\r\n`;\r\n\r\nexport const NaryNodeList = styled.div<{pointerEvents: string, cursor:string}>`\r\n\t\tpointer-events: ${p => p.pointerEvents};\r\n\t\tcursor: ${p => p.cursor};\r\n\t\twidth:100%;\r\n\t\theight:100%;\r\n\t\tbackground-color: yellow;\r\n\t\tborder-radius: 5px;\r\n\t\tfont-family: sans-serif;\r\n\t\tcolor: black;\r\n\t\tborder: solid 2px black;\r\n\t\toverflow: visible;\r\n\t\tfont-size: 12px;\r\n\t\tfont-weight: bold;\r\n\t`;\r\n\r\nexport const Elements = styled.div`\r\n\t\tdisplay: flex;\r\n\t\tbackground-image: linear-gradient(rgba(256, 256, 256, 0.4), rgba(256, 256, 256, 0.5));\r\n\t`;\r\n\r\nexport const Node = styled.div<{ size: number, pointerEvents: string, cursor:string}>`\r\n\tposition: 'relative';\r\n\tpointer-events: ${p => p.pointerEvents};\r\n\tcursor: ${p => p.cursor};\r\n\tdisplay:flex;\r\n\tjustify-content: center;\r\n\t/*width: ${p => p.size};*/\r\n\theight:35px;\r\n`;\r\n\r\nexport class TernaryNodeWidget extends React.Component<TernaryNodeWidgetProps,TernaryNodeWidgetState> {\r\n\r\n\tconstructor(props: TernaryNodeWidgetProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tbadName: false,\r\n\t\t\tisDropDownMenu: false,\r\n\t\t\tcolor: \"rgb(255,255,0)\",\r\n\t\t\tinputElementTextLength: 0\r\n\t\t};\r\n\r\n\t\tthis.setInputElementTextLength = this.setInputElementTextLength.bind(this);\r\n\t\tthis.closeDropDown = this.closeDropDown.bind(this);\r\n\t\tthis.generateFunctionComponent = this.generateFunctionComponent.bind(this);\r\n\t\tthis.generatePredicateComponent = this.generatePredicateComponent.bind(this);\r\n\t}\r\n\r\n\tcomponentDidUpdate(): void {\r\n\t\tthis.setIsDropDownMenuAccordingBehaviour();\r\n\t}\r\n\r\n\tsetInputElementTextLength(length: number) {\r\n\t\tthis.setState({inputElementTextLength: length});\r\n\t}\r\n\r\n\r\n\tsetIsDropDownMenuAccordingBehaviour() {\r\n\t\tif (!this.props.model.isSelected() && this.state.isDropDownMenu) {\r\n\t\t\tthis.setState({isDropDownMenu: false});\r\n\t\t\tthis.props.model.setLocked(false);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropDown() {\r\n\t\tif (this.state.isDropDownMenu) {\r\n\t\t\tthis.setState({isDropDownMenu: false});\r\n\t\t\tthis.props.model.setLocked(false);\r\n\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t}\r\n\t}\r\n\r\n\tgeneratePredicateComponent(elementName:string){\r\n\t\treturn <NaryListWidget engine={this.props.engine} model={this.props.model} elementName={elementName} type={PREDICATE} key={elementName}/>\r\n\t}\r\n\r\n\tgenerateFunctionComponent(elementName:string){\r\n\t\treturn <NaryListWidget engine={this.props.engine} model={this.props.model} elementName={elementName} type={FUNCTION} key={elementName}/>\r\n\t}\r\n\r\n\tgetWidestElement(): number {\r\n\t\tlet width: number = 3;\r\n\t\tlet compareWidth: number = getWidestElement(this.state.isDropDownMenu, this.state.inputElementTextLength, this.props.model, width, \"3\", \"2\");\r\n\r\n\t\tif (compareWidth > width) {\r\n\t\t\treturn compareWidth;\r\n\t\t}\r\n\r\n\t\treturn width;\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet width = this.getWidestElement();\r\n\t\treturn (\r\n\t\t\t<Element>\r\n\t\t\t\t<Node size={this.props.size}\r\n\t\t\t\t\t  pointerEvents={this.props.model.isEditable() ? \"auto\" : \"none\"}\r\n\t\t\t\t\t  cursor={this.props.model.isEditable() ? \"pointer\" : \"move\"}\r\n\t\t\t\t\t  onClick={() => {\r\n\t\t\t\t\t\t  selectOnlyCurrentGraphElement(this.props.model,this.props.engine);\r\n\t\t\t\t\t  }}>\r\n\r\n\r\n\t\t\t\t\t<svg width={this.props.size} height={this.props.size}>\r\n\t\t\t\t\t\t<g id=\"Layer_1\">\r\n\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t<g id=\"Layer_2\">\r\n\t\t\t\t\t\t\t<polygon\r\n\t\t\t\t\t\t\t\t\t points={\"5,\" + this.props.size / 2 + \" \" + this.props.size / 2 + \",0\" + \" \" + this.props.size + \",\" + this.props.size / 2 + \" \" + this.props.size / 2 + \",\" + this.props.size / 2}\r\n\t\t\t\t\t\t\t\t\t style={{\r\n\t\t\t\t\t\t\t\t\t\t fill: this.state.color,\r\n\t\t\t\t\t\t\t\t\t\t strokeMiterlimit: 10,\r\n\t\t\t\t\t\t\t\t\t\t strokeWidth: 2.5,\r\n\t\t\t\t\t\t\t\t\t\t stroke: this.props.model.isSelected() ? \"rgb(0,192,255)\" : \"#000000\"\r\n\t\t\t\t\t\t\t\t\t }}/>\r\n\t\t\t\t\t\t</g>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<PortWidget\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\ttop: this.props.size / 2 - 9,\r\n\t\t\t\t\t\t\tleft: 50+\"%\",\r\n\t\t\t\t\t\t\tmarginLeft: -35+\"px\",\r\n\t\t\t\t\t\t\tposition: 'absolute'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tport={this.props.model.getPortByIndex(0)}\r\n\t\t\t\t\t\tengine={this.props.engine}>\r\n\t\t\t\t\t\t<Port title={\"Prvý parameter\"}/>\r\n\t\t\t\t\t</PortWidget>\r\n\t\t\t\t\t<PortWidget\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tright: 50+\"%\",\r\n\t\t\t\t\t\t\tmarginRight: -38+\"px\",\r\n\t\t\t\t\t\t\ttop: this.props.size / 2 - 10,\r\n\t\t\t\t\t\t\tposition: 'absolute'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tport={this.props.model.getPortByIndex(1)}\r\n\t\t\t\t\t\tengine={this.props.engine}>\r\n\t\t\t\t\t\t<Port title={\"Druhý parameter\"}/>\r\n\t\t\t\t\t</PortWidget>\r\n\t\t\t\t\t<PortWidget\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\ttop: -15,\r\n\t\t\t\t\t\t\tposition: 'absolute'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tport={this.props.model.getPortByIndex(2)}\r\n\t\t\t\t\t\tengine={this.props.engine}>\r\n\t\t\t\t\t\t<Port title={\"Tretí parameter\"}/>\r\n\t\t\t\t\t</PortWidget>\r\n\t\t\t\t</Node>\r\n\t\t\t\t<NaryNodeList pointerEvents={this.props.model.isEditable() ? \"auto\" : \"none\"}\r\n\t\t\t\t\t\t\t  cursor={this.props.model.isEditable() ? \"pointer\" : \"move\"} s>\r\n\t\t\t\t\t<Elements>\r\n\t\t\t\t\t\t<ElementContainer>\r\n\t\t\t\t\t\t\t{_.map(Array.from(this.props.model.getPredicates()), this.generatePredicateComponent)}\r\n\t\t\t\t\t\t\t{_.map(Array.from(this.props.model.getFunctions()), this.generateFunctionComponent)}\r\n\t\t\t\t\t\t\t<PortWidget engine={this.props.engine}\r\n\t\t\t\t\t\t\t\t\t\tport={this.props.model.getAppendPort()}>\r\n\t\t\t\t\t\t\t<PortClassic title={\"Otvoriť/zatvoriť rozbaľovaciu ponuku\"} onClick={() => {\r\n\t\t\t\t\t\t\t\tif (this.state.isDropDownMenu) {\r\n\t\t\t\t\t\t\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\t\t\t\t\t\t\tthis.setState({isDropDownMenu: false});\r\n\t\t\t\t\t\t\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\t\t\t\t\t\t\tthis.props.model.setSelected(true);\r\n\t\t\t\t\t\t\t\t\tthis.setState({isDropDownMenu: true});\r\n\t\t\t\t\t\t\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t height={20}\r\n\t\t\t\t\t\t\t\t\t\t width={this.props.model.getOptions().name ? 0 : 20}>{this.state.isDropDownMenu ? ADDPORTSELECTED : ADDPORT}</PortClassic>\r\n\t\t\t\t\t\t\t</PortWidget>\r\n\t\t\t\t\t\t</ElementContainer>\r\n\t\t\t\t\t</Elements>\r\n\t\t\t\t</NaryNodeList>\r\n\t\t\t\t{(this.state.isDropDownMenu && this.props.model.isSelected()) ?\r\n\t\t\t\t\t<DropDownMenuWidget widthOfInputElement={width}\r\n\t\t\t\t\t\t\t\t\t\tsetStateInputElementTextLength={this.setInputElementTextLength}\r\n\t\t\t\t\t\t\t\t\t\tmodel={this.props.model}\r\n\t\t\t\t\t\t\t\t\t\tengine={this.props.engine} modelName={this.props.model.getNodeName()}\r\n\t\t\t\t\t\t\t\t\t\tarity={\"3\"}\r\n\t\t\t\t\t\t\t\t\t\tcloseDropDown={this.closeDropDown}/> : null\r\n\t\t\t\t}\r\n\t\t\t</Element>\r\n\t\t);\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { QuaternaryNodeModel } from './QuaternaryNodeModel';\r\nimport { DiagramEngine, PortWidget } from '@projectstorm/react-diagrams';\r\nimport styled from '@emotion/styled';\r\nimport {ElementContainer} from \"../../labels/binary/BinaryLabelWidget\";\r\nimport _ from \"lodash\";\r\nimport {Port as PortClassic} from \"../unbinary/UnBinaryPortLabelWidget\";\r\nimport {ADDPORT, ADDPORTSELECTED, FUNCTION, PREDICATE} from \"../ConstantNames\";\r\nimport {DropDownMenuWidget} from \"../DropDownMenuWidget\";\r\nimport {NaryNodeList} from \"../ternary/TernaryNodeWidget\";\r\nimport {NaryListWidget} from \"../NaryListWidget\";\r\nimport {getWidestElement, selectOnlyCurrentGraphElement} from '../functions';\r\n\r\nexport interface QuaternaryNodeWidgetProps {\r\n\tmodel: QuaternaryNodeModel;\r\n\tengine: DiagramEngine;\r\n\tsize?: number;\r\n}\r\n\r\ninterface QuaternaryNodeWidgetState {\r\n\tnodeName?:string;\r\n\tbadName?:boolean;\r\n\tcolor?:any;\r\n\tisDropDownMenu?:boolean;\r\n\tinputElementTextLength?:number;\r\n}\r\n\r\nexport const Element = styled.div`\r\n\tdisplay: flex;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n`;\r\n\r\nexport const Elements = styled.div`\r\n\t\tdisplay: flex;\r\n\t\tbackground-image: linear-gradient(rgba(256, 256, 256, 0.4), rgba(256, 256, 256, 0.5));\r\n\t`;\r\n\r\n\r\nexport const Port = styled.div`\r\n\twidth: 16px;\r\n\theight: 16px;\r\n\tz-index: 10;\r\n\tbackground: rgba(0, 0, 0, 0.5);\r\n\tborder-radius: 8px;\r\n\tcursor: pointer;\r\n\r\n\t&:hover {\r\n\t\tbackground: rgba(0, 0, 0, 1);\r\n\t}\r\n`;\r\n\r\nexport const Node = styled.div<{ size: number, pointerEvents: string, cursor:string}>`\r\n\tposition: 'relative';\r\n\tpointer-events: ${p => p.pointerEvents};\r\n\tcursor: ${p => p.cursor};\r\n\tdisplay:flex;\r\n\tjustify-content: center;\r\n\theight: 60px;\r\n`;\r\n\r\nexport class QuaternaryNodeWidget extends React.Component<QuaternaryNodeWidgetProps,QuaternaryNodeWidgetState> {\r\n\r\n\tconstructor(props: QuaternaryNodeWidgetProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tbadName: false,\r\n\t\t\tisDropDownMenu: false,\r\n\t\t\tcolor: \"rgb(255,255,0)\",\r\n\t\t\tinputElementTextLength: 0\r\n\t\t};\r\n\r\n\t\tthis.setInputElementTextLength = this.setInputElementTextLength.bind(this);\r\n\t\tthis.closeDropDown = this.closeDropDown.bind(this);\r\n\t\tthis.generateFunctionComponent = this.generateFunctionComponent.bind(this);\r\n\t\tthis.generatePredicateComponent = this.generatePredicateComponent.bind(this);\r\n\t}\r\n\r\n\r\n\tcomponentDidUpdate(): void {\r\n\t\tthis.setIsDropDownMenuAccordingBehaviour();\r\n\t}\r\n\r\n\tsetInputElementTextLength(length: number) {\r\n\t\tthis.setState({inputElementTextLength: length});\r\n\t}\r\n\r\n\r\n\tsetIsDropDownMenuAccordingBehaviour() {\r\n\t\tif (!this.props.model.isSelected() && this.state.isDropDownMenu) {\r\n\t\t\tthis.setState({isDropDownMenu: false});\r\n\t\t\tthis.props.model.setLocked(false);\r\n\t\t}\r\n\t}\r\n\r\n\tsetColor(color: any) {\r\n\t\tthis.setState({color: color});\r\n\t}\r\n\r\n\tcloseDropDown() {\r\n\t\tif (this.state.isDropDownMenu) {\r\n\t\t\tthis.setState({isDropDownMenu: false});\r\n\t\t\tthis.props.model.setLocked(false);\r\n\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t}\r\n\t}\r\n\r\n\tgeneratePredicateComponent(elementName:string){\r\n\t\treturn <NaryListWidget engine={this.props.engine} model={this.props.model} elementName={elementName} type={PREDICATE} key={elementName}/>\r\n\t}\r\n\r\n\tgenerateFunctionComponent(elementName:string){\r\n\t\treturn <NaryListWidget engine={this.props.engine} model={this.props.model} elementName={elementName} type={FUNCTION} key={elementName}/>\r\n\t}\r\n\r\n\tgetWidestElement(): number {\r\n\t\tlet width: number = 3;\r\n\t\tlet compareWidth: number = getWidestElement(this.state.isDropDownMenu, this.state.inputElementTextLength, this.props.model, width, \"1\", \"0\");\r\n\r\n\t\tif (compareWidth > width) {\r\n\t\t\treturn compareWidth;\r\n\t\t}\r\n\r\n\t\treturn width;\r\n\t}\r\n\trender() {\r\n\t\tlet width = this.getWidestElement();\r\n\t\treturn (\r\n\t\t\t<Element>\r\n\t\t\t\t<Node size={this.props.size}\r\n\t\t\t\t\t  pointerEvents={this.props.model.isEditable() ? \"auto\" : \"none\"}\r\n\t\t\t\t\t  cursor={this.props.model.isEditable() ? \"pointer\" : \"move\"}\r\n\t\t\t\t\t  onClick={() => {\r\n\t\t\t\t\t\t  selectOnlyCurrentGraphElement(this.props.model,this.props.engine);\r\n\t\t\t\t\t  }}>\r\n\r\n\r\n\t\t\t\t\t<svg width={this.props.size} height={this.props.size}>\r\n\t\t\t\t\t\t<g id=\"Layer_1\">\r\n\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t<g id=\"Layer_2\">\r\n\t\t\t\t\t\t\t<polygon\r\n\t\t\t\t\t\t\t\tpoints={\"10,\" + this.props.size / 2 + \" \" + this.props.size / 2 + \",10\" + \" \" + (this.props.size-10) + \",\" + this.props.size / 2 + \" \" + this.props.size / 2 + \",\" + (this.props.size -10)}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tfill: this.state.color,\r\n\t\t\t\t\t\t\t\t\tstrokeMiterlimit: 10,\r\n\t\t\t\t\t\t\t\t\tstrokeWidth: 2.5,\r\n\t\t\t\t\t\t\t\t\tstroke: this.props.model.isSelected() ? \"rgb(0,192,255)\" : \"#000000\"\r\n\t\t\t\t\t\t\t\t}}/>\r\n\t\t\t\t\t\t</g>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<PortWidget\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\ttop: this.props.size / 2 - 9,\r\n\t\t\t\t\t\t\tleft: 50+\"%\",\r\n\t\t\t\t\t\t\tmarginLeft: -32+\"px\",\r\n\t\t\t\t\t\t\tposition: 'absolute'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tport={this.props.model.getPortByIndex(0)}\r\n\t\t\t\t\t\tengine={this.props.engine}>\r\n\t\t\t\t\t\t<Port title={\"Prvý parameter\"} />\r\n\t\t\t\t\t</PortWidget>\r\n\t\t\t\t\t<PortWidget\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\ttop: this.props.size - 8,\r\n\t\t\t\t\t\t\tposition: 'absolute'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tport={this.props.model.getPortByIndex(1)}\r\n\t\t\t\t\t\tengine={this.props.engine}>\r\n\t\t\t\t\t\t<Port title={\"Druhý parameter\"} />\r\n\t\t\t\t\t</PortWidget>\r\n\r\n\t\t\t\t\t<PortWidget\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tright: 50+\"%\",\r\n\t\t\t\t\t\t\tmarginRight: -32+\"px\",\r\n\t\t\t\t\t\t\ttop: this.props.size / 2 - 9,\r\n\t\t\t\t\t\t\tposition: 'absolute'\r\n\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tport={this.props.model.getPortByIndex(2)}\r\n\t\t\t\t\t\tengine={this.props.engine}>\r\n\t\t\t\t\t\t<Port title={\"Tretí parameter\"} />\r\n\t\t\t\t\t</PortWidget>\r\n\t\t\t\t\t<PortWidget\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\ttop: -8,\r\n\t\t\t\t\t\t\tposition: 'absolute'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tport={this.props.model.getPortByIndex(3)}\r\n\t\t\t\t\t\tengine={this.props.engine}>\r\n\t\t\t\t\t\t<Port title={\"Štvrtý parameter\"} />\r\n\t\t\t\t\t</PortWidget>\r\n\r\n\t\t\t\t</Node>\r\n\t\t\t\t<NaryNodeList pointerEvents={this.props.model.isEditable() ? \"auto\" : \"none\"}\r\n\t\t\t\t\t\t\t  cursor={this.props.model.isEditable() ? \"pointer\" : \"move\"} s>\r\n\t\t\t\t\t<Elements>\r\n\t\t\t\t\t\t<ElementContainer>\r\n\t\t\t\t\t\t\t{_.map(Array.from(this.props.model.getPredicates()), this.generatePredicateComponent)}\r\n\t\t\t\t\t\t\t{_.map(Array.from(this.props.model.getFunctions()), this.generateFunctionComponent)}\r\n\t\t\t\t\t\t\t<PortWidget engine={this.props.engine}\r\n\t\t\t\t\t\t\t\t\t\tport={this.props.model.getAppendPort()}>\r\n\t\t\t\t\t\t\t\t<PortClassic title={\"Otvoriť/zatvoriť rozbaľovaciu ponuku\"} onClick={() => {\r\n\t\t\t\t\t\t\t\t\tif (this.state.isDropDownMenu) {\r\n\t\t\t\t\t\t\t\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({isDropDownMenu: false});\r\n\t\t\t\t\t\t\t\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis.props.engine.getModel().clearSelection();\r\n\t\t\t\t\t\t\t\t\t\tthis.props.model.setSelected(true);\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({isDropDownMenu: true});\r\n\t\t\t\t\t\t\t\t\t\tthis.props.engine.repaintCanvas();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t height={20}\r\n\t\t\t\t\t\t\t\t\t\t\t width={this.props.model.getOptions().name ? 0 : 20}>{this.state.isDropDownMenu ? ADDPORTSELECTED : ADDPORT}</PortClassic>\r\n\t\t\t\t\t\t\t</PortWidget>\r\n\t\t\t\t\t\t</ElementContainer>\r\n\t\t\t\t\t</Elements>\r\n\t\t\t\t</NaryNodeList>\r\n\t\t\t\t{(this.state.isDropDownMenu && this.props.model.isSelected()) ?\r\n\t\t\t\t\t<DropDownMenuWidget widthOfInputElement={width}\r\n\t\t\t\t\t\t\t\t\t\tsetStateInputElementTextLength={this.setInputElementTextLength}\r\n\t\t\t\t\t\t\t\t\t\tmodel={this.props.model}\r\n\t\t\t\t\t\t\t\t\t\tengine={this.props.engine} modelName={this.props.model.getNodeName()}\r\n\t\t\t\t\t\t\t\t\t\tarity={\"4\"}\r\n\t\t\t\t\t\t\t\t\t\tcloseDropDown={this.closeDropDown}/> : null\r\n\t\t\t\t}\r\n\t\t\t</Element>\r\n\t\t);\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport {Node as UnbinaryNode, Ports as UnbinaryPorts, PortsContainer as UnbinaryPortsContainer, Title as UnbinaryTittle, TitleName as UnbinaryTittleName} from \"../nodes/unbinary/UnBinaryNodeWidget\";\r\nimport {Port as UnbinaryPort} from \"../nodes/unbinary/UnBinaryPortLabelWidget\";\r\nimport {Node as ConstantNode, Title as ConstantTitle, TitleName as ConstantTitleName} from \"../nodes/constant/ConstantNodeWidget\";\r\nimport {Node as QuaternaryNode} from \"../nodes/quaternary/QuaternaryNodeWidget\";\r\nimport {Node as TernaryNode} from \"../nodes/ternary/TernaryNodeWidget\";\r\nimport {ADDPORT} from \"../nodes/ConstantNames\";\r\n\r\nexport const UnbinaryIcon = () =>{\r\n    return(\r\n        <UnbinaryNode style={{pointerEvents:\"none\"}}>\r\n            <UnbinaryTittle>\r\n                <UnbinaryTittleName>\r\n                    Node\r\n                </UnbinaryTittleName>\r\n            </UnbinaryTittle>\r\n\r\n            <UnbinaryPorts>\r\n            <UnbinaryPortsContainer>\r\n                <UnbinaryPort>{ADDPORT}</UnbinaryPort>\r\n            </UnbinaryPortsContainer>\r\n        </UnbinaryPorts>\r\n        </UnbinaryNode>\r\n    )\r\n};\r\n\r\nexport const ConstantIcon = () =>{\r\n    return(\r\n        <ConstantNode style={{pointerEvents:\"none\"}}>\r\n            <ConstantTitle>\r\n                <ConstantTitleName>\r\n                    Const\r\n                </ConstantTitleName>\r\n            </ConstantTitle>\r\n        </ConstantNode>\r\n    )\r\n};\r\n\r\nexport const TernaryIcon = () =>{\r\n    let size = 50;\r\n    return(\r\n        <TernaryNode size={size}>\r\n            <svg\r\n                width={size}\r\n                height={27}\r\n                dangerouslySetInnerHTML={{\r\n                    __html:\r\n                        `\r\n          <g id=\"Layer_1\">\r\n          </g>\r\n          <g id=\"Layer_2\">\r\n            <polygon fill=\"rgb(255,255,0)\" stroke=\"#000000\" stroke-width=\"2.5\" stroke-miterlimit=\"10\" points=\"5,` +\r\n                        size / 2 +\r\n                        ` ` +\r\n                        size / 2 +\r\n                        `,0 ` +\r\n                        (size) +\r\n                        `,` +\r\n                        size / 2 +\r\n                        ` ` +\r\n                        size / 2 +\r\n                        `,` +\r\n                        (size/2) +\r\n                        `\"/>\r\n          </g>\r\n        `\r\n                }}\r\n            />\r\n\r\n        </TernaryNode>\r\n    )\r\n};\r\n\r\nexport const QuaternaryIcon = () =>{\r\n    let size = 50;\r\n    return(\r\n        <QuaternaryNode size={50}>\r\n            <svg\r\n                width={size}\r\n                height={size}\r\n                dangerouslySetInnerHTML={{\r\n                    __html:\r\n                        `\r\n          <g id=\"Layer_1\">\r\n          </g>\r\n          <g id=\"Layer_2\">\r\n            <polygon fill=\"rgb(255,255,0)\" stroke=\"#000000\" stroke-width=\"2.5\" stroke-miterlimit=\"10\" points=\"10,` +\r\n                        size / 2 +\r\n                        ` ` +\r\n                        size / 2 +\r\n                        `,10 ` +\r\n                        (size - 10) +\r\n                        `,` +\r\n                        size / 2 +\r\n                        ` ` +\r\n                        size / 2 +\r\n                        `,` +\r\n                        (size - 10) +\r\n                        ` \"/>\r\n          </g>\r\n        `\r\n                }}\r\n            />\r\n        </QuaternaryNode>\r\n    )\r\n};\r\n\r\n","import * as React from 'react';\r\nimport { TrayWidget } from './TrayWidget';\r\nimport {ItemWidgetIcon} from './TrayItemWidget';\r\nimport { CanvasWidget} from '@projectstorm/react-canvas-core';\r\nimport { MainCanvasWidget} from './MainCanvasWidget';\r\nimport styled from '@emotion/styled';\r\nimport {UnBinaryNodeModel} from \"../nodes/unbinary/UnBinaryNodeModel\";\r\nimport {ConstantNodeModel} from \"../nodes/constant/ConstantNodeModel\";\r\nimport {QuaternaryNodeModel} from \"../nodes/quaternary/QuaternaryNodeModel\";\r\nimport {TernaryNodeModel} from \"../nodes/ternary/TernaryNodeModel\";\r\nimport FontAwesome from \"react-fontawesome\";\r\nimport {Button} from 'react-bootstrap';\r\nimport {ConstantIcon, QuaternaryIcon, TernaryIcon, UnbinaryIcon} from \"./TrayItemWidgetIcon\";\r\nimport {importDiagramState} from \"../../redux/actions\";\r\nimport {CONSTANTNODE, QUATERNARYNODE, TERNARYNODE, UNBINARYNODE} from \"../nodes/ConstantNames\";\r\n\r\nexport interface BodyWidgetProps {\r\n\tsyncDiagram:any;\r\n\taddDomainNode:any;\r\n\taddConstantNode:any;\r\n\taddTernaryNode:any;\r\n\taddQuaternaryNode:any;\r\n\trenameDomainNode:any;\r\n\trenameConstantNode:any;\r\n\tremoveDomainNode:any;\r\n\tremoveConstantNode:any;\r\n\tremoveTernaryNode:any;\r\n\tremoveQuaternaryNode:any;\r\n\taddUnaryPredicate:any;\r\n\taddUnaryFunction:any;\r\n\taddBinaryPredicate:any;\r\n\taddBinaryFunction:any;\r\n\taddTernaryPredicate:any;\r\n\taddTernaryFunction:any;\r\n\taddQuaternaryPredicate:any;\r\n\tremoveUnaryPredicate:any;\r\n\tremoveUnaryFunction:any;\r\n\tremoveBinaryPredicate:any;\r\n\tremoveBinaryFunction:any;\r\n\tremoveTernaryPredicate:any;\r\n\tremoveTernaryFunction:any;\r\n\tremoveQuaternaryPredicate:any;\r\n\ttoggleEditableNodes:any;\r\n\tsetConstantValueFromLink:any;\r\n\tchangeDirectionOfBinaryRelation:any;\r\n\tdiagramState:any;\r\n\tstore:any;\r\n}\r\n\r\n\texport const Body = styled.div`\r\n\t\tflex-grow: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t`;\r\n\r\n\texport const Content = styled.div`\r\n\t\tdisplay: flex;\r\n\t\tflex-grow: 1;\r\n\t`;\r\n\r\n\texport const Layer = styled.div`\r\n\t\tposition: relative;\r\n\t\tflex-grow: 1;\r\n\t`;\r\n\r\n\r\n\tfunction getAvailableCount(nodeType:string,diagramState:any):number {\r\n\t\tlet nodeCount:number = 0;\r\n\t\tlet name: string;\r\n\t\tlet state:Map<string,object>;\r\n\t\tif (nodeType === 'unbinary') {\r\n\t\t\tstate = diagramState.domainNodes;\r\n\t\t\tname = UNBINARYNODE;\r\n\t\t\t}\r\n\r\n\t\telse if(nodeType === 'constant'){\r\n\t\t\tstate = diagramState.constantNodes;\r\n\t\t\tname = CONSTANTNODE;\r\n\t\t}\r\n\r\n\t\telse if(nodeType === 'ternary'){\r\n\t\t\tstate = diagramState.ternaryNodes;\r\n\t\t\tname = TERNARYNODE;\r\n\t\t}\r\n\r\n\t\telse{\r\n\t\t\tstate = diagramState.quaternaryNodes;\r\n\t\t\tname = QUATERNARYNODE;\r\n\t\t}\r\n\r\n\t\twhile(state.has(name+nodeCount)){\r\n\t\t\tnodeCount++;\r\n\t\t}\r\n\t\treturn nodeCount;\r\n\t}\r\n\r\n\tfunction createNode(element:any,event:any,reduxProps:any,clicked:boolean=true) {\r\n\t\tlet data;\r\n\t\tif (clicked) {\r\n\t\t\tdata = JSON.parse(event);\r\n\t\t} else {\r\n\t\t\tdata = JSON.parse(event.dataTransfer.getData('storm-graph_view-node'));\r\n\t\t}\r\n\r\n\t\tlet nodesCount = getAvailableCount(data.type,element.props.diagramState);\r\n\r\n\t\tlet node: any;\r\n\t\tif (data.type === 'unbinary') {\r\n\t\t\tnode = new UnBinaryNodeModel(UNBINARYNODE + nodesCount, 'rgb(92,192,125)', reduxProps);\r\n\t\t\treduxProps.addDomainNode(node.getOptions().name,node);\r\n\r\n\t\t} else if (data.type === 'constant') {\r\n\t\t\tnode = new ConstantNodeModel(CONSTANTNODE + nodesCount, 'rgb(92,192,125)', reduxProps);\r\n\t\t\treduxProps.addConstantNode(node.getOptions().name,node);\r\n\t\t}\r\n\r\n\t\telse if(data.type === 'ternary'){\r\n\t\t\tnode = new TernaryNodeModel({name:TERNARYNODE+nodesCount,reduxProps:reduxProps,numberOfPorts:3});\r\n\t\t\treduxProps.addTernaryNode(node.getOptions().name,node);\r\n\t\t}\r\n\r\n\t\telse if (data.type === 'quaternary') {\r\n\t\t\tnode = new QuaternaryNodeModel({name:QUATERNARYNODE+nodesCount,reduxProps:reduxProps,numberOfPorts:4});\r\n\t\t\treduxProps.addQuaternaryNode(node.getOptions().name,node);\r\n\t\t}\r\n\r\n\t\telse {\r\n\t\t\tthrow new Error(\"Node cannot be null, possible leak of unknown type\");\r\n\t\t}\r\n\r\n\t\tlet point;\r\n\r\n\t\tlet diagramEngine = element.props.diagramState.diagramEngine;\r\n\r\n\t\tif (clicked) {\r\n\t\t\tlet canvasWidth = diagramEngine.getCanvas().clientWidth;\r\n\t\t\tlet canvasHeight = diagramEngine.getCanvas().clientHeight;\r\n\t\t\tpoint = {x: Math.random()*(canvasWidth-canvasWidth*0.2)+canvasWidth*0.05, y: Math.random()*(canvasHeight-canvasHeight*0.2)+canvasHeight*0.05};\r\n\t\t} else {\r\n\t\t\tpoint = diagramEngine.getRelativeMousePoint(event);\r\n\t\t}\r\n\r\n\t\tnode.setPosition(point);\r\n\t\tdiagramEngine.getModel().addNode(node);\r\n\t\telement.forceUpdate();\r\n\t}\r\n\r\nexport class BodyWidget extends React.Component<BodyWidgetProps,any> {\r\n\tbody: any;\r\n\treduxProps: any;\r\n\r\n\tconstructor(props: any) {\r\n\t\tsuper(props);\r\n\t\tthis.focusOnBodyElement = this.focusOnBodyElement.bind(this);\r\n\r\n\t\tthis.reduxProps = {\r\n\t\t\t\"addDomainNode\": this.props.addDomainNode,\r\n\t\t\t\"addConstantNode\": this.props.addConstantNode,\r\n\t\t\t\"addTernaryNode\": this.props.addTernaryNode,\r\n\t\t\t\"addQuaternaryNode\": this.props.addQuaternaryNode,\r\n\t\t\t\"renameDomainNode\": this.props.renameDomainNode,\r\n\t\t\t\"removeDomainNode\": this.props.removeDomainNode,\r\n\t\t\t\"renameConstantNode\": this.props.renameConstantNode,\r\n\t\t\t\"removeConstantNode\": this.props.removeConstantNode,\r\n\t\t\t\"removeTernaryNode\": this.props.removeTernaryNode,\r\n\t\t\t\"removeQuaternaryNode\": this.props.removeQuaternaryNode,\r\n\t\t\t\"addUnaryPredicate\": this.props.addUnaryPredicate,\r\n\t\t\t\"addUnaryFunction\": this.props.addUnaryFunction,\r\n\t\t\t\"addBinaryPredicate\": this.props.addBinaryPredicate,\r\n\t\t\t\"addBinaryFunction\" : this.props.addBinaryFunction,\r\n\t\t\t\"addTernaryPredicate\": this.props.addTernaryPredicate,\r\n\t\t\t\"addTernaryFunction\" : this.props.addTernaryFunction,\r\n\t\t\t\"addQuaternaryPredicate\": this.props.addQuaternaryPredicate,\r\n\t\t\t\"removeUnaryPredicate\": this.props.removeUnaryPredicate,\r\n\t\t\t\"removeUnaryFunction\": this.props.removeUnaryFunction,\r\n\t\t\t\"removeBinaryPredicate\": this.props.removeBinaryPredicate,\r\n\t\t\t\"removeBinaryFunction\" : this.props.removeBinaryFunction,\r\n\t\t\t\"removeTernaryPredicate\" : this.props.removeTernaryPredicate,\r\n\t\t\t\"removeTernaryFunction\" : this.props.removeTernaryFunction,\r\n\t\t\t\"removeQuaternaryPredicate\": this.props.removeQuaternaryPredicate,\r\n\t\t\t\"setConstantValueFromLink\": this.props.setConstantValueFromLink,\r\n\t\t\t\"changeDirectionOfBinaryRelation\": this.props.changeDirectionOfBinaryRelation,\r\n\t\t\t\"focusOnBodyElement\": this.focusOnBodyElement,\r\n\t\t\t\"editable\": this.props.diagramState.editableNodes,\r\n\t\t\t\"store\": this.props.store,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount(): void {\r\n\t\tif(this.props.diagramState.imported) {\r\n\t\t\tthis.props.store.dispatch(importDiagramState(this.props.store.getState()));\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.props.syncDiagram(this.props,this.focusOnBodyElement);\r\n\t\t}\r\n\t\tthis.focusOnBodyElement();\r\n\t}\r\n\tcomponentDidUpdate(): void {\r\n\t\tif(this.props.diagramState.imported){\r\n\t\t\tthis.props.store.dispatch(importDiagramState({...this.props.store.getState(),...this.reduxProps},this.focusOnBodyElement));\r\n\t\t}\r\n\t\tthis.reduxProps[\"editable\"] = this.props.diagramState.editableNodes;\r\n\t}\r\n\r\n\tfocusOnBodyElement(){\r\n\t\tif(this.body){\r\n\t\t\tthis.body.focus();\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet editableNodes = this.props.diagramState.editableNodes;\r\n\t\tlet editableNodesFunction = this.props.toggleEditableNodes;\r\n\r\n\t\treturn (\r\n\t\t\t<Body ref={Body => this.body = Body} tabIndex={1} onKeyPress={(e: any) => {\r\n\t\t\t\tlet exclude = ['input', 'textarea'];\r\n\t\t\t\tif (!exclude.includes(e.target.tagName.toLowerCase())) {\r\n\t\t\t\t\tif (e.key === ';' || e.key === '`') {\r\n\t\t\t\t\t\teditableNodes ? editableNodesFunction(false) : editableNodesFunction(true);\r\n\t\t\t\t\t} else if (e.key.toLowerCase() === 'p') {\r\n\t\t\t\t\t\teditableNodesFunction(false);\r\n\t\t\t\t\t} else if (e.key.toLowerCase() === 'e') {\r\n\t\t\t\t\t\teditableNodesFunction(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t\t\t  onKeyDown={(e:any) => {\r\n\t\t\t\t\t  if (e.key === \"Escape\") {\r\n\t\t\t\t\t\t  this.props.diagramState.diagramEngine.getModel().clearSelection();\r\n\t\t\t\t\t\t  this.props.diagramState.diagramEngine.repaintCanvas();\r\n\t\t\t\t\t  }\r\n\t\t\t\t  }}\r\n\t\t\t>\r\n\t\t\t\t<Content>\r\n\t\t\t\t\t<TrayWidget>\r\n\t\t\t\t\t\t<Button title={\"Pohyb po grafe (P)\"} variant={\"outline-primary\"}\r\n\t\t\t\t\t\t\t\tclassName={editableNodes ? \"\" : \"active\"} onClick={() => {\r\n\t\t\t\t\t\t\teditableNodesFunction(false)\r\n\t\t\t\t\t\t}}><FontAwesome name={\"fas fa-arrows-alt\"}/></Button>\r\n\t\t\t\t\t\t<Button title={\"Editovanie grafu (E)\"} variant={\"outline-primary\"}\r\n\t\t\t\t\t\t\t\tclassName={editableNodes ? \"active\" : \"\"} onClick={() => {\r\n\t\t\t\t\t\t\teditableNodesFunction(true)\r\n\t\t\t\t\t\t}}><FontAwesome name={\"fas fa-edit\"}/></Button>\r\n\r\n\t\t\t\t\t\t<ItemWidgetIcon model={{type: 'unbinary'}} clickFunction={createNode} element={this}\r\n\t\t\t\t\t\t\t\t\t\tname=\"Pridaj unárny/binárny\" color=\"rgb(125,192,125)\"\r\n\t\t\t\t\t\t\t\t\t\treduxProps={this.reduxProps}\r\n\t\t\t\t\t\t\t\t\t\ttitle={\"Pridať vrchol, ktorý predstavuje prvok domény. Tomuto prvku je možné následne pridať unárne predikáty a vytvarať binárne väzby\"}\r\n\t\t\t\t\t\t\t\t\t\tchildren={<UnbinaryIcon/>}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<ItemWidgetIcon model={{type: 'constant'}} clickFunction={createNode} element={this}\r\n\t\t\t\t\t\t\t\t\t\tname=\"Pridaj konštantu\" color=\"rgb(125,192,125)\"\r\n\t\t\t\t\t\t\t\t\t\treduxProps={this.reduxProps}\r\n\t\t\t\t\t\t\t\t\t\ttitle={\"Pridať vrchol, ktorý predstavuje konštanty. Vytvorením linky priradíme konštante prvok domény\"}\r\n\t\t\t\t\t\t\t\t\t\tchildren={<ConstantIcon/>}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<ItemWidgetIcon model={{type: 'ternary'}} clickFunction={createNode} element={this}\r\n\t\t\t\t\t\t\t\t\t\tname= \"Pridaj ternárny\" color=\"rgb(128,96,245)\"\r\n\t\t\t\t\t\t\t\t\t\treduxProps={this.reduxProps}\r\n\t\t\t\t\t\t\t\t\t\ttitle={\"Pridať vrchol, ktorý predstavuje ternárny vzťah pre predikáty a binárny vzťah pre funkcie\"}\r\n\t\t\t\t\t\t\t\t\t\tchildren={<TernaryIcon/>}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<ItemWidgetIcon model={{type: 'quaternary'}} clickFunction={createNode} element={this}\r\n\t\t\t\t\t\t\t\t\t\tname=\"Pridaj štvornárny\" color=\"rgb(128,96,245)\"\r\n\t\t\t\t\t\t\t\t\t\treduxProps={this.reduxProps}\r\n\t\t\t\t\t\t\t\t\t\ttitle={\"Pridať vrchol, ktorý predstavuje quaternárny vzťah pre predikáty a ternárny vzťah pre funkcie\"}\r\n\t\t\t\t\t\t\t\t\t\tchildren={<QuaternaryIcon/>}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t</TrayWidget>\r\n\t\t\t\t\t<Layer\r\n\t\t\t\t\t\tonDrop={event => {\r\n\t\t\t\t\t\t\tcreateNode(this, event, this.reduxProps, false);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonDragOver={event => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<MainCanvasWidget>\r\n\t\t\t\t\t\t\t<CanvasWidget engine={this.props.diagramState.diagramEngine}/>\r\n\t\t\t\t\t\t</MainCanvasWidget>\r\n\t\t\t\t\t</Layer>\r\n\t\t\t\t</Content>\r\n\t\t\t</Body>\r\n\t\t);\r\n\t}\r\n}\r\n","import {\r\n  lockConstantValue,\r\n  lockDomain,\r\n  lockFunctionValue,\r\n  lockPredicateValue,\r\n  setConstantValue,\r\n  setFunctionValueTable,\r\n  setFunctionValueText,\r\n  setPredicateValueTable,\r\n  setPredicateValueText,\r\n  toggleDatabase,\r\n  toggleTable,\r\n  renameDomainNode,\r\n  syncDiagram,\r\n  addDomainNode,\r\n  removeDomainNode,\r\n  addConstantNode,\r\n  removeConstantNode,\r\n  addUnaryPredicate,\r\n  removeUnaryPredicate,\r\n  toggleEditableNodes,\r\n  renameConstantNode,\r\n  setConstantValueFromLink,\r\n  addBinaryPredicate,\r\n  removeBinaryPredicate,\r\n  changeDirectionOfBinaryRelation,\r\n  addUnaryFunction,\r\n  removeUnaryFunction,\r\n  addTernaryNode,\r\n  addQuaternaryNode,\r\n  removeTernaryNode,\r\n  removeQuaternaryNode,\r\n  addBinaryFunction,\r\n  addTernaryPredicate,\r\n  addTernaryFunction,\r\n  addQuaternaryPredicate,\r\n  removeTernaryPredicate,\r\n  removeTernaryFunction,\r\n  removeQuaternaryPredicate,\r\n  removeBinaryFunction,\r\n} from \"../actions\";\r\nimport {connect} from 'react-redux';\r\nimport {BodyWidget} from \"../../graph_view/components/BodyWidget\";\r\n\r\nconst mapStateToProps = (state,ownProps) => ({\r\n  structure: state.structure,\r\n  structureObject: state.structureObject,\r\n  diagramState: state.diagramState,\r\n  store: ownProps.store\r\n});\r\n\r\nconst mapDispatchOnProps = {\r\n  addDomainNode: addDomainNode,\r\n  addConstantNode: addConstantNode,\r\n  addTernaryNode: addTernaryNode,\r\n  renameDomainNode: renameDomainNode,\r\n  renameConstantNode: renameConstantNode,\r\n  removeDomainNode: removeDomainNode,\r\n  removeConstantNode: removeConstantNode,\r\n  removeTernaryNode: removeTernaryNode,\r\n  removeQuaternaryNode: removeQuaternaryNode,\r\n  addQuaternaryNode: addQuaternaryNode,\r\n  addUnaryPredicate: addUnaryPredicate,\r\n  addUnaryFunction: addUnaryFunction,\r\n  addBinaryPredicate: addBinaryPredicate,\r\n  addBinaryFunction: addBinaryFunction,\r\n  addTernaryPredicate: addTernaryPredicate,\r\n  addTernaryFunction: addTernaryFunction,\r\n  addQuaternaryPredicate: addQuaternaryPredicate,\r\n  removeUnaryFunction: removeUnaryFunction,\r\n  removeUnaryPredicate: removeUnaryPredicate,\r\n  removeBinaryPredicate: removeBinaryPredicate,\r\n  removeBinaryFunction: removeBinaryFunction,\r\n  removeTernaryPredicate: removeTernaryPredicate,\r\n  removeTernaryFunction: removeTernaryFunction,\r\n  removeQuaternaryPredicate: removeQuaternaryPredicate,\r\n  syncDiagram: syncDiagram,\r\n  setConstantValue: setConstantValue,\r\n  setPredicateValueText: setPredicateValueText,\r\n  setPredicateValueTable: setPredicateValueTable,\r\n  setFunctionValueText: setFunctionValueText,\r\n  setFunctionValueTable: setFunctionValueTable,\r\n  toggleTable: toggleTable,\r\n  toggleDatabase: toggleDatabase,\r\n  lockDomain: lockDomain,\r\n  lockConstantValue: lockConstantValue,\r\n  lockPredicateValue: lockPredicateValue,\r\n  lockFunctionValue: lockFunctionValue,\r\n  toggleEditableNodes: toggleEditableNodes,\r\n  setConstantValueFromLink: setConstantValueFromLink,\r\n  changeDirectionOfBinaryRelation: changeDirectionOfBinaryRelation\r\n};\r\n\r\nconst DiagramModelContainer = connect(\r\n   mapStateToProps,\r\n   mapDispatchOnProps\r\n)(BodyWidget);\r\n\r\nexport default DiagramModelContainer;","import React from 'react';\r\nimport FontAwesome from 'react-fontawesome';\r\nimport {Button} from \"react-bootstrap\";\r\n\r\nconst TableButton = ({onClick,enabled}) => (\r\n   <Button onClick={() => onClick()} variant={\"outline-secondary\"} className={\"btn-with-border \"+(enabled?\"active\":\"\")}>\r\n     <FontAwesome name='fas fa-table'/>\r\n   </Button>\r\n);\r\nexport default TableButton;","import React from 'react';\r\nimport FontAwesome from 'react-fontawesome';\r\nimport {Button} from \"react-bootstrap\";\r\n\r\nconst DatabaseButton = ({onClick,enabled}) => (\r\n    <Button onClick={() => onClick()} variant={\"outline-secondary\"} className={\"btn-with-border \"+(enabled?'active':'')}>\r\n        <FontAwesome name='fas fa-server'/>\r\n    </Button>\r\n);\r\n\r\nexport default DatabaseButton;","import React from 'react';\r\nimport {InputGroup, Form} from 'react-bootstrap';\r\nimport LockButton from \"../buttons/LockButton\";\r\nimport TableButton from \"../buttons/TableButton\";\r\nimport DatabaseButton from \"../buttons/DatabaseButton\";\r\n\r\nconst TextInput = ({onChange, onLock, textData, label, teacherMode, id, toggleTable, toggleDatabase, arity, domain, placeholder,databaseEnabled,tableEnabled,errorProperty}) => (\r\n    <InputGroup>\r\n        <InputGroup.Prepend>\r\n            <InputGroup.Text>{label}</InputGroup.Text>\r\n        </InputGroup.Prepend>\r\n\r\n            <Form.Control\r\n                isInvalid={(errorProperty && errorProperty.length > 0)}\r\n                id={id}\r\n                type='text'\r\n                onChange={(e) => onChange(e)}\r\n                value={textData.value}\r\n                disabled={textData.locked}\r\n                placeholder={placeholder}\r\n            />\r\n     <InputGroup.Append>\r\n         <InputGroup.Text>&#125;</InputGroup.Text>\r\n         {toggleTable ? (\r\n             (arity === 0 || arity > 2 || domain.length === 0) ? null : (\r\n                     <TableButton onClick={() => toggleTable()} enabled={tableEnabled}/>\r\n             )\r\n         ):null}\r\n\r\n         {toggleDatabase?(\r\n             (arity < 1 || domain.length === 0)? null :(\r\n                     <DatabaseButton onClick={() => toggleDatabase()} enabled={databaseEnabled}/>\r\n             )\r\n         ) : null}\r\n\r\n         {teacherMode ? (\r\n         <LockButton lockFn={() => onLock()} locked={textData.locked}/>\r\n         ) : null}\r\n     </InputGroup.Append>\r\n        <Form.Control.Feedback type={\"invalid\"}>{errorProperty}</Form.Control.Feedback>\r\n   </InputGroup>\r\n\r\n);\r\n\r\nexport default TextInput;","import {Col, Form, Row} from \"react-bootstrap\";\r\nimport TextInput from \"./TextInput\";\r\nimport React from \"react\";\r\n\r\nfunction TextComponent({labelText,onChangeSetFunction,onLockFunction,textData,textInputLabel,idName,placeholderText,errorProperty,teacherMode}){\r\n    return(\r\n        <Row>\r\n            <Col lg={12}>\r\n                    <Form.Group>\r\n                        <Form.Label>{labelText}</Form.Label>\r\n                        <TextInput\r\n                            errorProperty={errorProperty}\r\n                            onChange={(e) => onChangeSetFunction(e.target.value)}\r\n                                   onLock={() => onLockFunction()}\r\n                                   textData={textData}\r\n                                   label={textInputLabel}\r\n                                   teacherMode={teacherMode}\r\n                                   id={idName}\r\n                                   placeholder={placeholderText}/>\r\n                    </Form.Group>\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default TextComponent;","import React from 'react';\r\nimport Card from \"react-bootstrap/Card\";\r\nimport HelpButton from \"../buttons/HelpButton\";\r\nimport TextComponent from \"../components_parts/TextComponent\";\r\n\r\nconst help = (\r\n    <div className=\"collapse\" id=\"help-language\">\r\n     <div className=\"well\">\r\n       Tu sa definuje jazyk. <strong>Symboly konštánt</strong> sa definujú oddelene\r\n       čiarkou. <strong>Symboly predikátov</strong> sa definujú oddelené čiarkami, vo\r\n       formáte <code>predikat/arita</code>. <strong>Symboly funkcií</strong> sa definujú oddelené čiarkami, vo\r\n       formáte <code>funkcia/arita</code>.\r\n     </div>\r\n   </div>\r\n);\r\n\r\nconst Language = (props) => (\r\n   <Card className={\"no-border-radius\"}>\r\n     <Card.Header as=\"h5\" className={\"d-flex justify-content-between\"}>\r\n         <span>Jazyk 𝓛</span>\r\n         <HelpButton dataTarget={\"#help-language\"}/>\r\n     </Card.Header>\r\n     <Card.Body>\r\n       {help}\r\n       <TextComponent labelText={\"Symboly konštánt\"}\r\n                      errorProperty={props.language.constants.errorMessage}\r\n                      onChangeSetFunction={props.setConstants}\r\n                      onLockFunction={props.lockConstants}\r\n                      textData={props.language.constants}\r\n                      textInputLabel={<span>𝓒<sub>𝓛</sub> = &#123;</span>}\r\n                      teacherMode={props.teacherMode}\r\n                      idName={'language-editor-constants'}\r\n                      placeholderText={'a, b, c, ...'}\r\n       />\r\n\r\n       <TextComponent labelText={\"Predikátové symboly\"}\r\n                      errorProperty={props.language.predicates.errorMessage}\r\n                      onChangeSetFunction={props.setPredicates}\r\n                      onLockFunction={props.lockPredicates}\r\n                      textData={props.language.predicates}\r\n                      textInputLabel={<span>𝓟<sub>𝓛</sub> = &#123;</span>}\r\n                      teacherMode={props.teacherMode}\r\n                      idName={'language-editor-predicates'}\r\n                      placeholderText={\"likes/2, hates/2, man/1, ...\"}\r\n       />\r\n\r\n       <TextComponent labelText={\"Funkčné symboly\"}\r\n                      errorProperty={props.language.functions.errorMessage}\r\n                      onChangeSetFunction={props.setFunctions}\r\n                      onLockFunction={props.lockFunctions}\r\n                      textData={props.language.functions}\r\n                      textInputLabel={<span>𝓕<sub>𝓛</sub> = &#123;</span>}\r\n                      teacherMode={props.teacherMode}\r\n                      idName={'language-editor-functions'}\r\n                      placeholderText={'mother/1, father/1, ...'}\r\n       />\r\n\r\n     </Card.Body>\r\n   </Card>\r\n);\r\n\r\nexport default Language;","import {connect} from 'react-redux';\r\nimport {setConstants, setFunctions, setPredicates} from \"../actions\";\r\nimport Language from '../../math_view/components/Language';\r\nimport {lockConstants, lockFunctions, lockPredicates} from \"../actions\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  language: state.language,\r\n  teacherMode: state.common.teacherMode\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  setConstants: setConstants,\r\n  setPredicates: setPredicates,\r\n  setFunctions: setFunctions,\r\n  lockConstants: lockConstants,\r\n  lockPredicates: lockPredicates,\r\n  lockFunctions: lockFunctions\r\n};\r\n\r\nconst LanguageContainer = connect(\r\n   mapStateToProps,\r\n   mapDispatchToProps\r\n)(Language);\r\n\r\nexport default LanguageContainer;","import React from 'react';\r\nimport {Col, Form, Row} from \"react-bootstrap\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport TextInput from \"../components_parts/TextInput\";\r\nimport HelpButton from \"../buttons/HelpButton\";\r\n\r\nconst help = (\r\n   <div className=\"collapse\" id=\"help-variables\">\r\n     <div className=\"well\">\r\n       Tu sa definujú hodnoty premenných. Za premennú sa považuje každý symbol, ktorý nie je v jazyku. Syntax\r\n       zapisovania má formát <code>(premenná, hodnota)</code>.\r\n     </div>\r\n   </div>\r\n);\r\n\r\nconst VariablesValue = (props) => (\r\n   <Card className={\"mt-3\"}>\r\n     <Card.Header as=\"h5\" className={\"d-flex justify-content-between\"}>\r\n       <span>Ohodnotenie premenných</span>\r\n         <HelpButton dataTarget={\"#help-variables\"}/>\r\n     </Card.Header>\r\n     <Card.Body>\r\n       {help}\r\n       <Row>\r\n         <Col lg={12}>\r\n             <Form.Group>\r\n                 <Form.Label>Ohodnotenie premenných</Form.Label>\r\n               <TextInput\r\n                            errorProperty={props.variables.errorMessage}\r\n                            onChange={(e) => props.onInputChange(e.target.value)}\r\n                            onLock={() => props.lockInput()}\r\n                            textData={props.variables}\r\n                            label={<span><var>e</var> = &#123;</span>}\r\n                            teacherMode={props.teacherMode}\r\n                            id='editor-variables'\r\n                            placeholder='(x,1), (y,2), (z,3), ...'/>\r\n             </Form.Group>\r\n         </Col>\r\n       </Row>\r\n     </Card.Body>\r\n   </Card>\r\n);\r\n\r\nexport default VariablesValue;","import {setVariablesValue} from \"../actions\";\r\nimport {connect} from 'react-redux';\r\nimport VariablesValue from \"../../math_view/components/VariablesValue\";\r\nimport {lockVariables} from \"../actions\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  teacherMode: state.common.teacherMode,\r\n  variables: state.structure.variables\r\n});\r\n\r\nconst mapDispatchOnProps = {\r\n  onInputChange: setVariablesValue,\r\n  lockInput: lockVariables\r\n};\r\n\r\nconst VariablesValueContainer = connect(\r\n   mapStateToProps,\r\n   mapDispatchOnProps\r\n)(VariablesValue);\r\n\r\nexport default VariablesValueContainer;","import {Col} from \"react-bootstrap\";\r\nimport React from \"react\";\r\nimport TextComponent from \"./TextComponent\";\r\n\r\nfunction Domain({structure,setDomain,lockDomain,teacherMode}) {\r\n    return (\r\n        <Col>\r\n        <TextComponent onChangeSetFunction={setDomain}\r\n                       errorProperty={structure.domain.errorMessage} textInputLabel={<span><var>M</var> = &#123;</span>} onLockFunction={lockDomain} textData={structure.domain} teacherMode={teacherMode} idName={'language-editor-domain'} placeholderText={'1, 2, 3, 🐶, ...'} labelText={\"Doména\"}>\r\n        </TextComponent>\r\n        </Col>\r\n    )\r\n}\r\n\r\nexport default Domain;","import {Col, Form, InputGroup} from \"react-bootstrap\";\r\nimport LockButton from \"../buttons/LockButton\";\r\nimport React from \"react\";\r\n\r\nexport function ConstantInterpretation({structure,setConstantValue,structureObject,teacherMode,lockConstantValue}){\r\n    return(\r\n    <Col lg={12}>\r\n        <Form>\r\n            <Form.Label>Interpretácia symbolov konštánt</Form.Label>\r\n            {Object.keys(structure.constants).map((constant) =>\r\n                <Form.Group key={constant}>\r\n                    <InputGroup>\r\n                        <InputGroup.Prepend>\r\n                            <InputGroup.Text id={'constant-' + constant}><var>i</var>({constant}) = </InputGroup.Text>\r\n                        </InputGroup.Prepend>\r\n\r\n                        <Form.Control as=\"select\" value={structure.constants[constant].value}\r\n                                      id={'constant-' + constant}\r\n                                      onChange={(e) => setConstantValue(e.target.value, constant)}\r\n                                      disabled={structure.constants[constant].locked}\r\n                                      isInvalid={structure.constants[constant].errorMessage.length > 0}>\r\n                            <option key={''} value={''}>Vyber hodnotu ...</option>\r\n                            {[...structureObject.domain].map((item) =>\r\n                                <option key={item} value={item}>{item}</option>\r\n                            )}\r\n                        </Form.Control>\r\n                        {teacherMode ? (\r\n                            <InputGroup.Append>\r\n                                <LockButton lockFn={() => lockConstantValue(constant)}\r\n                                            locked={structure.constants[constant].locked}/>\r\n                            </InputGroup.Append>\r\n                        ) : null}\r\n                        <Form.Control.Feedback type={\"invalid\"}>{structure.constants[constant].errorMessage}</Form.Control.Feedback>\r\n                    </InputGroup>\r\n                </Form.Group>\r\n            )}\r\n        </Form>\r\n    </Col>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport {Table} from 'react-bootstrap';\r\nimport {PREDICATE} from \"../../constants\";\r\n\r\nfunction renderFunctionValueSelect(functionName, functionValues, params, domain, onChange, disabled) {\r\n    let value = functionValues[JSON.stringify(params)];\r\n    if (!value) {\r\n        value = '';\r\n    }\r\n    return (\r\n        <select onChange={(e) => onChange(params.concat([e.target.value]), functionName)} value={value}>\r\n            <option value=''>{''}</option>\r\n            {domain.map(item =>\r\n                <option key={item} disabled={disabled} value={item}>{item}</option>\r\n            )}\r\n        </select>\r\n    )\r\n}\r\n\r\nexport function RelationalTable(props) {\r\n    let domain = [...props.domain];\r\n\r\n    let inputComponent = (item) => (\r\n        <td key={item} className=\"checkComponent\">\r\n            {props.type === PREDICATE ? (\r\n                <input type='checkbox'\r\n                       onChange={(e) => props.onInputChange(item, props.name, e.target.checked)}\r\n                       checked={props.value.findIndex((e) => JSON.stringify(e) === JSON.stringify(item)) > -1}\r\n                       disabled={props.disabled}/>\r\n            ) : (\r\n                renderFunctionValueSelect(props.name, props.value, item, domain, props.onInputChange, props.disabled)\r\n            )}\r\n        </td>\r\n    );\r\n\r\n    let arity1 = (\r\n        <tr>\r\n            <td>{''}</td>\r\n            {domain.map((item) =>\r\n                inputComponent([item])\r\n            )}\r\n        </tr>\r\n    );\r\n\r\n    let arity2 = domain.map((item1) =>\r\n        <tr key={item1}>\r\n            <th className=\"interpretationHead\">{item1}</th>\r\n            {domain.map((item2) =>\r\n                inputComponent([item1, item2])\r\n            )}\r\n        </tr>\r\n    );\r\n\r\n    return (\r\n        <Table bordered responsive>\r\n            <thead>\r\n            <tr>\r\n                <th className=\"interpretationHead\">{props.name}</th>\r\n                {domain.map(item =>\r\n                    <th key={item} className=\"interpretationHead\">{item}</th>\r\n                )}\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            {parseInt(props.arity) === 1 ? arity1 : arity2}\r\n            </tbody>\r\n        </Table>\r\n    )\r\n}","import React from 'react';\r\n\r\nexport class SelectComponent extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({value: e.target.value});\r\n        addIntoFunctionTable(this.props.index,e.target.value,this.props.props);\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <td>\r\n                {<select onChange={(e) => this.handleChange(e)}  value={this.props.props.selectionElement[this.props.index]}>\r\n                    <option value=''>{''}</option>\r\n                    {this.props.domain.map(item =>\r\n                        <option key={item} disabled={this.props.props.disabled} value={item}>{item}</option>\r\n                    )}\r\n                </select>}\r\n            </td>\r\n        )\r\n    }\r\n}\r\n\r\nfunction addIntoFunctionTable(index,value,props){\r\n    props.selectionElement[index]=value;\r\n\r\n    for(let i = 0;i<props.selectionElement.length;i++){\r\n        if(!props.selectionElement[i].length>0){\r\n            return;\r\n        }\r\n    }\r\n    let array = props.selectionElement.slice();\r\n    props.onInputChange(array,props.name,true);\r\n    props.selectionElement.fill(\"\");\r\n}\r\n\r\n","import React from 'react';\r\nimport {Table} from 'react-bootstrap';\r\nimport {SelectComponent} from \"./SelectComponent\";\r\n\r\nfunction renderPredicateValueSelect(predicateName, predicateValues, params, domain, onInputChange, disabled,value,index) {\r\n    return (\r\n        <select onChange={(e) => changeValue(onInputChange,e.target.value,params,index,predicateName)} value={value}>\r\n            <option value=''>{''}</option>\r\n            {domain.map(item =>\r\n                <option key={item} disabled={disabled} value={item}>{item}</option>\r\n            )}\r\n        </select>\r\n    )\r\n}\r\nfunction changeValue(onInputChange,value,params,index,predicateName){\r\n    if(value===params[index]){\r\n        return;\r\n    }\r\n    onInputChange(params,predicateName,false);\r\n    if(value!==''){\r\n        params[index]=value;\r\n        onInputChange(params,predicateName,true);\r\n    }\r\n}\r\n\r\nexport function DatabasePredicate(props) {\r\n    let domain = [...props.domain];\r\n\r\n    if(props.selectionElement===undefined){\r\n        props = Object.assign({selectionElement: Array(parseInt(props.arity))}, props);\r\n        props.selectionElement.fill(\"\");\r\n    }\r\n        let element = (predicateArrayElements) => (\r\n        <tbody>\r\n        {predicateArrayElements.map((onePredicateArray,count) =>\r\n        <tr key={'database-predicate-row'+count}>\r\n            {onePredicateArray.map((domainElement,index) =>\r\n                <td key={'database-predicate-column'+index}>\r\n                    {renderPredicateValueSelect(props.name, props.value, [...onePredicateArray], domain, props.onInputChange, props.disabled,domainElement,index)}\r\n\r\n                </td>\r\n            )}\r\n        </tr>\r\n        )}\r\n        {newSelectionElement()}\r\n        </tbody>\r\n    );\r\n\r\n    //ak je props.arity string tak to nevytvori pole danej velkost, teda to treba najprv parsnut\r\n    let newSelectionElement = () => (\r\n        <tr>\r\n            {props.selectionElement.map((value,index)=>\r\n                <SelectComponent key={'select-component'+index} domain={domain} index={index} props={props}/>\r\n            )}\r\n        </tr>\r\n    );\r\n\r\n\r\n    let headElements = () =>(\r\n        <thead>\r\n        <tr>\r\n            {[...Array(parseInt(props.arity))].map((x, count) =>\r\n                <th key={\"m\" + (count + 1)} className=\"interpretationHead\"><var>{\"m\"}</var><sub>{count + 1}</sub></th>\r\n\r\n            )}\r\n        </tr>\r\n        </thead>\r\n        );\r\n\r\n    if(Array.isArray(props.value)) {\r\n        return (\r\n            <Table bordered responsive>\r\n                {headElements()}\r\n                {element(props.value)}\r\n            </Table>\r\n        );\r\n   }\r\n    else{\r\n        return (\r\n            <Table bordered responsive>\r\n                {headElements()}\r\n                <tbody>\r\n                {newSelectionElement()}\r\n                </tbody>\r\n            </Table>\r\n        )\r\n    }\r\n}","import {Col, Form} from \"react-bootstrap\";\r\nimport {PREDICATE} from \"../../constants\";\r\nimport React from \"react\";\r\nimport {RelationalTable,DatabasePredicate} from './index'\r\nimport TextInput from \"./TextInput\";\r\n\r\nfunction PredicateInterpretation({structure,predicates,setPredicateValueText,lockPredicateValue,toggleTable,toggleDatabase,domain,setPredicateValueTable,structureObject,teacherMode,lengthOfCol}){\r\n    return(\r\n        <Col lg={lengthOfCol}>\r\n            <Form.Label>Interpretácia predikátových symbolov</Form.Label>\r\n                {predicates.map((name) =>\r\n                    <Form.Group key={name}>\r\n                        <TextInput\r\n                                   errorProperty={structure.predicates[name].errorMessage}\r\n                                   onChange={(e) => setPredicateValueText(e.target.value, name)}\r\n                                   onLock={() => lockPredicateValue(name)}\r\n                                   textData={structure.predicates[name]}\r\n                                   label={<span><var>i</var>({name.split('/')[0]}) = &#123;</span>}\r\n                                   teacherMode={teacherMode}\r\n                                   id={'predicate-' + name}\r\n                                   toggleTable={() => toggleTable(PREDICATE, name)}\r\n                                   toggleDatabase={() => toggleDatabase(PREDICATE, name)}\r\n                                   databaseEnabled={structure.predicates[name].databaseEnabled}\r\n                                   tableEnabled={structure.predicates[name].tableEnabled}\r\n                                   arity={parseInt(name.split('/')[1])}\r\n                                   domain={domain}\r\n                                   placeholder='(1,2), (2,2), (3,1), ...'/>\r\n                        {structure.predicates[name].tableEnabled && domain.length > 0 ? (\r\n                            <RelationalTable name={name} domain={structureObject.domain}\r\n                                             arity={structureObject.language.getPredicate(name.split('/')[0])}\r\n                                             value={structureObject.iPredicate.get(name) ? structureObject.iPredicate.get(name) : []}\r\n                                             onInputChange={setPredicateValueTable}\r\n                                             type={PREDICATE}\r\n                                             disabled={structure.predicates[name].locked}/>\r\n                        ) : null}\r\n                        {structure.predicates[name].databaseEnabled && domain.length > 0? (\r\n                            <DatabasePredicate name={name} domain={structureObject.domain}\r\n                                              arity={structureObject.language.getPredicate(name.split('/')[0])}\r\n                                              value={structureObject.iPredicate.has(name) ? structureObject.iPredicate.get(name) : {}}\r\n                                              onInputChange={setPredicateValueTable}\r\n                                              disabled={structure.predicates[name].locked}\r\n                                              type={PREDICATE}/>\r\n                        ) : null}\r\n                    </Form.Group>\r\n                )}\r\n        </Col>\r\n    )\r\n}\r\nexport default PredicateInterpretation;","import React from 'react';\r\nimport {Table} from 'react-bootstrap';\r\n\r\nfunction renderFunctionValueSelect(functionName, functionValues, params, domain, onChange, disabled) {\r\n    let value = functionValues[JSON.stringify(params)];\r\n    if (!value) {\r\n        value = '';\r\n    }\r\n    return (\r\n        <select onChange={(e) => onChange(params.concat([e.target.value]), functionName)} value={value}>\r\n            <option value=''>{''}</option>\r\n            {domain.map(item =>\r\n                <option key={item} disabled={disabled} value={item}>{item}</option>\r\n            )}\r\n        </select>\r\n    )\r\n}\r\n\r\n\r\nfunction permutateWithRepetitions(permutationOptions,permutationLength) {\r\n    if (permutationLength === 1) {\r\n        return permutationOptions.map(permutationOption => [permutationOption]);\r\n    }\r\n\r\n    // Init permutations array.\r\n    const permutations = [];\r\n\r\n    // Get smaller permutations.\r\n    const smallerPermutations = permutateWithRepetitions(\r\n        permutationOptions,\r\n        permutationLength - 1,\r\n    );\r\n\r\n    // Go through all options and join it to the smaller permutations.\r\n    permutationOptions.forEach((currentOption) => {\r\n        smallerPermutations.forEach((smallerPermutation) => {\r\n            permutations.push([currentOption].concat(smallerPermutation));\r\n        });\r\n    });\r\n    return permutations;\r\n}\r\n\r\n\r\nfunction DatabaseFunction(props) {\r\n    let domain = [...props.domain];\r\n    let domainValueArray = Object.values(domain);\r\n\r\n    let mainElement = (\r\n        <tbody>\r\n        {permutateWithRepetitions(domainValueArray,props.arity).map((arrayValues,count) =>\r\n            <tr key={\"database-function-row\"+count}>\r\n                {arrayValues.map((value,index) =>\r\n                    <td key={\"database-function-row-\"+count+\"-item-\"+index}>\r\n                        {value}\r\n                    </td>\r\n                )}\r\n                <td>\r\n                    {renderFunctionValueSelect(props.name, props.value, [...arrayValues], domain, props.onInputChange, props.disabled)}\r\n                </td>\r\n            </tr>\r\n                    )}\r\n        </tbody>\r\n        );\r\n\r\n    let headElements = (\r\n        <th>\r\n            {props.symbol+\"(\"}\r\n        {[...Array(props.arity-1)].map((x, count) =>\r\n            <span key={\"database-function-header-parameter-\"+count}><var>{\"m\"}</var><sub>{count+1}</sub>{\", \"}</span>\r\n         )}\r\n            <span key={\"database-function-header-parameter-last\"}><var>{\"m\"}</var><sub>{props.arity}</sub></span>\r\n            {\")\"}\r\n        </th>\r\n    );\r\n\r\n    return (\r\n        <Table bordered responsive>\r\n            <thead>\r\n            <tr>\r\n                {[...Array(props.arity)].map((x, count) =>\r\n                    <th key={\"database-function-header\"+count}><var>{\"m\"}</var><sub>{count+1}</sub></th>\r\n                )}\r\n                {headElements}\r\n            </tr>\r\n            </thead>\r\n            {mainElement}\r\n        </Table>\r\n    );\r\n}\r\nexport default DatabaseFunction;","import {Col, Form} from \"react-bootstrap\";\r\nimport TextInput from \"./TextInput\";\r\nimport {FUNCTION} from \"../../constants\";\r\nimport React from \"react\";\r\nimport DatabaseFunction from \"./DatabaseFunction\";\r\nimport {RelationalTable} from './index'\r\n\r\nfunction FunctionInterpretation({functions,structure,setFunctionValueText,lockFunctionValue,toggleTable,toggleDatabase,teacherMode,domain,structureObject,setFunctionValueTable,lengthOfCol}) {\r\n    return (\r\n        <Col lg={lengthOfCol}>\r\n            <Form.Label>Interpretácia funkčných symbolov</Form.Label>\r\n                {functions.map((name) =>\r\n                    <Form.Group key={name}>\r\n                        <TextInput\r\n                            errorProperty={structure.functions[name].errorMessage}\r\n                            onChange={(e) => setFunctionValueText(e.target.value, name)}\r\n                            onLock={() => lockFunctionValue(name)}\r\n                            textData={structure.functions[name]}\r\n                            label={<span><var>i</var>({name.split('/')[0]}) = &#123;</span>}\r\n                            teacherMode={teacherMode}\r\n                            id={'function-' + name}\r\n                            toggleTable={() => toggleTable(FUNCTION, name)}\r\n                            toggleDatabase={() => toggleDatabase(FUNCTION, name)}\r\n                            databaseEnabled={structure.functions[name].databaseEnabled}\r\n                            tableEnabled={structure.functions[name].tableEnabled}\r\n                            arity={parseInt(name.split('/')[1])}\r\n                            domain={domain}\r\n                            placeholder='(1,2), (2,2), (3,1), ...'/>\r\n                        {structure.functions[name].tableEnabled && domain.length > 0 ? (\r\n                            <RelationalTable name={name} domain={structureObject.domain}\r\n                                             arity={structureObject.language.getFunction(name.split('/')[0])}\r\n                                             value={structureObject.iFunction.has(name) ? structureObject.iFunction.get(name) : {}}\r\n                                             onInputChange={setFunctionValueTable}\r\n                                             disabled={structure.functions[name].locked}\r\n                                             type={FUNCTION}/>\r\n                        ) : null}\r\n                        {structure.functions[name].databaseEnabled && domain.length > 0 ? (\r\n                            <DatabaseFunction name={name} domain={structureObject.domain}\r\n                                              arity={structureObject.language.getFunction(name.split('/')[0])}\r\n                                              symbol={name.split('/')[0]}\r\n                                              value={structureObject.iFunction.has(name) ? structureObject.iFunction.get(name) : {}}\r\n                                              onInputChange={setFunctionValueTable}\r\n                                              disabled={structure.functions[name].locked}\r\n                                              type={FUNCTION}/>\r\n                        ) : null}\r\n                    </Form.Group>\r\n                )}\r\n        </Col>\r\n    )\r\n}\r\nexport default FunctionInterpretation;","import React from 'react';\r\nimport {\r\n  Row\r\n} from \"react-bootstrap\";\r\nimport Card from \"react-bootstrap/Card\";\r\n\r\nimport Domain from \"../components_parts/Domain\";\r\nimport {ConstantInterpretation} from \"../components_parts\";\r\nimport PredicateInterpretation from \"../components_parts/PredicateInterpretation\";\r\nimport FunctionInterpretation from \"../components_parts/FunctionInterpretation\";\r\nimport HelpButton from \"../buttons/HelpButton\";\r\n\r\nconst help = (\r\n   <div className=\"collapse\" id=\"help-structure\">\r\n     <div style={{textAlign:\"justify\"}}>\r\n       Pomocou editoru štruktúry sa definuje štruktúra. Prvky <strong>domény</strong> sa oddeľujú čiarkami.\r\n       Pridaním nového symbolu do jazyka sa automaticky pridá vstup na zadanie interpretácie.\r\n       Interpretácia <strong>konštanty</strong> sa vyberá zo selectu, ktorý automaticky obsahuje prvky z\r\n       domény. Interpretácia <strong>predikátového symbolu</strong> s&nbsp;aritou&nbsp;<var>n</var> sa zapisuje vo\r\n       formáte <code>(prvok<sub>1</sub>, …, prvok<sub><var>n</var></sub>)</code>.\r\n       Interpretácia <strong>funkčného symbolu</strong> s&nbsp;aritou&nbsp;<var>n</var> sa zapisuje vo\r\n       formáte <code>(prvok<sub>1</sub>, …, prvok<sub><var>n</var></sub>, hodnota)</code>.\r\n     </div>\r\n   </div>\r\n);\r\n\r\nfunction Structure({structure,setDomain,lockDomain,teacherMode,setConstantValue,structureObject,lockConstantValue,setPredicateValueText,lockPredicateValue,toggleTable,toggleDatabase,domain,setPredicateValueTable,setFunctionValueText,lockFunctionValue,setFunctionValueTable}) {\r\n    let constants = Object.keys(structure.constants);\r\n    let predicates = Object.keys(structure.predicates);\r\n    let functions = Object.keys(structure.functions);\r\n\r\n  return (\r\n     <Card>\r\n       <Card.Header as={\"h5\"} className={\"d-flex justify-content-between\"}>\r\n           <span>Štruktúra 𝓜 = (<var>M</var>, <var>i</var>)</span>\r\n           <HelpButton dataTarget={\"#help-structure\"}/>\r\n       </Card.Header>\r\n\r\n       <Card.Body>\r\n         {help}\r\n           <Row>\r\n               <Domain structure={structure} setDomain={setDomain} lockDomain={lockDomain} teacherMode={teacherMode} lengthOfCol={12}/>\r\n           </Row>\r\n         {constants.length === 0 ? null : (\r\n            <Row>\r\n                <ConstantInterpretation structure={structure} teacherMode={teacherMode} constants={constants} lockConstantValue={lockConstantValue} setConstantValue={setConstantValue} structureObject={structureObject} lengthOfCol={12}/>\r\n            </Row>\r\n         )}\r\n         {predicates.length === 0 ? null : (\r\n            <Row>\r\n                <PredicateInterpretation structureObject={structureObject} structure={structure} toggleDatabase={toggleDatabase} teacherMode={teacherMode} domain={domain} lockPredicateValue={lockPredicateValue} predicates={predicates} setPredicateValueTable={setPredicateValueTable} setPredicateValueText={setPredicateValueText} toggleTable={toggleTable} lengthOfCol={12}/>\r\n            </Row>\r\n         )}\r\n         {functions.length === 0 ? null : (\r\n            <Row>\r\n                <FunctionInterpretation toggleTable={toggleTable} toggleDatabase={toggleDatabase} domain={domain} teacherMode={teacherMode} structure={structure} structureObject={structureObject} functions={functions} lockFunctionValue={lockFunctionValue} setFunctionValueTable={setFunctionValueTable} setFunctionValueText={setFunctionValueText} lengthOfCol={12}/>\r\n            </Row>\r\n         )}\r\n       </Card.Body>\r\n     </Card>\r\n  )\r\n}\r\n\r\nexport default Structure;","import {connect} from 'react-redux';\r\nimport {\r\n  setConstantValue,\r\n  setDomain,\r\n  setFunctionValueTable,\r\n  setFunctionValueText,\r\n  setPredicateValueTable,\r\n  setPredicateValueText, toggleDatabase,\r\n  toggleTable\r\n} from \"../actions\";\r\nimport Structure from '../../math_view/components/Structure';\r\nimport {lockConstantValue, lockDomain, lockFunctionValue, lockPredicateValue} from \"../actions\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  language: state.language,\r\n  structure: state.structure,\r\n  structureObject: state.structureObject,\r\n  teacherMode: state.common.teacherMode,\r\n  domain: [...state.structureObject.domain],\r\n  diagramModel:state.diagramModel\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  setDomain: setDomain,\r\n  setConstantValue: setConstantValue,\r\n  setPredicateValueText: setPredicateValueText,\r\n  setPredicateValueTable: setPredicateValueTable,\r\n  setFunctionValueText: setFunctionValueText,\r\n  setFunctionValueTable: setFunctionValueTable,\r\n  toggleTable: toggleTable,\r\n  toggleDatabase:toggleDatabase,\r\n  lockDomain: lockDomain,\r\n  lockConstantValue: lockConstantValue,\r\n  lockPredicateValue: lockPredicateValue,\r\n  lockFunctionValue: lockFunctionValue\r\n};\r\n\r\nconst StructureContainer = connect(\r\n   mapStateToProps,\r\n   mapDispatchToProps\r\n)(Structure);\r\n\r\nexport default StructureContainer;","import {Col, Row} from \"react-bootstrap\";\r\nimport React from \"react\";\r\nimport LanguageContainer from \"../redux/containers/LanguageContainer\";\r\nimport VariablesValueContainer from \"../redux/containers/VariablesValueContainer\";\r\nimport StructureContainer from \"../redux/containers/StructureContainer\";\r\n\r\nexport class MathSystem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.syncMathState();\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <Row>\r\n                <Col sm={6}>\r\n                    <LanguageContainer/>\r\n                    <VariablesValueContainer/>\r\n                </Col>\r\n                <Col sm={6}>\r\n                    <StructureContainer/>\r\n                </Col>\r\n            </Row>\r\n        )\r\n    }\r\n}\r\n","import {connect} from \"react-redux\";\r\nimport {MathSystem} from \"../../math_view/MathSystem\";\r\nimport {syncMathState} from \"../actions\";\r\n\r\nconst mapStateToProps = () => ({\r\n});\r\n\r\nconst mapDispatchOnProps = {\r\n    syncMathState:syncMathState\r\n};\r\n\r\nconst MathSystemContainer = connect(\r\n    mapStateToProps,\r\n    mapDispatchOnProps\r\n)(MathSystem);\r\n\r\nexport default MathSystemContainer;","// from https://github.com/notablemind/downloadbutton/issues/4\r\n\r\nimport React from 'react';\r\nimport FontAwesome from \"react-fontawesome\";\r\n\r\nfunction saveAs(uri, filename) {\r\n  var link = document.createElement('a');\r\n  if (typeof link.download === 'string') {\r\n    document.body.appendChild(link); //Firefox requires the link to be in the body\r\n    link.download = filename;\r\n    link.href = uri;\r\n    link.click();\r\n    document.body.removeChild(link); //remove the link when done\r\n  } else {\r\n    window.location.replace(uri);\r\n  }\r\n}\r\n\r\nclass DownloadButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: false,\r\n      fileData: null,\r\n    };\r\n    this._onGenerate = this._onGenerate.bind(this);\r\n    this._donePreparing = this._donePreparing.bind(this);\r\n    this._onDownload = this._onDownload.bind(this);\r\n  }\r\n\r\n  _onGenerate() {\r\n    this.setState({loading: true, fileData: null});\r\n    this.props.genFile(this._donePreparing);\r\n  }\r\n\r\n  _donePreparing(fileData) {\r\n    this.setState({\r\n      loading: false,\r\n      fileData: fileData,\r\n    });\r\n  }\r\n\r\n  _onDownload() {\r\n    var fileData = (this.props.fileData || (this.props.async ? this.state.fileData : this.props.genFile()));\r\n    if (!fileData) {\r\n      return false;\r\n    }\r\n    var blob = new Blob([fileData.contents], {type: fileData.mime});\r\n    var url = URL.createObjectURL(blob);\r\n    saveAs(url, fileData.filename);\r\n    this.props.onDownloaded && this.props.onDownloaded();\r\n  }\r\n\r\n  render() {\r\n    // need one or the other\r\n    if (!this.props.genFile && !this.props.fileData) {\r\n      return (<em>Invalid configuration for download button</em>);\r\n    }\r\n    var style = this.props.style;\r\n    var cls = 'DownloadButton ' + (this.props.className || '');\r\n    if (this.props.fileData || !this.props.async || this.state.fileData) {\r\n      var title = this.props.downloadTitle;\r\n      if ('function' === typeof title) {\r\n        title = title(this.props.fileData || this.state.fileData)\r\n      }\r\n      return (\r\n         <button style={style}  title={this.props.title} onClick={this._onDownload} className={cls}>\r\n           <FontAwesome name='fas fa-save'/>\r\n           &nbsp;Uložiť\r\n         </button>\r\n      );\r\n    }\r\n    if (this.state.loading) {\r\n      return (<button style={style} className={cls + ' DownloadButton-loading'}>\r\n        {this.props.loadingTitle}\r\n      </button>);\r\n    }\r\n    return (<button style={style} onClick={this._onGenerate} className={cls + ' DownloadButton-generate'}>\r\n      {this.props.generateTitle}\r\n    </button>);\r\n  }\r\n}\r\n\r\n// DownloadButton.propTypes = {\r\n//     fileData: React.PropTypes.object,\r\n//     genFile: React.PropTypes.func,\r\n//     async: React.PropTypes.bool,\r\n//     generateTitle: React.PropTypes.string,\r\n//     downloadTitle: React.PropTypes.oneOfType([React.PropTypes.string, React.PropTypes.func]),\r\n//     loadingTitle: React.PropTypes.string,\r\n//     onDownloaded: React.PropTypes.func,\r\n// }\r\n\r\nDownloadButton.defaultProps = {\r\n  async: false,\r\n  downloadTitle: 'Download',\r\n  generateTitle: 'Generate file',\r\n  loadingTitle: 'Loading...',\r\n};\r\n\r\nexport default DownloadButton;","import React from 'react';\r\nimport {Button, Modal} from \"react-bootstrap\";\r\nimport DownloadButton from \"../buttons/DownloadButton\";\r\nimport {DEFAULT_FILE_NAME} from \"../../constants\";\r\nimport FontAwesome from \"react-fontawesome\";\r\n\r\nconst ModalComponent = ({modalShowState,setModalShowState,setExerciseNameState,exportState}) => (\r\n    <Modal dialogClassName={\"no-border-radius\"} show={modalShowState} onHide={() => setModalShowState(false)}>\r\n        <Modal.Header>\r\n            <Modal.Title>Uložiť štruktúru</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n            <div className='form-inline'>\r\n                <div className='form-group'>\r\n                    <label htmlFor=\"exercise-name\">Názov cvičenia: </label>\r\n                    <input type=\"text\" className=\"form-control\" id=\"exercise-name\"\r\n                           placeholder={DEFAULT_FILE_NAME}\r\n                           onChange={(e) => setExerciseNameState(e.target.value)}/>\r\n                </div>\r\n            </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n            <DownloadButton genFile={exportState} title={\"Uložiť\"}\r\n                            className='btn btn-success'>\r\n            </DownloadButton>\r\n\r\n            <Button variant={\"secondary\"} title='Zrušiť' onClick={() => setModalShowState(false)}>\r\n                <FontAwesome name='fas fa-window-close'/>\r\n                &nbsp;Zrušiť\r\n            </Button>\r\n\r\n        </Modal.Footer>\r\n    </Modal>\r\n);\r\n\r\nexport default ModalComponent;","import React from 'react';\r\nimport {Button} from \"react-bootstrap\";\r\nimport FontAwesome from \"react-fontawesome\";\r\n\r\nconst HelpGraphButton = ({setCollapseHelpGraphButton,collapseHelpGraphButton}) => (\r\n            <div>\r\n                <Button variant={'secondary'} title='Pomoc s grafom' size='lg'\r\n                        onClick={() => setCollapseHelpGraphButton(!collapseHelpGraphButton)}\r\n                        aria-controls=\"help-graph\"\r\n                        aria-expanded={collapseHelpGraphButton}>\r\n                    <FontAwesome name='fas fa-question'/>\r\n                    <span className={'hidden-on-medium-and-lower'}>&nbsp;Pomoc s grafom</span>\r\n                </Button>\r\n            </div>\r\n);\r\n\r\nexport default HelpGraphButton;","import React from 'react';\r\nimport FontAwesome from 'react-fontawesome';\r\nimport {Button, ButtonGroup, ButtonToolbar} from 'react-bootstrap';\r\nimport ModalComponent from '../components_parts/ModalComponent';\r\nimport HelpGraphButton from \"./HelpGraphButton\";\r\n\r\nconst ButtonToolbarComponent = ({setCollapseHelpGraphButton,collapseHelpGraphButton,clearGraphSelection,exportState,setExerciseNameState,modalShowState,diagramToggledState,teacherModeState,setDiagramToggledState, setModelShowState, importState, setTeacherModeState}) => (\r\n    <ButtonToolbar>\r\n        <ButtonGroup className='mr-lg-2'>\r\n        <Button variant='outline-primary' size='lg' title='Prepnúť na matematický pohľad' className={diagramToggledState?'':' active'} onClick={() => {\r\n            setDiagramToggledState(false);\r\n            setCollapseHelpGraphButton(false);\r\n        }}>\r\n            <FontAwesome name='fas fa-list'/>\r\n            <span className={'hidden-on-medium-and-lower'}>&nbsp;Matematika</span>\r\n        </Button>\r\n\r\n        <Button variant='outline-primary' size='lg' title='Prepnúť na grafový pohľad' className={diagramToggledState?' active':''} onClick={() => setDiagramToggledState(true)}>\r\n            <FontAwesome name='fas fa-project-diagram'/>\r\n            <span className={'hidden-on-medium-and-lower'}>&nbsp;Graf</span>\r\n        </Button>\r\n        </ButtonGroup>\r\n\r\n        <ButtonGroup className='mr-lg-2'>\r\n        <Button variant='secondary' size='lg' title='Exportovať cvičenie' onClick={() => {setModelShowState(true);clearGraphSelection();}}>\r\n            <FontAwesome name='fas fa-file-export'/>\r\n            <span className={'hidden-on-medium-and-lower'}>&nbsp;Exportovať</span>\r\n        </Button>\r\n\r\n        <Button variant='secondary' size='lg' title='Importovať cvičenie'\r\n                onClick={() => document.getElementById('uploadInput').click()}>\r\n            <FontAwesome name='fas fa-file-import'/>\r\n            <input id='uploadInput' type='file' name='jsonFile'\r\n                   onChange={(e) => {\r\n                       importState(e);\r\n                   }}\r\n                   hidden={true}\r\n                   style={{display: 'none'}}/>\r\n            <span className={'hidden-on-medium-and-lower'}>&nbsp;Importovať</span>\r\n        </Button>\r\n        </ButtonGroup>\r\n\r\n        {diagramToggledState ?\r\n            <ButtonGroup className='mr-lg-2'>\r\n                <HelpGraphButton collapseHelpGraphButton={collapseHelpGraphButton} setCollapseHelpGraphButton={setCollapseHelpGraphButton}/>\r\n            </ButtonGroup>: null\r\n        }\r\n\r\n        <ModalComponent exportState={exportState} modalShowState={modalShowState} setExerciseNameState={setExerciseNameState} setModalShowState={setModelShowState}/>\r\n\r\n        {/*<ButtonGroup>\r\n        <Button variant={'outline-success'} size='lg' title='Učiteľský mód' className={(teacherModeState?'active':'')} onClick={() => setTeacherModeState()}>\r\n            <FontAwesome name='fas fa-user-edit'/>\r\n            <span className={'hidden-on-medium-and-lower'}>&nbsp;Učiteľský mód</span>\r\n        </Button>\r\n        </ButtonGroup>*/}\r\n    </ButtonToolbar>\r\n);\r\n\r\nexport default ButtonToolbarComponent;","import React from \"react\";\r\nimport {Card, Collapse} from \"react-bootstrap\";\r\n\r\nconst HelpGraphCollapse = ({collapsed}) => (\r\n    <Collapse in={collapsed}>\r\n        <Card id=\"help-graph\" className=\"text-justify\">\r\n            <Card.Body>\r\n                <p>Vrcholy sa do grafu umiestňujú tahaním alebo klikaním na ikonu z panelu. Pri ťahaní je\r\n                    možné\r\n                    určiť presnú polohu vrcholu, pri kliknutí bude mať vrchol náhodnú pozíciu.\r\n                    V grafe je možné umiestniť 4 typy vrcholov.\r\n                    Prvý typ vrcholu predstavuje prvok domény.\r\n                    Druhý predstavuje konštantu.\r\n                    Tretí predstavuje ternárny (3) vzťah.\r\n                    Štvrtý predstavuje quaternárny (4) vzťah.</p>\r\n\r\n                <p>\r\n                    Graf sa ovláda dvomi režimami. Pohybovací režim (<code>P</code>) dovoľuje presúvať alebo\r\n                    mazať jednotlivé vrcholy. Pre ostatné akcie ako sú pridávanie predikátov a funkcií,\r\n                    zmena\r\n                    mien vrcholov alebo na vytváranie hrán slúži Editovací režim (<code>E</code>).\r\n                    Medzi týmito režimami sa dá meniť stlačením príslušných tlačidiel alebo stlačením\r\n                    kláves <code>P</code> a <code>E</code>. Okrem toho je možné využiť klávesu<code>;</code>,ktorou\r\n                    je možné prepínať medzi jednotlivými režimami. Nadídením myšou nad prvky grafu sa vám zobrazí\r\n                    nápoveda k ním (resp. hláška prečo nejde daná akcia vykonať).</p>\r\n\r\n                <p>\r\n                    Dvojklikom na názov vrcholu sa prepne názov na input okno. Do tohto okna je možné zadať\r\n                    nový názov.\r\n                    Nový názov musí splňať podmienky, teda nesmie obsahovať zakázané znaky. V prípade\r\n                    použitia zakázaných vzťahov sa input okno rozsvieti na červeno.\r\n                    Medzery v input okne sú ignorované a berie sa slovo beznich. Názov sa akceptuje vybratím\r\n                    iného prvky grafu alebo kliknutím do plátna. Okrem toho je možné meno akceptovať aj\r\n                    tlačidlom <code>ENTER</code>.\r\n                    V prípade ak používateľ chce zrušiť premenovanie a vrátiť pôvodné meno tak na to slúži\r\n                    tlačidlo <code>ESC</code>. To isté sa stane aj ked sa používateľ pokúsi uložiť zlé meno\r\n                    - vráti sa pôvodné meno.\r\n                </p>\r\n\r\n                <p>\r\n                    Konštanta smie mať maximálne jeden uzol. Ak používateľ sa pokúsi pripojiť novým uzlom\r\n                    iný vrchol predstavujúci prvok domény tak sa pôvodný uzol zmaže. Uzol konštanty je možné\r\n                    pripojiť iba do vrcholu, ktorý predstavuje prvok domény.\r\n                </p>\r\n                <p>\r\n                    Miesto, kde sa nachádza názov vrcholu slúži na vytváranie a tahanie uzlov.\r\n                    Binárne vzťahy medzi dvomi vrcholmi sa vytvárajú ťahaním uzlu z jedného vrcholu do\r\n                    druhého.\r\n                    Binárný vzťah do seba samého je možné vytvoriť ťahaním uzlu z názvu vrcholu do tlačidla\r\n                    na\r\n                    otváranie/zatváranie rozbaľovacej ponuky.\r\n                </p>\r\n\r\n                <p>Graf nedovoluje pridať funkciu do vrcholu ak by mal nastať stav, že funkcia by bola\r\n                    viackrát definovaná pre rovnaké parametre. V takom prípade buď nejde vôbec danú funkciu\r\n                    pridať a tlačidlo na pridanie je vypnuté alebo ak ide o binárny vzťah tak v ňom môže\r\n                    nastať\r\n                    stav, že zaradenej funkcií v zozname nejde zmeniť smer\r\n                    (resp. je možné vyberať iba z obmedzeného počtu smerov). Štandardne sa v binárnom vzťahu\r\n                    pri\r\n                    pridaní predikátu alebo funkcie pridá tento prvok v oboch smeroch. Ak v rámci funkcie\r\n                    nie je\r\n                    možné pridať obidva smery, tak sa pridá ten, ktorý je dostupný. Pre ternárne a väčšie\r\n                    vrcholy platí, že nejde vytvoriť dva takéto vrcholy, ktoré by mali rovnakú kombináciu\r\n                    parametrov. V takom prípade ak sa používateľ pokúsi spojiť posledný uzol, tak tento uzol\r\n                    bude zmazaný.\r\n                    Následne pokiaľ máme ternárny a väčší vrchol (vrchol predstavujúci väčší vzťah) a sú v\r\n                    ňom zadefinované nejaké funkcie, ale nie sú spojené všetky miesta, kde smerujú uzly, tak\r\n                    v takom prípade ak by mal pri spojení všetkých uzľov vzniknúť problém, že funkcie je\r\n                    definovaná viackrát pre dané\r\n                    parametre, tak sa funkcia vymaže zo zoznamu tohto vrcholu.\r\n                </p>\r\n            </Card.Body>\r\n        </Card>\r\n    </Collapse>\r\n);\r\n\r\nexport default HelpGraphCollapse;","import './App.css';\r\nimport React from 'react';\r\nimport {Col, Row} from 'react-bootstrap';\r\nimport {Provider} from 'react-redux';\r\nimport ExpressionsContainer from './redux/containers/ExpressionsContainer';\r\nimport {clearGraphSelection, importAppState} from \"./redux/actions\";\r\nimport {DEFAULT_FILE_NAME} from \"./constants\";\r\nimport DiagramModelContainer from \"./redux/containers/DiagramModelContainer\";\r\nimport MathSystemContainer from './redux/containers/MathSystemContainer';\r\nimport ButtonToolbarComponent from \"./math_view/buttons/ButtonToolbarComponent\";\r\nimport HelpGraphCollapse from \"./math_view/buttons/HelpGraphCollapse\";\r\n\r\ninterface AppProps{\r\n  store:any;\r\n  teacherMode:boolean;\r\n  toggleTeacherMode:any;\r\n}\r\n\r\ninterface AppState {\r\n  modalShow:boolean;\r\n  diagramToggled:boolean;\r\n  exerciseName:string;\r\n  collapseHelpGraphButton:boolean;\r\n}\r\n\r\nclass App extends React.Component<AppProps,AppState> {\r\n  constructor(props:AppProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      modalShow: false,\r\n      diagramToggled:true,\r\n      collapseHelpGraphButton:false,\r\n      exerciseName:''\r\n    };\r\n\r\n    this.exportState = this.exportState.bind(this);\r\n    this.importState = this.importState.bind(this);\r\n    this.setModelShowState = this.setModelShowState.bind(this);\r\n    this.setDiagramToggledState = this.setDiagramToggledState.bind(this);\r\n    this.setTeacherModeState = this.setTeacherModeState.bind(this);\r\n    this.setExerciseNameState = this.setExerciseNameState.bind(this);\r\n    this.makeCordNodes = this.makeCordNodes.bind(this);\r\n    this.clearGraphSelection = this.clearGraphSelection.bind(this);\r\n    this.setCollapseHelpGraphButton = this.setCollapseHelpGraphButton.bind(this);\r\n  }\r\n\r\n  setCollapseHelpGraphButton(bool:boolean){\r\n    this.setState({collapseHelpGraphButton:bool})\r\n  }\r\n\r\n  makeCordNodes(diagramState:any){\r\n    let nodeState = new Map([[\"domainNodes\", diagramState.domainNodes],[\"constantNodes\", diagramState.constantNodes],[\"ternaryNodes\", diagramState.ternaryNodes],[\"quaternaryNodes\",diagramState.quaternaryNodes]]);\r\n    let nodesCoords:any = {};\r\n\r\n    for(let mapName of nodeState.keys()){\r\n      for(let [nodeName,nodeObject] of nodeState.get(mapName).entries()){\r\n        if(!nodesCoords.hasOwnProperty(mapName)){\r\n          nodesCoords[mapName] = {};\r\n        }\r\n        let nodeNameInObject = (mapName === \"domainNodes\" || mapName === \"constantNodes\")?nodeName:nodeObject.getNodeNameCombination();\r\n        if(nodeNameInObject){\r\n          nodesCoords[mapName][nodeNameInObject] = {x:nodeObject.position.x,y:nodeObject.position.y};\r\n        }\r\n      }\r\n    }\r\n    return nodesCoords;\r\n  }\r\n\r\n  exportState() {\r\n    let state = this.props.store.getState();\r\n    let diagramCordState = this.makeCordNodes(state.diagramState);\r\n\r\n    let json = JSON.stringify({\r\n      common: state.common,\r\n      language: state.language,\r\n      structure: state.structure,\r\n      expressions: state.expressions,\r\n      diagramCordState: diagramCordState\r\n    });\r\n\r\n    return {\r\n        mime: 'application/json',\r\n        filename: this.state.exerciseName.length === 0? (DEFAULT_FILE_NAME + '.json'):(this.state.exerciseName+'.json'),\r\n        contents: json\r\n      }\r\n    }\r\n\r\n  importState(e:any) {\r\n    let file = e.target.files[0];\r\n    let fr = new FileReader();\r\n\r\n    let store = this.props.store;\r\n    fr.onload = function (e) {\r\n      store.dispatch(importAppState(e.target.result,store.getState().diagramState));\r\n    };\r\n    fr.readAsText(file);\r\n  }\r\n\r\n  setModelShowState(bool:boolean){\r\n    this.setState({modalShow: bool});\r\n  }\r\n\r\n  setDiagramToggledState(bool:boolean){\r\n    this.setState({diagramToggled: bool});\r\n  }\r\n\r\n  setExerciseNameState(name:string){\r\n    this.setState({exerciseName:name});\r\n  }\r\n\r\n  setTeacherModeState(){\r\n    this.props.toggleTeacherMode();\r\n  }\r\n\r\n  clearGraphSelection(){\r\n    this.props.store.dispatch(clearGraphSelection());\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <Provider store={this.props.store}>\r\n          <div className='app'>\r\n            <Row className={'navbar'}>\r\n                  <ButtonToolbarComponent setCollapseHelpGraphButton={this.setCollapseHelpGraphButton} collapseHelpGraphButton={this.state.collapseHelpGraphButton} clearGraphSelection={this.clearGraphSelection} exportState={this.exportState} setExerciseNameState={this.setExerciseNameState} modalShowState={this.state.modalShow} diagramToggledState={this.state.diagramToggled} teacherModeState={this.props.teacherMode} setTeacherModeState={this.setTeacherModeState} setDiagramToggledState={this.setDiagramToggledState} setModelShowState={this.setModelShowState} importState={this.importState}/>\r\n                  <HelpGraphCollapse collapsed={this.state.collapseHelpGraphButton}/>\r\n            </Row>\r\n              {this.state.diagramToggled? (\r\n                  <Row className='reactDiagram'>\r\n                    <Col sm={12} >\r\n                      <DiagramModelContainer store={this.props.store}/>\r\n                    </Col>\r\n                  </Row>\r\n                  ):<MathSystemContainer/>\r\n              }\r\n            <Row>\r\n              <Col sm={12}>\r\n                <ExpressionsContainer/>\r\n              </Col>\r\n            </Row>\r\n          </div>\r\n        </Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import {connect} from 'react-redux';\r\nimport App from \"../../App\";\r\nimport {toggleTeacherMode} from \"../actions\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n    teacherMode:state.common.teacherMode\r\n});\r\n\r\nconst mapDispatchOnProps = {\r\n    toggleTeacherMode:toggleTeacherMode\r\n};\r\n\r\nconst AppContainer = connect(\r\n    mapStateToProps,\r\n    mapDispatchOnProps\r\n)(App);\r\n\r\nexport default AppContainer;","import {EMPTY_CONSTANT_VALUE} from \"../constants/messages\";\r\n\r\n/**\r\n * Represent components_parts\r\n * @author Milan Cifra\r\n * @class\r\n */\r\nclass Structure {\r\n\r\n  /**\r\n   *\r\n   * @param {Language} language\r\n   */\r\n  constructor(language) {\r\n    this.language = language;\r\n    this.domain = new Set();\r\n    this.iConstant = new Map();\r\n    this.iPredicate = new Map();\r\n    this.iFunction = new Map();\r\n    this.domainCombinations = new Map();\r\n  }\r\n\r\n  setLanguageConstants(constants) {\r\n    let message = this.language.setConstants(constants);\r\n    let unusedConstants = [...this.iConstant.keys()].filter(e => !this.language.hasConstant(e));\r\n    unusedConstants.forEach(c => {\r\n      this.iConstant.delete(c);\r\n    });\r\n    return message;\r\n  }\r\n\r\n  setLanguagePredicates(predicates) {\r\n    let message = this.language.setPredicates(predicates);\r\n    let unusedPredicates = [...this.iPredicate.keys()].filter(e => !this.language.hasPredicate(e));\r\n    unusedPredicates.forEach(p => {\r\n      this.iPredicate.delete(p);\r\n    });\r\n    return message;\r\n  }\r\n\r\n  setLanguageFunctions(functions) {\r\n    let message = this.language.setFunctions(functions);\r\n    let unusedFunctions = [...this.iFunction.keys()].filter(e => !this.language.hasFunction(e));\r\n    unusedFunctions.forEach(f => {\r\n      this.iFunction.delete(f);\r\n    });\r\n    this.language.functions.forEach((arity, fn) => {\r\n      if (!this.domainCombinations.has(arity)) {\r\n        this.domainCombinations.set(arity, []);\r\n        this.generateDomainCombinations(arity, arity);\r\n      }\r\n    });\r\n    return message;\r\n  }\r\n\r\n  generateDomainCombinations(arity, n, perms = []) {\r\n    this.domain.forEach(e => {\r\n      perms.push(e);\r\n      if (n == 1) {\r\n        this.domainCombinations.get(arity).push([...perms]);\r\n      } else {\r\n        this.generateDomainCombinations(arity, n - 1, perms);\r\n      }\r\n      perms.splice(-1, 1);\r\n    });\r\n  }\r\n\r\n  hasDomainItem(item) {\r\n    return this.domain.has(item);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {array} domain\r\n   */\r\n  setDomain(domain) {\r\n    this.clearDomain();\r\n    domain.forEach(i => {\r\n      this.domain.add(i);\r\n    });\r\n    [...this.domainCombinations.keys()].forEach(arity => {\r\n      this.domainCombinations.set(arity, []);\r\n      this.generateDomainCombinations(arity, arity);\r\n    });\r\n  }\r\n\r\n  clearDomain() {\r\n    this.domain.clear();\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} constantName\r\n   * @param {string} value\r\n   */\r\n  setConstantValue(constantName, value) {\r\n    if (!this.language.hasConstant(constantName)) {\r\n      throw `Jazyk neobsahuje konštantu ${constantName}`;\r\n    }\r\n    if (!this.hasDomainItem(value)) {\r\n      if (this.iConstant.has(constantName)) {\r\n        this.iConstant.delete(constantName);\r\n      }\r\n      throw EMPTY_CONSTANT_VALUE;\r\n    }\r\n    this.iConstant.set(constantName, value);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} constantName\r\n   * @returns {string | undefined}\r\n   */\r\n  getConstantValue(constantName) {\r\n    return this.iConstant.get(constantName);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} predicateName\r\n   * @param {array} tuple\r\n   */\r\n  setPredicateValue(predicateName, tuple) {\r\n    let p = predicateName.split('/')[0];\r\n    if (this.language.getPredicate(p) != tuple.length) {\r\n      throw `N-tica ${tuple} nemá povolený počet prvkov`;\r\n    }\r\n    let illegalItems = tuple.filter(item => !this.domain.has(item)); // prvky ktore nie su v domene\r\n    if (illegalItems.length > 0) {\r\n      this.removePredicateValue(predicateName, tuple);\r\n      throw `Prvok ${illegalItems[0]} nie je v doméne štruktúry`;\r\n    }\r\n    if (!this.iPredicate.has(predicateName)) {\r\n      this.iPredicate.set(predicateName, []);\r\n    }\r\n    if (this.iPredicate.get(predicateName).findIndex(e => JSON.stringify(e) === JSON.stringify(tuple)) === -1) {\r\n      this.iPredicate.get(predicateName).push(tuple);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} predicateName\r\n   * @param {array} tuple\r\n   */\r\n  removePredicateValue(predicateName, tuple) {\r\n    if (!this.iPredicate.has(predicateName)) {\r\n      return;\r\n    }\r\n    let index = this.iPredicate.get(predicateName).findIndex(e => JSON.stringify(e) === JSON.stringify(tuple));\r\n    if (index > -1) {\r\n      this.iPredicate.get(predicateName).splice(index, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} predicateName\r\n   */\r\n  getPredicateValue(predicateName) {\r\n    return this.iPredicate.get(predicateName);\r\n  }\r\n\r\n  clearPredicateValue(predicateName) {\r\n    this.iPredicate.set(predicateName, []);\r\n  }\r\n\r\n  /**\r\n   * nastavi hodnotu funkcie pri textovom rezime\r\n   * @param {string} functionName name/arity\r\n   * @param {array} params\r\n   * @param {string} value\r\n   */\r\n  setFunctionValue(functionName, params, value) {\r\n    let fn = functionName.split('/')[0];\r\n    let stringifiedParams = JSON.stringify(params);\r\n    if (params.length !== this.language.getFunction(fn)) {\r\n      throw `Počet parametrov ${params} nezodpovedá arite funkcie`;\r\n    }\r\n    let illegalItems = [...params, value].filter(item => !this.domain.has(item));\r\n    if (illegalItems.length > 0) {\r\n      throw `Prvok ${illegalItems[0]} nie je v doméne štruktúry`;\r\n    }\r\n    if (!this.iFunction.has(functionName)) {\r\n      this.iFunction.set(functionName, {});\r\n    }\r\n    this.iFunction.get(functionName)[stringifiedParams] = value;\r\n  }\r\n\r\n  /**\r\n   * zmeni hodnotu funkcie pri tabulkovom rezime\r\n   * @param {string} functionName name/arity\r\n   * @param {array} params\r\n   * @param {string} value\r\n   */\r\n  changeFunctionValue(functionName, params, value) {\r\n    if (value.length === 0) {\r\n      this.removeFunctionValue(functionName, params);\r\n      return;\r\n    }\r\n    if (!this.iFunction.has(functionName)) {\r\n      this.iFunction.set(functionName, {});\r\n      this.iFunction.get(functionName)[JSON.stringify(params)] = value;\r\n      return;\r\n    }\r\n    this.iFunction.get(functionName)[JSON.stringify(params)] = value;\r\n  }\r\n\r\n  /**\r\n   * odstrani hodnotu funkcie pri tabulkovom rezime\r\n   * @param {string} functionName name/arity\r\n   * @param {array} params\r\n   */\r\n  removeFunctionValue(functionName, params) {\r\n    if (this.iFunction.has(functionName) && this.iFunction.get(functionName).hasOwnProperty(JSON.stringify(params))) {\r\n      delete this.iFunction.get(functionName)[JSON.stringify(params)];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * vrati hodnotu funkcie\r\n   * @param {string} functionName\r\n   * @param {Array} functionParams\r\n   * @return {Object}\r\n   */\r\n  getFunctionValue(functionName, functionParams = null) {\r\n    if (!this.iFunction.has(functionName)) {\r\n      return null;\r\n    }\r\n    if (functionParams) {\r\n      return this.iFunction.get(functionName)[JSON.stringify(functionParams)];\r\n    }\r\n    return this.iFunction.get(functionName);\r\n  }\r\n\r\n  getFunctionValueArray(functionName) {\r\n    let res = [];\r\n    let values = this.iFunction.get(functionName);\r\n    if (!values) {\r\n      return res;\r\n    }\r\n    for (let key in values) {\r\n      if (!values.hasOwnProperty(key)) {\r\n        continue;\r\n      }\r\n      let tuple = JSON.parse(key);\r\n      tuple.push(values[key]);\r\n      res.push(tuple);\r\n    }\r\n    return res;\r\n  }\r\n\r\n  clearFunctionValue(functionName) {\r\n    if (this.iFunction.has(functionName)) {\r\n      this.iFunction.set(functionName, {});\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default Structure;","\r\nexport const CONSTANT_IN_LANGUAGE = 'Jazyk štruktúry už obsahuje konštantu';\r\nexport const FUNCTION_IN_LANGUAGE = 'Jazyk štruktúry už obsahuje funkciu';\r\nexport const PREDICATE_IN_LANGUAGE = 'Jazyk štruktúry už obsahuje predikát';\r\n\r\nexport const ITEM_IN_LANGUAGE = (item) => `Jazyk už obsahuje prvok ${item}`;\r\n\r\nexport const EMPTY_CONSTANT_VALUE = 'Interpretačná hodnota konštanty nesmie byť prázdna';\r\nexport const EMPTY_DOMAIN = 'Množina domény nesmie byť prázdna';\r\nexport const ITEM_NOT_IN_DOMAIN = (item) => `Doména štruktúry neobsahuje prvok ${item}`;\r\n\r\nexport const FUNCTION_NOT_FULL_DEFINED = 'Funkcia nie je definovaná pre všetky argumenty';\r\nexport const FUNCTION_ALREADY_DEFINED = (params) => `Funkcia je viackrát definovaná pre argumenty ${params}`;","import {CONSTANT_IN_LANGUAGE, FUNCTION_IN_LANGUAGE, PREDICATE_IN_LANGUAGE} from \"../constants/messages\";\r\n\r\n/**\r\n * Represent language of logic\r\n * @author Milan Cifra\r\n * @class\r\n */\r\nclass Language {\r\n\r\n  constructor() {\r\n    this.constants = new Set();\r\n    this.functions = new Map();\r\n    this.predicates = new Map();\r\n  }\r\n\r\n  getConstants() {\r\n    return this.constants;\r\n  }\r\n\r\n  hasItem(item) {\r\n    return this.hasConstant(item) || this.hasFunction(item) || this.hasPredicate(item);\r\n  }\r\n\r\n  clearConstants() {\r\n    this.constants.clear();\r\n  }\r\n\r\n  clearFunctions() {\r\n    this.functions.clear();\r\n  }\r\n\r\n  clearPredicates() {\r\n    this.predicates.clear();\r\n  }\r\n\r\n  setConstants(constants) {\r\n    this.clearConstants();\r\n    let message = '';\r\n    constants.forEach(c => {\r\n      if (this.functions.has(c)) {\r\n        message = `${FUNCTION_IN_LANGUAGE} ${c}`;\r\n        return;\r\n      }\r\n      if (this.predicates.has(c)) {\r\n        message = `${PREDICATE_IN_LANGUAGE} ${c}`;\r\n        return;\r\n      }\r\n      this.addConstant(c);\r\n    });\r\n    return message;\r\n  }\r\n\r\n  setPredicates(predicates) {\r\n    this.clearPredicates();\r\n    let message = '';\r\n    predicates.forEach(p => {\r\n      if (this.constants.has(p.name)) {\r\n        message = `${CONSTANT_IN_LANGUAGE}  ${p.name}`;\r\n        return;\r\n      }\r\n      if (this.functions.has(p.name)) {\r\n        message = `${FUNCTION_IN_LANGUAGE} ${p.name}`;\r\n        return;\r\n      }\r\n      this.addPredicate(p.name, p.arity);\r\n    });\r\n    return message;\r\n  }\r\n\r\n  setFunctions(functions) {\r\n    this.clearFunctions();\r\n    let message = '';\r\n    functions.forEach(f => {\r\n      if (this.constants.has(f.name)) {\r\n        message = `${CONSTANT_IN_LANGUAGE} ${f.name}`;\r\n        return;\r\n      }\r\n      if (this.predicates.has(f.name)) {\r\n        message = `${PREDICATE_IN_LANGUAGE} ${f.name}`;\r\n        return;\r\n      }\r\n      this.addFunction(f.name, parseInt(f.arity));\r\n    });\r\n    return message;\r\n  }\r\n\r\n  /**\r\n   * Add constant name to the language\r\n   * @param {string} constantName Constant name\r\n   */\r\n  addConstant(constantName) {\r\n    this.constants.add(constantName);\r\n  }\r\n\r\n  /**\r\n   * Add predicate name to the language\r\n   * @param {string} predicateName Name of the predicate\r\n   * @param {int} arity Arity of predicate\r\n   */\r\n  addPredicate(predicateName, arity) {\r\n    this.predicates.set(predicateName, arity);\r\n  }\r\n\r\n  /**\r\n   * Add function name to the language\r\n   * @param {string} functionName Name of function\r\n   * @param {int} arity Arity of function\r\n   */\r\n  addFunction(functionName, arity) {\r\n    this.functions.set(functionName, arity);\r\n  }\r\n\r\n  hasConstant(constantName) {\r\n    return this.constants.has(constantName);\r\n  }\r\n\r\n  hasPredicate(predicateName) {\r\n    return this.hasInSet(predicateName,this.predicates);\r\n  }\r\n\r\n  hasFunction(functionName) {\r\n    return this.hasInSet(functionName,this.functions);\r\n  }\r\n\r\n  hasInSet(elementName,givenSet){\r\n    let splited = elementName.split('/');\r\n    if (splited.length !== 2) {\r\n      return givenSet.has(splited[0]);\r\n    }\r\n    if (isNaN(parseInt(splited[1]))) {\r\n      return false;\r\n    }\r\n    return givenSet.has(splited[0]) && givenSet.get(splited[0]).toString() === splited[1].toString();\r\n  }\r\n\r\n  /**\r\n   * Return arity of the function\r\n   * @param {string} functionName\r\n   * @return {int} arity of the function\r\n   */\r\n  getFunction(functionName) {\r\n    return this.functions.get(functionName);\r\n  }\r\n\r\n  /**\r\n   * Return arity of the predicate\r\n   * @param {string} predicateName\r\n   * @return {int} arity of the predicate\r\n   */\r\n  getPredicate(predicateName) {\r\n    return this.predicates.get(predicateName);\r\n  }\r\n\r\n}\r\n\r\nexport default Language;","import {\r\n  ADD_BINARY_FUNCTION,\r\n  ADD_BINARY_PREDICATE,\r\n  ADD_CONSTANT_NODE, ADD_QUATERNARY_PREDICATE, ADD_TERNARY_FUNCTION, ADD_TERNARY_PREDICATE, ADD_UNARY_FUNCTION,\r\n  ADD_UNARY_PREDICATE,\r\n  IMPORT_APP,\r\n  LOCK_CONSTANTS,\r\n  LOCK_FUNCTIONS,\r\n  LOCK_PREDICATES,\r\n  REMOVE_CONSTANT_NODE, REMOVE_DOMAIN_NODE,\r\n  RENAME_CONSTANT_NODE, RENAME_DOMAIN_NODE,\r\n  SET_CONSTANTS,\r\n  SET_FUNCTIONS,\r\n  SET_PREDICATES\r\n} from \"../actions/action_types\";\r\nimport {\r\n  RULE_CONSTANTS,\r\n  RULE_FUNCTIONS,\r\n  RULE_PREDICATES\r\n} from \"../../constants/parser_start_rules\";\r\nimport {defaultInputData} from \"../../constants\";\r\nimport {PREDICATE as PRED,FUNCTION as FUNC} from \"../../graph_view/nodes/ConstantNames\";\r\n\r\nlet functions = require('./functions/functions');\r\n\r\nlet state = {};\r\nlet structure = null;\r\n\r\nexport function defaultState(){\r\n  return{\r\n    constants: defaultInputData(),\r\n    predicates: defaultInputData(),\r\n    functions: defaultInputData()\r\n  }\r\n}\r\n\r\nfunction languageReducer(s, action, struct) {\r\n  state = copyState(s);\r\n  structure = struct;\r\n  switch (action.type) {\r\n    case SET_CONSTANTS:\r\n      functions.parseText(action.value, state.constants, {startRule: RULE_CONSTANTS});\r\n      setConstants();\r\n      setPredicates();\r\n      setFunctions();\r\n      return state;\r\n    case SET_PREDICATES:\r\n      functions.parseText(action.value, state.predicates, {startRule: RULE_PREDICATES});\r\n      setPredicates();\r\n      setConstants();\r\n      setFunctions();\r\n      return state;\r\n    case SET_FUNCTIONS:\r\n      functions.parseText(action.value, state.functions, {startRule: RULE_FUNCTIONS});\r\n      setFunctions();\r\n      setPredicates();\r\n      setConstants();\r\n      return state;\r\n    case ADD_UNARY_PREDICATE:\r\n      addLanguageElement(action.predicateName, 1, PRED);\r\n      return state;\r\n    case ADD_BINARY_PREDICATE:\r\n      addLanguageElement(action.predicateName, 2, PRED);\r\n      return state;\r\n    case ADD_TERNARY_PREDICATE:\r\n      addLanguageElement(action.predicateName, 3, PRED);\r\n      return state;\r\n    case ADD_QUATERNARY_PREDICATE:\r\n      addLanguageElement(action.predicateName, 4, PRED);\r\n      return state;\r\n    case ADD_UNARY_FUNCTION:\r\n      addLanguageElement(action.functionName, 1, FUNC);\r\n      return state;\r\n    case ADD_BINARY_FUNCTION:\r\n      addLanguageElement(action.functionName, 2, FUNC);\r\n      return state;\r\n    case ADD_TERNARY_FUNCTION:\r\n      addLanguageElement(action.functionName, 3, FUNC);\r\n      return state;\r\n    case ADD_CONSTANT_NODE:\r\n      let newConstantVal = Array.from(structure.language.constants).join(\", \");\r\n\r\n      if (newConstantVal.length !== 0) {\r\n        newConstantVal += \", \";\r\n      }\r\n      newConstantVal += action.nodeName;\r\n\r\n      functions.parseText(newConstantVal, state.constants, {startRule: RULE_CONSTANTS});\r\n      setConstants();\r\n      return state;\r\n\r\n    case RENAME_DOMAIN_NODE:\r\n    case REMOVE_DOMAIN_NODE:\r\n      functions.parseText(returnParsedConstValues(), state.constants, {startRule: RULE_CONSTANTS});\r\n      setConstants();\r\n\r\n      functions.parseText(returnParsedPredValues(), state.predicates, {startRule: RULE_PREDICATES});\r\n      setPredicates();\r\n\r\n      functions.parseText(returnParsedFuncValues(), state.functions, {startRule: RULE_FUNCTIONS});\r\n      setFunctions();\r\n\r\n      return state;\r\n\r\n    case REMOVE_CONSTANT_NODE:\r\n      let newConstVal = \"\";\r\n\r\n      for (let constantName of structure.language.constants.keys()) {\r\n        if (constantName !== action.nodeName) {\r\n          newConstVal += constantName + \", \";\r\n        }\r\n      }\r\n      newConstVal = newConstVal.substring(0, newConstVal.length - 2);\r\n\r\n      functions.parseText(newConstVal, state.constants, {startRule: RULE_CONSTANTS});\r\n      setConstants();\r\n      return state;\r\n\r\n    case RENAME_CONSTANT_NODE:\r\n      let newConsVal = \"\";\r\n\r\n      for (let constantName of structure.language.constants.keys()) {\r\n        if (constantName === action.oldName) {\r\n          newConsVal += action.newName + \", \";\r\n        } else {\r\n          newConsVal += constantName + \", \";\r\n        }\r\n      }\r\n      newConsVal = newConsVal.substring(0, newConsVal.length - 2);\r\n\r\n      functions.parseText(newConsVal, state.constants, {startRule: RULE_CONSTANTS});\r\n      setConstants();\r\n      return state;\r\n\r\n    case LOCK_CONSTANTS:\r\n      state.constants.locked = !state.constants.locked;\r\n      return state;\r\n    case LOCK_PREDICATES:\r\n      state.predicates.locked = !state.predicates.locked;\r\n      return state;\r\n    case LOCK_FUNCTIONS:\r\n      state.functions.locked = !state.functions.locked;\r\n      return state;\r\n    case IMPORT_APP:\r\n      setConstants();\r\n      setPredicates();\r\n      setFunctions();\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction returnParsedConstValues(){\r\n  return Array.from(structure.language.constants).join(\", \");\r\n}\r\n\r\nfunction returnParsedPredValues(){\r\n  let newPredValues = \"\";\r\n\r\n  for(let [predicateName,predicateArity] of structure.language.predicates.entries()){\r\n    newPredValues+=predicateName+\"/\"+predicateArity+\", \";\r\n  }\r\n  newPredValues = newPredValues.substring(0,newPredValues.length-2);\r\n\r\n  return newPredValues;\r\n}\r\n\r\nfunction returnParsedFuncValues(){\r\n  let newFuncValues = \"\";\r\n\r\n  for(let [functionName,functionArity] of structure.language.functions.entries()){\r\n    newFuncValues+=functionName+\"/\"+functionArity+\", \";\r\n  }\r\n  newFuncValues = newFuncValues.substring(0,newFuncValues.length-2);\r\n\r\n  return newFuncValues;\r\n}\r\n\r\nfunction addLanguageElement(elementName,elementArity,type){\r\n  let elementNameWithArity = elementName+\"/\"+elementArity;\r\n  let parsedElementMap = type===PRED?structure.language.predicates:structure.language.functions;\r\n  let newElemValue = \"\";\r\n\r\n  for(let [elemValue,elemArity] of parsedElementMap.entries()){\r\n    newElemValue+=elemValue+\"/\"+elemArity+\", \";\r\n  }\r\n\r\n  if(newElemValue.length!==0){\r\n    if(!parsedElementMap.has(elementName)) {\r\n      newElemValue += elementNameWithArity;\r\n    }\r\n    else{\r\n      newElemValue = newElemValue.substring(0,newElemValue.length-2);\r\n    }\r\n  }\r\n  else{\r\n    newElemValue = elementNameWithArity;\r\n  }\r\n\r\n  let elemState = type===PRED?state.predicates:state.functions;\r\n  functions.parseText(newElemValue, elemState, {startRule: type===PRED?RULE_PREDICATES:RULE_FUNCTIONS});\r\n  type===PRED?setPredicates():setFunctions();\r\n}\r\n\r\nfunction setConstants() {\r\n  if (!state.constants.parsed) {\r\n    return;\r\n  }\r\n  state.constants.errorMessage = structure.setLanguageConstants(state.constants.parsed);\r\n}\r\n\r\nfunction setPredicates() {\r\n  if (!state.predicates.parsed) {\r\n    return;\r\n  }\r\n  state.predicates.errorMessage = structure.setLanguagePredicates(state.predicates.parsed);\r\n}\r\n\r\nfunction setFunctions() {\r\n  if (!state.functions.parsed) {\r\n    return;\r\n  }\r\n  state.functions.errorMessage = structure.setLanguageFunctions(state.functions.parsed);\r\n}\r\n\r\nconst copyState = (state) => ({\r\n  ...state,\r\n  constants: {...state.constants},\r\n  predicates: {...state.predicates},\r\n  functions: {...state.functions}\r\n});\r\n\r\nexport default languageReducer;","export const SET_CONSTANTS = 'SET_CONSTANTS';\r\nexport const SET_PREDICATES = 'SET_PREDICATES';\r\nexport const SET_FUNCTIONS = 'SET_FUNCTIONS';\r\nexport const SET_DIAGRAM = 'SET_DIAGRAM';\r\n\r\nexport const LOCK_CONSTANTS = 'LOCK_CONSTANTS';\r\nexport const LOCK_PREDICATES = 'LOCK_PREDICATES';\r\nexport const LOCK_FUNCTIONS = 'LOCK_FUNCTIONS';\r\n\r\nexport const SET_CONSTANT_VALUE = 'SET_CONSTANT_VALUE';\r\nexport const SET_PREDICATE_VALUE_TEXT = 'SET_PREDICATE_VALUE_TEXT';\r\nexport const SET_PREDICATE_VALUE_TABLE = 'SET_PREDICATE_VALUE_TABLE';\r\nexport const SET_FUNCTION_VALUE_TEXT = 'SET_FUNCTION_VALUE_TEXT';\r\nexport const SET_FUNCTION_VALUE_TABLE = 'SET_FUNCTION_VALUE_TABLE';\r\n\r\nexport const LOCK_CONSTANT_VALUE = 'LOCK_CONSTANT_VALUE';\r\nexport const LOCK_PREDICATE_VALUE = 'LOCK_PREDICATE_VALUE';\r\nexport const LOCK_FUNCTION_VALUE = 'LOCK_FUNCTION_VALUE';\r\n\r\nexport const SET_VARIABLES_VALUE = 'SET_VARIABLES_VALUE';\r\nexport const SYNC_DIAGRAM = 'SYNC_DIAGRAM';\r\nexport const SET_DOMAIN = 'SET_DOMAIN';\r\nexport const SYNC_MATH_STATE = 'SYNC_MATH_STATE';\r\nexport const RENAME_DOMAIN_NODE = 'RENAME_DOMAIN_NODE';\r\nexport const RENAME_CONSTANT_NODE = 'RENAME_CONSTANT_NODE';\r\nexport const ADD_UNARY_PREDICATE = 'ADD_UNARY_PREDICATE';\r\nexport const REMOVE_UNARY_PREDICATE = 'REMOVE_UNARY_PREDICATE';\r\nexport const ADD_BINARY_PREDICATE = 'ADD_BINARY_PREDICATE';\r\nexport const REMOVE_BINARY_PREDICATE = 'REMOVE_BINARY_PREDICATE';\r\nexport const ADD_CONSTANT_NODE = 'ADD_CONSTANT_NODE';\r\nexport const REMOVE_CONSTANT_NODE = 'REMOVE_CONSTANT_NODE';\r\nexport const RESET_DIAGRAM_STATE = 'RESET_DIAGRAM_STATE';\r\nexport const ADD_DOMAIN_NODE = 'ADD_DOMAIN_NODE';\r\nexport const ADD_TERNARY_NODE = 'ADD_TERNARY_NODE';\r\nexport const ADD_QUATERNARY_NODE = 'ADD_QUATERNARY_NODE';\r\nexport const REMOVE_DOMAIN_NODE = 'REMOVE_DOMAIN_NODE';\r\nexport const REMOVE_TERNARY_NODE = 'REMOVE_TERNARY_NODE';\r\nexport const REMOVE_QUATERNARY_NODE = 'REMOVE_QUATERNARY_NODE';\r\nexport const ADD_TERNARY_PREDICATE = 'ADD_TERNARY_PREDICATE';\r\nexport const REMOVE_TERNARY_PREDICATE = 'REMOVE_TERNARY_PREDICATE';\r\nexport const ADD_QUATERNARY_PREDICATE = 'ADD_QUATERNARY_PREDICATE';\r\nexport const REMOVE_QUATERNARY_PREDICATE = 'REMOVE_QUATERNARY_PREDICATE';\r\nexport const ADD_UNARY_FUNCTION = 'ADD_UNARY_FUNCTION';\r\nexport const REMOVE_UNARY_FUNCTION = 'REMOVE_UNARY_FUNCTION';\r\nexport const ADD_BINARY_FUNCTION = 'ADD_BINARY_FUNCTION';\r\nexport const REMOVE_BINARY_FUNCTION = 'REMOVE_BINARY_FUNCTION';\r\nexport const ADD_TERNARY_FUNCTION = 'ADD_TERNARY_FUNCTION';\r\nexport const REMOVE_TERNARY_FUNCTION = 'REMOVE_TERNARY_FUNCTION';\r\nexport const CHANGE_DIRECTION_OF_BINARY_RELATION = 'CHANGE_DIRECTION_OF_BINARY_RELATION';\r\nexport const SET_CONSTANT_VALUE_FROM_LINK = 'SET_CONSTANT_VALUE_FROM_LINK';\r\nexport const IMPORT_DIAGRAM_STATE = 'IMPORT_DIAGRAM_STATE';\r\nexport const CLEAR_GRAPH_SELECTION = 'CLEAR_GRAPH_SELECTION';\r\n\r\nexport const LOCK_DOMAIN = 'LOCK_DOMAIN';\r\nexport const LOCK_VARIABLES = 'LOCK_VARIABLES';\r\n\r\nexport const IMPORT_APP = 'IMPORT_APP';\r\n\r\nexport const ADD_EXPRESSION = 'ADD_EXPRESSION';\r\nexport const REMOVE_EXPRESSION = 'REMOVE_EXPRESSION';\r\nexport const SET_EXPRESSION_ANSWER = 'SET_EXPRESSION_ANSWER';\r\nexport const LOCK_EXPRESSION_VALUE = 'LOCK_EXPRESSION_VALUE';\r\nexport const LOCK_EXPRESSION_ANSWER = 'LOCK_EXPRESSION_ANSWER';\r\nexport const CHECK_SYNTAX = 'CHECK_SYNTAX';\r\n\r\nexport const TOGGLE_EDIT_TABLE = 'TOGGLE_EDIT_TABLE';\r\nexport const TOGGLE_EDIT_DATABASE = 'TOGGLE_EDIT_DATABASE';\r\nexport const TOGGLE_TEACHER_MODE = 'TOGGLE_TEACHER_MODE';\r\nexport const TOGGLE_EDITABLE_NODES = 'TOGGLE_EDITABLE_NODES';\r\n","import {\r\n  IMPORT_APP,\r\n  LOCK_CONSTANT_VALUE,\r\n  LOCK_DOMAIN,\r\n  LOCK_FUNCTION_VALUE,\r\n  LOCK_PREDICATE_VALUE,\r\n  LOCK_VARIABLES,\r\n  SET_CONSTANT_VALUE,\r\n  SET_CONSTANTS,\r\n  SET_DOMAIN,\r\n  SET_FUNCTION_VALUE_TABLE,\r\n  SET_FUNCTION_VALUE_TEXT,\r\n  SET_FUNCTIONS,\r\n  SET_PREDICATE_VALUE_TABLE,\r\n  SET_PREDICATE_VALUE_TEXT,\r\n  SET_PREDICATES,\r\n  SET_VARIABLES_VALUE,\r\n  TOGGLE_EDIT_TABLE,\r\n  TOGGLE_EDIT_DATABASE,\r\n  RENAME_DOMAIN_NODE,\r\n  ADD_DOMAIN_NODE,\r\n  REMOVE_DOMAIN_NODE,\r\n  ADD_CONSTANT_NODE,\r\n  REMOVE_CONSTANT_NODE,\r\n  ADD_UNARY_PREDICATE,\r\n  RENAME_CONSTANT_NODE,\r\n  SET_CONSTANT_VALUE_FROM_LINK,\r\n  REMOVE_UNARY_PREDICATE,\r\n  ADD_BINARY_PREDICATE,\r\n  REMOVE_BINARY_PREDICATE,\r\n  CHANGE_DIRECTION_OF_BINARY_RELATION,\r\n  ADD_UNARY_FUNCTION,\r\n  REMOVE_UNARY_FUNCTION,\r\n  ADD_TERNARY_PREDICATE,\r\n  REMOVE_TERNARY_PREDICATE,\r\n  REMOVE_BINARY_FUNCTION,\r\n  ADD_QUATERNARY_PREDICATE,\r\n  REMOVE_QUATERNARY_PREDICATE, REMOVE_TERNARY_FUNCTION, ADD_TERNARY_FUNCTION, ADD_BINARY_FUNCTION\r\n} from \"../actions/action_types\";\r\nimport {\r\n  EMPTY_CONSTANT_VALUE, EMPTY_DOMAIN, FUNCTION_ALREADY_DEFINED, FUNCTION_NOT_FULL_DEFINED, ITEM_IN_LANGUAGE,\r\n  ITEM_NOT_IN_DOMAIN\r\n} from \"../../constants/messages\";\r\nimport {\r\n  RULE_DOMAIN,\r\n  RULE_PREDICATES_FUNCTIONS_VALUE,\r\n  RULE_VARIABLE_VALUATION\r\n} from \"../../constants/parser_start_rules\";\r\nimport {defaultInputData, PREDICATE} from \"../../constants\";\r\nimport {BOTH, FROM, PREDICATE as PRED,FUNCTION as FUNC, TO} from \"../../graph_view/nodes/ConstantNames\";\r\n\r\nlet functions = require('./functions/functions');\r\n\r\nconst constantDefaultInput = () => ({...defaultInputData(), errorMessage: EMPTY_CONSTANT_VALUE});\r\nconst predicateDefaultInput = () => ({...defaultInputData(), tableEnabled: false});\r\nconst functionDefaultInput = () => predicateDefaultInput();\r\n\r\nlet state = {};\r\nlet structure = null;\r\n\r\nexport function defaultState(){\r\n  return{\r\n    constants: {},\r\n    predicates: {},\r\n    functions: {},\r\n    variables: {...defaultInputData(), object: new Map()},\r\n    domain: {...defaultInputData(), errorMessage: EMPTY_DOMAIN}\r\n  }\r\n}\r\n\r\nfunction structureReducer(s, action, struct) {\r\n  state = copyState(s);\r\n  structure = struct;\r\n  let input = action.itemType === PREDICATE ? state.predicates[action.name] : state.functions[action.name];\r\n  switch (action.type) {\r\n    case SET_CONSTANTS:\r\n    case SET_PREDICATES:\r\n    case SET_FUNCTIONS:\r\n      syncLanguageWithStructure();\r\n      setVariables();\r\n      return state;\r\n\r\n    case ADD_CONSTANT_NODE:\r\n      insertNewInputs();\r\n      return state;\r\n\r\n    case REMOVE_CONSTANT_NODE:\r\n      deleteUnusedInputs();\r\n      return state;\r\n\r\n    case SET_CONSTANT_VALUE_FROM_LINK:\r\n      setConstantValue(action.constantNodeName, action.domainNodeName);\r\n      return state;\r\n\r\n    case RENAME_CONSTANT_NODE:\r\n      let newStateConstantObject = Object.keys(state.constants).map(key => {\r\n        let newKey = key === action.oldName ? action.newName : key;\r\n        return {[newKey]: state.constants[key]}\r\n      });\r\n\r\n      state.constants = Object.assign({}, ...newStateConstantObject);\r\n      structure.iConstant.set(action.newName, state.constants[action.newName]);\r\n      syncLanguageWithStructure();\r\n      return state;\r\n\r\n    case ADD_UNARY_PREDICATE:\r\n      addLanguageElement(action.predicateName, 1, [action.nodeName], PRED);\r\n      return state;\r\n\r\n    case ADD_BINARY_PREDICATE:\r\n      addLanguageElement(action.predicateName, 2, [action.sourceNodeName, action.targetNodeName], PRED, BOTH);\r\n      return state;\r\n\r\n    case ADD_TERNARY_PREDICATE:\r\n      addLanguageElement(action.predicateName,3,action.nodeName,PRED);\r\n      return state;\r\n\r\n    case ADD_QUATERNARY_PREDICATE:\r\n      addLanguageElement(action.predicateName, 4,action.nodeName,PRED);\r\n      return state;\r\n\r\n    case ADD_BINARY_FUNCTION:\r\n      addLanguageElement(action.functionName,2,action.nodeName,FUNC);\r\n      return state;\r\n\r\n    case ADD_TERNARY_FUNCTION:\r\n      addLanguageElement(action.functionName,3,action.nodeName,FUNC);\r\n      return state;\r\n\r\n    case REMOVE_UNARY_PREDICATE:\r\n      removeLanguageElement(action.predicateName, 1, [action.nodeName], PRED);\r\n      return state;\r\n\r\n    case REMOVE_BINARY_PREDICATE:\r\n      removeLanguageElementInGivenDirection(action.predicateName, action.direction, action.sourceNodeName, action.targetNodeName, PRED);\r\n      return state;\r\n\r\n    case REMOVE_TERNARY_PREDICATE:\r\n      removeLanguageElement(action.predicateName,3,action.nodeName,PRED);\r\n      return state;\r\n\r\n    case REMOVE_QUATERNARY_PREDICATE:\r\n      removeLanguageElement(action.predicateName,4,action.nodeName,PRED);\r\n      return state;\r\n\r\n    case REMOVE_BINARY_FUNCTION:\r\n      removeLanguageElement(action.functionName,2,action.nodeName,FUNC);\r\n      return state;\r\n\r\n    case REMOVE_TERNARY_FUNCTION:\r\n      removeLanguageElement(action.functionName,3,action.nodeName,FUNC);\r\n      return state;\r\n\r\n    case CHANGE_DIRECTION_OF_BINARY_RELATION:\r\n      let arity = action.langType === PRED?2:1;\r\n      if (action.direction === FROM) {\r\n        removeLanguageElement(action.languageElementName, arity, [action.targetNodeName, action.sourceNodeName], action.langType);\r\n      } else if (action.direction === TO) {\r\n        removeLanguageElement(action.languageElementName, arity, [action.sourceNodeName, action.targetNodeName], action.langType);\r\n      }\r\n      addLanguageElement(action.languageElementName, arity, [action.sourceNodeName, action.targetNodeName], action.langType, action.direction);\r\n      return state;\r\n\r\n    case ADD_UNARY_FUNCTION:\r\n      addLanguageElement(action.functionName, 1, [action.sourceNodeName, action.targetNodeName], FUNC, action.direction);\r\n      return state;\r\n\r\n    case REMOVE_UNARY_FUNCTION:\r\n      removeLanguageElementInGivenDirection(action.functionName, action.direction, action.sourceNodeName, action.targetNodeName, FUNC);\r\n      return state;\r\n\r\n    case SET_CONSTANT_VALUE:\r\n      setConstantValue(action.constantName, action.value);\r\n      return state;\r\n    case SET_PREDICATE_VALUE_TEXT:\r\n      functions.parseText(action.value, state.predicates[action.predicateName], {startRule: RULE_PREDICATES_FUNCTIONS_VALUE});\r\n      setPredicateValue(action.predicateName);\r\n      return state;\r\n    case SET_PREDICATE_VALUE_TABLE:\r\n      if (action.checked) {\r\n        addPredicateValue(action.predicateName, action.value);\r\n      } else {\r\n        removePredicateValue(action.predicateName, action.value);\r\n      }\r\n      let predicateValue = structure.getPredicateValue(action.predicateName);\r\n      state.predicates[action.predicateName].parsed = predicateValue;\r\n      state.predicates[action.predicateName].value = predicateValueToString(predicateValue);\r\n      return state;\r\n    case SET_FUNCTION_VALUE_TEXT:\r\n      functions.parseText(action.value, state.functions[action.functionName], {startRule: RULE_PREDICATES_FUNCTIONS_VALUE});\r\n      setFunctionValue(action.functionName);\r\n      return state;\r\n    case SET_FUNCTION_VALUE_TABLE:\r\n      let tuple = action.value;\r\n      let params = tuple.slice(0, tuple.length - 1);\r\n      let value = tuple[tuple.length - 1];\r\n      structure.changeFunctionValue(action.functionName, params, value);\r\n      let fValue = structure.getFunctionValueArray(action.functionName);\r\n      state.functions[action.functionName].parsed = fValue;\r\n      state.functions[action.functionName].value = predicateValueToString(fValue);\r\n      state.functions[action.functionName].errorMessage = '';\r\n      if (!checkFunctionValue(action.functionName)) {\r\n        state.functions[action.functionName].errorMessage = FUNCTION_NOT_FULL_DEFINED;\r\n      }\r\n      return state;\r\n    case SET_VARIABLES_VALUE:\r\n      functions.parseText(action.value, state.variables, {structure: structure, startRule: RULE_VARIABLE_VALUATION});\r\n      setVariables();\r\n      return state;\r\n\r\n    case RENAME_DOMAIN_NODE:\r\n      syncLanguageWithStructure();\r\n      let newDomainVal = \"\";\r\n\r\n      for (let nodeName of structure.domain) {\r\n        if (nodeName === action.oldName) {\r\n          newDomainVal += action.newName + \", \";\r\n        } else {\r\n          newDomainVal += nodeName + \", \";\r\n        }\r\n      }\r\n      newDomainVal = newDomainVal.substring(0, newDomainVal.length - 2);\r\n\r\n      functions.parseText(newDomainVal, state.domain, {startRule: RULE_DOMAIN});\r\n      setDomain();\r\n\r\n      Object.keys(state.constants).forEach(c => {\r\n        if (state.constants[c].value === action.oldName) {\r\n          state.constants[c].value = action.newName;\r\n        }\r\n      });\r\n      setConstantsValues();\r\n\r\n      changePredicatesValues(action.oldName, action.newName);\r\n      rebuildPredicatesValuesFromParsedInterpretation();\r\n\r\n      /*setFunctionsValues();\r\n      setVariables();*/\r\n      return state;\r\n\r\n    case ADD_DOMAIN_NODE:\r\n      let domainState = Array.from(structure.domain).join(\", \");\r\n\r\n      if (domainState.length !== 0) {\r\n        domainState += \", \";\r\n      }\r\n      domainState += action.nodeName;\r\n\r\n      functions.parseText(domainState, state.domain, {startRule: RULE_DOMAIN});\r\n      setDomain();\r\n      return state;\r\n\r\n    case REMOVE_DOMAIN_NODE:\r\n      let newDomainValue = \"\";\r\n\r\n      for (let domainElement of structure.domain.keys()) {\r\n        if (domainElement !== action.nodeName) {\r\n          newDomainValue += domainElement + \", \";\r\n        }\r\n      }\r\n      newDomainValue = newDomainValue.substring(0, newDomainValue.length - 2);\r\n\r\n      functions.parseText(newDomainValue, state.domain, {startRule: RULE_DOMAIN});\r\n      setDomain();\r\n\r\n      //toto mozem pretoze tu nie je input okno takze toto sa \"neda\" pokazit takym sposobom\r\n      Object.keys(structure.domain).forEach(c => {\r\n        if (state.constants[c].value === action.oldName) {\r\n          state.constants[c].value = \"\";\r\n        }\r\n      });\r\n      setConstantsValues();\r\n      return state;\r\n\r\n    case SET_DOMAIN:\r\n      functions.parseText(action.value, state.domain, {startRule: RULE_DOMAIN});\r\n      setDomain();\r\n      setConstantsValues();\r\n      setPredicatesValues();\r\n      setFunctionsValues();\r\n      setVariables();\r\n      return state;\r\n\r\n    case TOGGLE_EDIT_TABLE:\r\n      if (input) {\r\n        input.tableEnabled = !input.tableEnabled;\r\n        if (input.tableEnabled) {\r\n          input.databaseEnabled = false;\r\n        }\r\n      }\r\n      return state;\r\n\r\n    case TOGGLE_EDIT_DATABASE:\r\n      if (input) {\r\n        input.databaseEnabled = !input.databaseEnabled;\r\n        if (input.databaseEnabled) {\r\n          input.tableEnabled = false;\r\n        }\r\n      }\r\n      return state;\r\n\r\n    case LOCK_DOMAIN:\r\n      state.domain.locked = !state.domain.locked;\r\n      return state;\r\n    case LOCK_CONSTANT_VALUE:\r\n      state.constants[action.constantName].locked = !state.constants[action.constantName].locked;\r\n      return state;\r\n    case LOCK_PREDICATE_VALUE:\r\n      state.predicates[action.predicateName].locked = !state.predicates[action.predicateName].locked;\r\n      return state;\r\n    case LOCK_FUNCTION_VALUE:\r\n      state.functions[action.functionName].locked = !state.functions[action.functionName].locked;\r\n      return state;\r\n    case LOCK_VARIABLES:\r\n      state.variables.locked = !state.variables.locked;\r\n      return state;\r\n    case IMPORT_APP:\r\n      setDomain();\r\n      setConstantsValues();\r\n      setPredicatesValues();\r\n      setFunctionsValues();\r\n      setVariables();\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction addUnaryPredicate(predicateName,nodeName){\r\n  let predName = predicateName+\"/1\";\r\n  let newPredValue = \"\";\r\n\r\n  if(structure.iPredicate.has(predName)){\r\n    for(let parsedArrayOfLanguageElements of structure.iPredicate.get(predName)){\r\n      newPredValue += parsedArrayOfLanguageElements[0]+\", \";\r\n    }\r\n  }\r\n  newPredValue += nodeName;\r\n  return newPredValue;\r\n}\r\n\r\nfunction removeLanguageElementInGivenDirection(elementName,direction,sourceNodeName,targetNodeName,type) {\r\n  let nodeNames = [sourceNodeName, targetNodeName]; //FROM direction\r\n\r\n  if (direction === TO) {\r\n    nodeNames = [targetNodeName,sourceNodeName];\r\n  } else {\r\n    removeLanguageElement(elementName, type===PRED?2:1, [targetNodeName, sourceNodeName], type); //deleting BOTH direction, starting with TO direction\r\n  }\r\n  removeLanguageElement(elementName, type===PRED?2:1, nodeNames, type);\r\n}\r\n\r\nfunction addTupleLanguageElement(elementName,newValue,nodeNames,type){\r\n  let elemName = elementName+\"/2\";\r\n  let newElemValue = \"\";\r\n  let structureInterpretationSet = type === PRED?structure.iPredicate:structure.iFunction;\r\n\r\n  if(structureInterpretationSet.has(elemName)){\r\n    for(let parsedArrayOfLanguageElements of structureInterpretationSet.get(elemName)){\r\n      let joinedNodeNames = nodeNames.join(\",\");\r\n      if(joinedNodeNames!==parsedArrayOfLanguageElements.join(\",\") && joinedNodeNames!==(parsedArrayOfLanguageElements[1]+\",\"+parsedArrayOfLanguageElements[0])){\r\n        newElemValue += \"(\"+parsedArrayOfLanguageElements[0]+\", \"+parsedArrayOfLanguageElements[1]+\"), \";\r\n      }\r\n    }\r\n  }\r\n  newElemValue += newValue;\r\n  return newElemValue;\r\n}\r\n\r\nfunction buildNaryLanguageElement(elementName,arity,nodeNames,type){\r\n  let elemName = elementName+\"/\"+arity;\r\n\r\n  if(type === PRED){\r\n    return buildNaryPredicateValue(structure.iPredicate,elemName,nodeNames);\r\n  }\r\n return buildNaryFunctionValue(structure.iFunction,elemName,nodeNames);\r\n}\r\n\r\nfunction buildNaryPredicateValue(structureInterpretationSet,elemName,nodeNames){\r\n  let newElemValue = \"\";\r\n  if(structureInterpretationSet.has(elemName)){\r\n    for(let parsedArrayOfLanguageElement of structureInterpretationSet.get(elemName)){\r\n      let joinedParsedLanguageElement = parsedArrayOfLanguageElement.join(\", \");\r\n      if(joinedParsedLanguageElement!==nodeNames.join(\", \")){\r\n        newElemValue += \"(\"+(joinedParsedLanguageElement)+\"), \";\r\n      }\r\n    }\r\n  }\r\n  return newElemValue;\r\n}\r\n\r\nfunction buildNaryFunctionValue(structureInterpretationSet,elemName,nodeNames){\r\n  let newElemValue = \"\";\r\n  if(structureInterpretationSet.has(elemName)) {\r\n    let structureInterpretationObject = structure.iFunction.get(elemName);\r\n    let joinedNodeNames = nodeNames.join(\", \");\r\n\r\n    for (let key in structureInterpretationObject) {\r\n      if (structureInterpretationObject.hasOwnProperty(key)) {\r\n\r\n        let keyNodeNamesParsed = JSON.parse(key).join(\", \") + (\", \" + structureInterpretationObject[key]);\r\n        if (keyNodeNamesParsed !== joinedNodeNames) {\r\n          newElemValue += \"(\" + (keyNodeNamesParsed) + \"), \";\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return newElemValue;\r\n}\r\n\r\nfunction buildPreviousFunctionValuesWithoutCurrentValue(elementName,nodeNames,direction=BOTH){\r\n  let elemName = elementName + \"/1\";\r\n  let newElemValue = \"\";\r\n\r\n  if (structure.iFunction.has(elemName)) {\r\n    let structureInterpretationObject = structure.iFunction.get(elemName);\r\n    let joinedNodeNames = nodeNames.join(\", \");\r\n\r\n    for (let key in structureInterpretationObject) {\r\n      if (structureInterpretationObject.hasOwnProperty(key)){\r\n        //attention - whitespace\r\n        let keyNodeNamesParsed = JSON.parse(key).join(\", \")+(\", \"+structureInterpretationObject[key]);\r\n        if(keyNodeNamesParsed!== joinedNodeNames){\r\n          newElemValue+= addUnaryFuncValueBasedOnCondition(key,structureInterpretationObject,joinedNodeNames,direction);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return newElemValue;\r\n}\r\n\r\nfunction addUnaryFuncValueBasedOnCondition(key,structureInterpretationObject,joinedNodeNames,direction){\r\n  let parsedArray = JSON.parse(key);\r\n  let keyNodeNamesParsed = parsedArray[0]+\", \"+structureInterpretationObject[key];\r\n\r\n  if(keyNodeNamesParsed !== joinedNodeNames){\r\n    if(direction === BOTH && (structureInterpretationObject[key]+\", \"+parsedArray[0]) === joinedNodeNames){\r\n      return \"\";\r\n    }\r\n    else{\r\n      return \"(\"+keyNodeNamesParsed+\"), \";\r\n    }\r\n  }\r\n}\r\n\r\nfunction addUnaryFunction(elementName,newValue,nodeNames) {\r\n  return buildPreviousFunctionValuesWithoutCurrentValue(elementName,nodeNames)+newValue;\r\n}\r\n\r\nfunction removeUnaryFunction(elementName,nodeNames){\r\n  let newElemValue = buildPreviousFunctionValuesWithoutCurrentValue(elementName,nodeNames,FROM);\r\n  return newElemValue.substring(0,newElemValue.length-2);\r\n}\r\n\r\nfunction changePredicatesValues(oldNodeName,newNodeName) {\r\n  for (let predKey of structure.iPredicate.keys()) {\r\n    let predicateArity = parseInt(predKey.split(\"/\")[1]);\r\n    for(let nodeValue of structure.iPredicate.get(predKey)){\r\n      for(let i = 0;i<predicateArity;i++){\r\n        if(nodeValue[i] === oldNodeName){\r\n          nodeValue[i] = newNodeName;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction rebuildPredicatesValuesFromParsedInterpretation() {\r\n  for (let predKey of structure.iPredicate.keys()) {\r\n    let predicateArity = parseInt(predKey.split(\"/\")[1]);\r\n    let newPredValue = \"\";\r\n    for (let nodeValue of structure.iPredicate.get(predKey)) {\r\n      if(predicateArity === 1){\r\n        newPredValue+=nodeValue[0]+\", \";\r\n      }\r\n      else{\r\n        newPredValue+=\"(\";\r\n        for(let i = 0;i<predicateArity;i++){\r\n          newPredValue+=nodeValue[i]+\", \";\r\n        }\r\n        newPredValue = newPredValue.substring(0,newPredValue.length-2);\r\n        newPredValue+=\"), \";\r\n      }\r\n    }\r\n    newPredValue = newPredValue.substring(0,newPredValue.length-2);\r\n    functions.parseText(newPredValue, state.predicates[predKey], {startRule: RULE_PREDICATES_FUNCTIONS_VALUE});\r\n    setPredicateValue(predKey);\r\n  }\r\n}\r\n\r\nfunction buildTupleValue(nodeNames,direction){\r\n  if(direction === BOTH){\r\n    if(nodeNames[0] === nodeNames[1]){\r\n      return \"(\"+nodeNames[0]+\", \"+nodeNames[1]+\")\";\r\n    }\r\n    else{\r\n      return \"(\"+nodeNames[0]+\", \"+nodeNames[1]+\"),\"+\" (\"+nodeNames[1]+\", \"+nodeNames[0]+\")\";\r\n    }\r\n  }\r\n  else if(direction === FROM){\r\n    return \"(\"+nodeNames[0]+\", \"+nodeNames[1]+\")\";\r\n  }\r\n  else{\r\n    return \"(\"+nodeNames[1]+\", \"+nodeNames[0]+\")\";\r\n  }\r\n}\r\n\r\nfunction addLanguageElement(elementName,elementArity,nodeNames,type,direction=\"\"){\r\n  let languageElementNameWithArity = elementName+\"/\"+elementArity;\r\n  insertNewInputs();\r\n  let elementValue;\r\n\r\n  if(elementArity === 1){\r\n    if(type === PRED){\r\n      elementValue = addUnaryPredicate(elementName,nodeNames[0]);\r\n    }\r\n    else{\r\n      elementValue = addUnaryFunction(elementName,buildTupleValue(nodeNames,direction),nodeNames);\r\n    }\r\n  }\r\n  else if(type === PRED && elementArity === 2){\r\n    elementValue = addTupleLanguageElement(elementName,buildTupleValue(nodeNames,direction),nodeNames,PRED);\r\n  }\r\n  else{\r\n    if(!nodeNames){\r\n      return;\r\n    }\r\n    elementValue = buildNaryLanguageElement(elementName,elementArity,nodeNames,type);\r\n    elementValue += \"(\"+(nodeNames.join(\", \"))+\")\";\r\n  }\r\n\r\n  let elemState = type === PRED?state.predicates:state.functions;\r\n  functions.parseText(elementValue, elemState[languageElementNameWithArity], {startRule: RULE_PREDICATES_FUNCTIONS_VALUE});\r\n  type === PRED?setPredicateValue(languageElementNameWithArity):setFunctionValue(languageElementNameWithArity);\r\n}\r\n\r\nfunction removeLanguageElement(elementName,elementArity,nodeNames,type){\r\n  let elementNameWithArity = elementName+\"/\"+elementArity;\r\n  let elementValue;\r\n\r\n  if(elementArity === 1){\r\n    elementValue = type===PRED?removeUnaryPredicate(elementName,nodeNames[0]):removeUnaryFunction(elementName,nodeNames);\r\n  }\r\n  else if(type === PRED && elementArity === 2){\r\n    elementValue = removeBinaryPredicate(elementName,nodeNames[0],nodeNames[1],PRED);\r\n  }\r\n\r\n  else{\r\n    if(!nodeNames){\r\n      return;\r\n    }\r\n    elementValue = buildNaryLanguageElement(elementName,elementArity,nodeNames,type);\r\n    elementValue = elementValue.substring(0,elementValue.length-2);\r\n  }\r\n\r\n  functions.parseText(elementValue,type===PRED?state.predicates[elementNameWithArity]:state.functions[elementNameWithArity],{startRule:RULE_PREDICATES_FUNCTIONS_VALUE});\r\n  type===PRED?setPredicateValue(elementNameWithArity):setFunctionValue(elementNameWithArity);\r\n}\r\n\r\nfunction removeUnaryPredicate(predicateName,removeNodeName){\r\n  let predName = predicateName+\"/1\";\r\n  let newPredInterpretationValue = \"\";\r\n\r\n  for(let nodeNameArray of structure.iPredicate.get(predName)){\r\n    for(let currNodeName of nodeNameArray){\r\n      if(currNodeName!==removeNodeName){\r\n        newPredInterpretationValue+=currNodeName+\", \";\r\n      }\r\n    }\r\n  }\r\n  return newPredInterpretationValue.substring(0,newPredInterpretationValue.length-2);\r\n}\r\n\r\nfunction removeBinaryPredicate(predicateName,sourceNode,targetNode){\r\n  let predName = predicateName+\"/2\";\r\n  let newPredInterpretationValue = \"\";\r\n\r\n  for(let currentNodeNameTuple of structure.iPredicate.get(predName)){\r\n    if(!(currentNodeNameTuple[0] === sourceNode && currentNodeNameTuple[1] === targetNode)){\r\n      newPredInterpretationValue+=\"(\"+currentNodeNameTuple[0]+\", \"+currentNodeNameTuple[1]+\"), \";\r\n    }\r\n  }\r\n  return newPredInterpretationValue.substring(0,newPredInterpretationValue.length-2);\r\n}\r\n\r\nfunction setDomain() {\r\n  if (!state.domain.parsed) {\r\n    return;\r\n  }\r\n  state.domain.errorMessage = state.domain.parsed.length > 0 ? '' : EMPTY_DOMAIN;\r\n  structure.setDomain(state.domain.parsed);\r\n}\r\n\r\nfunction setConstantsValues() {\r\n  Object.keys(state.constants).forEach(c => {\r\n    setConstantValue(c, state.constants[c].value);\r\n  })\r\n}\r\n\r\nfunction setPredicatesValues() {\r\n  Object.keys(state.predicates).forEach(predicate => {\r\n    setPredicateValue(predicate);\r\n  })\r\n}\r\n\r\nfunction setFunctionsValues() {\r\n  Object.keys(state.functions).forEach(f => {\r\n    setFunctionValue(f);\r\n  })\r\n}\r\n\r\nfunction syncLanguageWithStructure() {\r\n  deleteUnusedInputs();\r\n  insertNewInputs();\r\n}\r\n\r\nfunction deleteUnusedInputs() {\r\n  Object.keys(state.constants).forEach(e => {\r\n    if (!structure.language.hasConstant(e)) {\r\n      delete state.constants[e];\r\n    }\r\n  });\r\n\r\n  Object.keys(state.predicates).forEach(e => {\r\n    if (!structure.language.hasPredicate(e)) {\r\n      delete state.predicates[e];\r\n    }\r\n  });\r\n  Object.keys(state.functions).forEach(e => {\r\n    if (!structure.language.hasFunction(e)) {\r\n      delete state.functions[e];\r\n    }\r\n  });\r\n}\r\n\r\nfunction insertNewInputs() {\r\n  structure.language.getConstants().forEach(e => {\r\n    if (!state.constants[e]) {\r\n      state.constants[e] = constantDefaultInput();\r\n    }\r\n  });\r\n  structure.language.predicates.forEach((arity, predicate) => {\r\n    if (!state.predicates[predicate + '/' + arity]) {\r\n      state.predicates[predicate + '/' + arity] = predicateDefaultInput()\r\n    }\r\n  });\r\n  structure.language.functions.forEach((arity, func) => {\r\n    if (!state.functions[func + '/' + arity]) {\r\n      state.functions[func + '/' + arity] = functionDefaultInput();\r\n    }\r\n  });\r\n}\r\n\r\nfunction setVariables() {\r\n  if (!state.variables.parsed) {\r\n    return;\r\n  }\r\n  if (!state.variables.object || !state.variables.object instanceof Map) {\r\n    state.variables.object = new Map();\r\n  } else {\r\n    state.variables.object.clear();\r\n  }\r\n  let errorMessage = '';\r\n  state.variables.parsed.forEach(tuple => {\r\n    let variable = tuple[0];\r\n    let value = tuple[1];\r\n    if (structure.language.hasItem(variable)) {\r\n      errorMessage = ITEM_IN_LANGUAGE(variable);\r\n    }\r\n    else if (!structure.hasDomainItem(value)) {\r\n      errorMessage = ITEM_NOT_IN_DOMAIN(value);\r\n    }\r\n    else {\r\n      state.variables.object.set(variable, value);\r\n    }\r\n  });\r\n  state.variables.errorMessage = errorMessage;\r\n}\r\n\r\nfunction setConstantValue(constantName, value) {\r\n  try {\r\n    structure.setConstantValue(constantName, value);\r\n    state.constants[constantName].value = value;\r\n    state.constants[constantName].errorMessage = '';\r\n  } catch (e) {\r\n    console.error(e);\r\n    state.constants[constantName].errorMessage = e;\r\n    state.constants[constantName].value = '';\r\n  }\r\n}\r\n\r\nfunction setPredicateValue(predicateName) {\r\n  if (!state.predicates[predicateName] || !state.predicates[predicateName].parsed) {\r\n    return;\r\n  }\r\n  structure.clearPredicateValue(predicateName);\r\n  state.predicates[predicateName].errorMessage = '';\r\n  state.predicates[predicateName].parsed.forEach(tuple => {\r\n    addPredicateValue(predicateName, tuple);\r\n  });\r\n}\r\n\r\nfunction addPredicateValue(predicateName, tuple) {\r\n  try {\r\n    structure.setPredicateValue(predicateName, tuple);\r\n  } catch (e) {\r\n    state.predicates[predicateName].errorMessage = e;\r\n  }\r\n}\r\n\r\nfunction removePredicateValue(predicateName, tuple) {\r\n  structure.removePredicateValue(predicateName, tuple);\r\n}\r\n\r\nfunction setFunctionValue(functionName) {\r\n  if (!state.functions[functionName] || !state.functions[functionName].parsed) {\r\n    return;\r\n  }\r\n  structure.clearFunctionValue(functionName);\r\n  state.functions[functionName].errorMessage = '';\r\n  let usedParams = [];\r\n  state.functions[functionName].parsed.forEach(tuple => {\r\n    try {\r\n      let params = tuple.slice(0, tuple.length - 1);\r\n      let stringifiedParams = JSON.stringify(params);\r\n      let value = tuple[tuple.length - 1];\r\n      if (usedParams.indexOf(stringifiedParams) > -1) {\r\n        structure.removeFunctionValue(functionName, params);\r\n        throw FUNCTION_ALREADY_DEFINED(params);\r\n      } else {\r\n        usedParams.push(stringifiedParams);\r\n        structure.setFunctionValue(functionName, params, value);\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      state.functions[functionName].errorMessage = e;\r\n    }\r\n  });\r\n  let validValue = checkFunctionValue(functionName);\r\n  if (!validValue) {\r\n    if (state.functions[functionName].errorMessage.length === 0) {\r\n      state.functions[functionName].errorMessage = FUNCTION_NOT_FULL_DEFINED;\r\n    }\r\n  } else {\r\n    if (state.functions[functionName].errorMessage === FUNCTION_NOT_FULL_DEFINED) {\r\n      state.functions[functionName].errorMessage = '';\r\n    }\r\n  }\r\n}\r\n\r\nfunction checkFunctionValue(functionName) {\r\n  let arity = parseInt(functionName.split('/')[1]);\r\n  if (structure.domain.size > 0) {\r\n    if (!structure.iFunction.has(functionName) ||\r\n       Object.keys(structure.iFunction.get(functionName)).length != structure.domainCombinations.get(arity).length) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nconst copyState = (state) => ({\r\n  ...state,\r\n  constants: {...state.constants},\r\n  predicates: {...state.predicates},\r\n  functions: {...state.functions},\r\n  variables: {...state.variables},\r\n  domain: {...state.domain},\r\n\r\n});\r\n\r\nfunction tupleToString(tuple) {\r\n  if (tuple.length === 0)\r\n    return '';\r\n  if (tuple.length === 1)\r\n    return tuple[0];\r\n  let res = '(';\r\n  for (let i = 0; i < tuple.length; i++) {\r\n    res += tuple[i];\r\n    if (i < tuple.length - 1)\r\n      res += ', ';\r\n  }\r\n  res += ')';\r\n  return res;\r\n}\r\n\r\nfunction predicateValueToString(value) {\r\n  if (value === undefined || value.length === 0)\r\n    return '';\r\n  let res = '';\r\n  for (let i = 0; i < value.length; i++) {\r\n    res += tupleToString(value[i]);\r\n    if (i < value.length - 1)\r\n      res += ', ';\r\n  }\r\n  return res;\r\n}\r\n\r\nexport default structureReducer;","/**\r\n * Represent expression in logic\r\n * @author Milan Cifra\r\n * @class\r\n * @abstract\r\n */\r\nclass Expression {\r\n\r\n  /*constructor() {\r\n\r\n  }*/\r\n\r\n  toString() {\r\n\r\n  }\r\n\r\n  eval(structure, e) {\r\n    return null;\r\n  }\r\n\r\n}\r\n\r\nexport default Expression;","import Expression from \"../Expression\";\r\n\r\n/**\r\n * Represent simple formula\r\n * @author Milan Cifra\r\n * @class\r\n * @abstract\r\n * @extends Expression\r\n */\r\nclass Formula extends Expression {\r\n\r\n  /*constructor() {\r\n    super();\r\n  }*/\r\n\r\n  toString() {\r\n    return '';\r\n  }\r\n\r\n}\r\n\r\nexport default Formula;","import Formula from \"./Formula\";\r\n\r\n/**\r\n * Represent equality symbol\r\n * @author Milan Cifra\r\n * @class\r\n * @extends Formula\r\n */\r\nclass EqualityAtom extends Formula {\r\n\r\n  /**\r\n   *\r\n   * @param {Term} subLeft\r\n   * @param {Term} subRight\r\n   */\r\n  constructor(subLeft, subRight) {\r\n    super();\r\n    this.subLeft = subLeft;\r\n    this.subRight = subRight;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Structure} structure\r\n   * @param {Map} e\r\n   * @return {boolean}\r\n   */\r\n  eval(structure, e) {\r\n    return this.subLeft.eval(structure, e) == this.subRight.eval(structure, e);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    return `(${this.subLeft.toString()}) = (${this.subRight.toString()})`;\r\n  }\r\n\r\n}\r\n\r\nexport default EqualityAtom;","import Formula from \"./Formula\";\r\n\r\n/**\r\n * Represent disjunction\r\n * @author Milan Cifra\r\n * @class\r\n * @extends Formula\r\n */\r\nclass Disjunction extends Formula {\r\n\r\n  /**\r\n   *\r\n   * @param {Formula} subLeft\r\n   * @param {Formula} subRight\r\n   */\r\n  constructor(subLeft, subRight) {\r\n    super();\r\n    this.subLeft = subLeft;\r\n    this.subRight = subRight;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Structure} structure\r\n   * @param {Map} e\r\n   * @return {boolean}\r\n   */\r\n  eval(structure, e) {\r\n    return this.subLeft.eval(structure, e) || this.subRight.eval(structure, e);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    return `(${this.subLeft.toString()}) ∨ (${this.subRight.toString()})`;\r\n  }\r\n\r\n}\r\n\r\nexport default Disjunction;","import Formula from \"./Formula\";\r\n\r\n/**\r\n * Represent predicate symbol\r\n * @author Milan Cifra\r\n * @class\r\n * @extends Formula\r\n */\r\nclass PredicateAtom extends Formula {\r\n\r\n  /**\r\n   *\r\n   * @param {string} name\r\n   * @param {Term[]} terms\r\n   */\r\n  constructor(name, terms = []) {\r\n    super();\r\n    this.name = name;\r\n    this.terms = terms;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Structure} structure\r\n   * @param {Map} e\r\n   * @return {boolean}\r\n   */\r\n  eval(structure, e) {\r\n    let translatedTerms = [];\r\n    this.terms.forEach(term => {\r\n      translatedTerms.push(term.eval(structure, e));\r\n    });\r\n    let arity = structure.language.getPredicate(this.name);\r\n    if (!structure.getPredicateValue(this.name + '/' + arity)) {\r\n      return false;\r\n    }\r\n    let value = structure.getPredicateValue(this.name + '/' + arity);\r\n    return value.findIndex(e => JSON.stringify(e) === JSON.stringify(translatedTerms)) > -1;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let res = this.name + '(';\r\n    for (let i = 0; i < this.terms.length; i++) {\r\n      if (i > 0) {\r\n        res += ', ';\r\n      }\r\n      res += this.terms[i].toString();\r\n    }\r\n    res += ')';\r\n    return res;\r\n  }\r\n\r\n}\r\n\r\nexport default PredicateAtom;","import Formula from \"./Formula\";\r\n\r\n/**\r\n * Represent negation\r\n * @author Milan Cifra\r\n * @class\r\n * @extends Formula\r\n */\r\nclass Negation extends Formula {\r\n\r\n  /**\r\n   *\r\n   * @param {Formula} subFormula\r\n   */\r\n  constructor(subFormula) {\r\n    super();\r\n    this.subFormula = subFormula;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Structure} structure\r\n   * @param {Map} e\r\n   * @return {boolean}\r\n   */\r\n  eval(structure, e) {\r\n    return !this.subFormula.eval(structure, e);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    return `¬(${this.subFormula.toString()})`;\r\n  }\r\n\r\n}\r\n\r\nexport default Negation;","import Expression from \"../Expression\";\r\n\r\n/**\r\n * Represent simple term.\r\n * @author Milan Cifra\r\n * @class\r\n * @abstract\r\n *\r\n */\r\nclass Term extends Expression {\r\n\r\n  /*constructor() {\r\n    super();\r\n  }*/\r\n\r\n  toString() {\r\n    return '';\r\n  }\r\n\r\n}\r\n\r\nexport default Term;","import Term from \"./Term\";\r\n\r\n/**\r\n * Constant\r\n * @author Milan Cifra\r\n * @class\r\n * @extends Term\r\n */\r\nclass Constant extends Term {\r\n\r\n  /**\r\n   *\r\n   * @param {string} name Name of the constant\r\n   */\r\n  constructor(name) {\r\n    super();\r\n    this.name = name;\r\n  }\r\n\r\n  /**\r\n   * Return intepretation of the constant\r\n   * @param {Structure} structure Structure\r\n   * @param {Map} e variables valuation\r\n   * @return {string} domain item\r\n   */\r\n  eval(structure, e) {\r\n    if (!structure.getConstantValue(this.name)) {\r\n      throw `Hodnota konštanty ${this.name} nie je definovaná`;\r\n    }\r\n    return structure.getConstantValue(this.name);\r\n  }\r\n\r\n  /**\r\n   * Return string representation of constant\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    return this.name;\r\n  }\r\n\r\n}\r\n\r\nexport default Constant;","import Formula from \"./Formula\";\r\n\r\n/**\r\n * Represent implication\r\n * @author Milan Cifra\r\n * @class\r\n * @extends Formula\r\n */\r\nclass Implication extends Formula {\r\n\r\n  /**\r\n   *\r\n   * @param {Formula} subLeft\r\n   * @param {Formula} subRight\r\n   */\r\n  constructor(subLeft, subRight) {\r\n    super();\r\n    this.subLeft = subLeft;\r\n    this.subRight = subRight;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Structure} structure\r\n   * @param {Map} e\r\n   * @return {boolean}\r\n   */\r\n  eval(structure, e) {\r\n    return (!this.subLeft.eval(structure, e)) || this.subRight.eval(structure, e);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    return `(${this.subLeft.toString()}) → (${this.subRight.toString()})`;\r\n  }\r\n\r\n}\r\n\r\nexport default Implication;","import Formula from \"./Formula\";\r\n\r\n/**\r\n * Represent conjunction\r\n * @author Milan Cifra\r\n * @class\r\n * @extends Formula\r\n */\r\nclass Conjunction extends Formula {\r\n\r\n  /**\r\n   *\r\n   * @param {Formula} subLeft\r\n   * @param {Formula} subRight\r\n   */\r\n  constructor(subLeft, subRight) {\r\n    super();\r\n    this.subLeft = subLeft;\r\n    this.subRight = subRight;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Structure} structure\r\n   * @param {Map} e variables valuation\r\n   * @return {boolean}\r\n   */\r\n  eval(structure, e) {\r\n    return this.subLeft.eval(structure, e) && this.subRight.eval(structure, e);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    return `(${this.subLeft.toString()}) ∧ (${this.subRight.toString()})`;\r\n  }\r\n\r\n}\r\n\r\nexport default Conjunction;","import Term from \"./Term\";\r\n\r\n/**\r\n * Variable\r\n * @author Milan Cifra\r\n * @class\r\n * @extends Term\r\n */\r\nclass Variable extends Term {\r\n\r\n  /**\r\n   *\r\n   * @param {string} name\r\n   */\r\n  constructor(name) {\r\n    super();\r\n    this.name = name;\r\n  }\r\n\r\n  /**\r\n   * Return intepretation of variable.\r\n   * @param {Structure} structure\r\n   * @param {Map} e variables valuation\r\n   * @return {string} domain item\r\n   */\r\n  eval(structure, e) {\r\n    if (!e.has(this.name)) {\r\n      throw `Hodnota premennej ${this.name} nie je definovaná`;\r\n    }\r\n    return e.get(this.name);\r\n  }\r\n\r\n  /**\r\n   * Return string representation of variable\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    return this.name;\r\n  }\r\n\r\n}\r\n\r\nexport default Variable;","import Term from \"./Term\";\r\n\r\n/**\r\n * Represent function term\r\n * @author Milan Cifra\r\n * @class\r\n * @extends Term\r\n */\r\nclass FunctionTerm extends Term {\r\n\r\n  /**\r\n   *\r\n   * @param {string} name name of the function\r\n   * @param {Term[]} terms parameters of function\r\n   */\r\n  constructor(name, terms) {\r\n    super();\r\n    this.name = name;\r\n    this.terms = terms;\r\n  }\r\n\r\n  /**\r\n   * Return intepretation of function.\r\n   * @param {Structure} structure\r\n   * @param {Map} e variables valuation\r\n   * @returns {string} domain item\r\n   */\r\n  eval(structure, e) {\r\n    let interpretedParams = [];\r\n    this.terms.forEach(term => {\r\n      interpretedParams.push(term.eval(structure, e));\r\n    });\r\n    if (!structure.getFunctionValue(this.name + '/' + structure.language.getFunction(this.name), interpretedParams)) {\r\n      throw `Hodnota funkčného symbolu ${this.name}(${interpretedParams}) nie je definovaná`;\r\n    }\r\n    return structure.getFunctionValue(this.name + '/' + structure.language.getFunction(this.name), interpretedParams);\r\n  }\r\n\r\n  /**\r\n   * Return string representation of function term\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let res = this.name + '(';\r\n    for (let i = 0; i < this.terms.length; i++) {\r\n      if (i > 0) {\r\n        res += ', ';\r\n      }\r\n      res += this.terms[i].toString();\r\n    }\r\n    res += ')';\r\n    return res;\r\n  }\r\n\r\n}\r\n\r\nexport default FunctionTerm;","import Formula from \"./Formula\";\r\n\r\n/**\r\n * Represent universal quantificator\r\n * @author Milan Cifra\r\n * @class\r\n * @extends Formula\r\n */\r\nclass UniversalQuant extends Formula {\r\n\r\n  /**\r\n   *\r\n   * @param {string} variableName\r\n   * @param {Formula} subFormula\r\n   */\r\n  constructor(variableName, subFormula) {\r\n    super();\r\n    this.variableName = variableName;\r\n    this.subFormula = subFormula;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Structure} structure\r\n   * @param {Map} e\r\n   * @return {boolean}\r\n   */\r\n  eval(structure, e) {\r\n    let eCopy = new Map(e);\r\n    for (let item of structure.domain) {\r\n      eCopy.set(this.variableName, item);\r\n      if (!this.subFormula.eval(structure, eCopy)) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    return `∀${this.variableName} (${this.subFormula.toString()})`;\r\n  }\r\n\r\n}\r\n\r\nexport default UniversalQuant;","import Formula from \"./Formula\";\r\n\r\n/**\r\n * Represent existential quantificator\r\n * @author Milan Cifra\r\n * @class\r\n * @extends Formula\r\n */\r\nclass ExistentialQuant extends Formula {\r\n\r\n  /**\r\n   *\r\n   * @param {string} variableName\r\n   * @param {Formula} subFormula\r\n   */\r\n  constructor(variableName, subFormula) {\r\n    super();\r\n    this.variableName = variableName;\r\n    this.subFormula = subFormula;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Structure} structure\r\n   * @param {Map} e\r\n   * @return {boolean}\r\n   */\r\n  eval(structure, e) {\r\n    let eCopy = new Map(e);\r\n    for (let item of structure.domain) {\r\n      eCopy.set(this.variableName, item);\r\n      if (this.subFormula.eval(structure, eCopy)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    return `∃${this.variableName} (${this.subFormula.toString()})`;\r\n  }\r\n\r\n}\r\n\r\nexport default ExistentialQuant;","import {defaultExpressionData, FORMULA, TERM} from \"../../constants\";\r\nimport EqualityAtom from \"../../model/formula/Formula.EqualityAtom\";\r\nimport Disjunction from \"../../model/formula/Formula.Disjunction\";\r\nimport PredicateAtom from \"../../model/formula/Formula.PredicateAtom\";\r\nimport Negation from \"../../model/formula/Formula.Negation\";\r\nimport Constant from \"../../model/term/Term.Constant\";\r\nimport Implication from \"../../model/formula/Formula.Implication\";\r\nimport Conjunction from \"../../model/formula/Formula.Conjunction\";\r\nimport Variable from \"../../model/term/Term.Variable\";\r\nimport FunctionTerm from \"../../model/term/Term.FunctionTerm\";\r\nimport UniversalQuant from \"../../model/formula/Formula.UniversalQuant\";\r\nimport ExistentialQuant from \"../../model/formula/Formula.ExistentialQuant\";\r\nimport {\r\n  ADD_EXPRESSION,\r\n  RENAME_DOMAIN_NODE,\r\n  CHECK_SYNTAX,\r\n  IMPORT_APP,\r\n  LOCK_EXPRESSION_ANSWER,\r\n  LOCK_EXPRESSION_VALUE,\r\n  REMOVE_EXPRESSION,\r\n  SET_CONSTANT_VALUE,\r\n  SET_CONSTANTS,\r\n  SET_EXPRESSION_ANSWER,\r\n  SET_FUNCTION_VALUE_TABLE,\r\n  SET_FUNCTION_VALUE_TEXT,\r\n  SET_FUNCTIONS,\r\n  SET_PREDICATE_VALUE_TABLE,\r\n  SET_PREDICATE_VALUE_TEXT,\r\n  SET_PREDICATES,\r\n  SET_VARIABLES_VALUE,\r\n  ADD_DOMAIN_NODE,\r\n  SET_CONSTANT_VALUE_FROM_LINK,\r\n  REMOVE_CONSTANT_NODE,\r\n  ADD_UNARY_PREDICATE,\r\n  REMOVE_UNARY_PREDICATE,\r\n  ADD_BINARY_PREDICATE,\r\n  REMOVE_BINARY_PREDICATE,\r\n  ADD_CONSTANT_NODE,\r\n  RENAME_CONSTANT_NODE,\r\n  REMOVE_DOMAIN_NODE,\r\n  ADD_TERNARY_PREDICATE,\r\n  REMOVE_TERNARY_PREDICATE,\r\n  ADD_QUATERNARY_PREDICATE,\r\n  REMOVE_QUATERNARY_PREDICATE,\r\n  ADD_BINARY_FUNCTION,\r\n  REMOVE_BINARY_FUNCTION,\r\n  ADD_TERNARY_FUNCTION,\r\n  REMOVE_TERNARY_FUNCTION,\r\n  ADD_UNARY_FUNCTION,\r\n  REMOVE_UNARY_FUNCTION,\r\n  REMOVE_QUATERNARY_NODE,\r\n  REMOVE_TERNARY_NODE,\r\n  IMPORT_DIAGRAM_STATE, CHANGE_DIRECTION_OF_BINARY_RELATION\r\n} from \"../actions/action_types\";\r\nimport {RULE_FORMULA, RULE_TERM} from \"../../constants/parser_start_rules\";\r\n\r\nlet functions = require('./functions/functions');\r\n\r\nlet s = {};\r\nlet structure = null;\r\nlet e = new Map();\r\n\r\nexport function defaultState(){\r\n  return {\r\n    formulas: [],\r\n    terms: []\r\n  }\r\n}\r\n\r\nfunction expressionsReducer(state = s, action, structure2, variables) {\r\n  s = state;\r\n  structure = structure2;\r\n  e = variables;\r\n  switch (action.type) {\r\n    case SET_CONSTANTS:\r\n    case SET_PREDICATES:\r\n    case SET_FUNCTIONS:\r\n    case IMPORT_APP:\r\n      console.log(\"PARSED sync\");\r\n      syncExpressionsValue(true);\r\n      return state;\r\n    case SET_CONSTANT_VALUE:\r\n    case SET_PREDICATE_VALUE_TEXT:\r\n    case SET_PREDICATE_VALUE_TABLE:\r\n    case SET_FUNCTION_VALUE_TEXT:\r\n    case SET_FUNCTION_VALUE_TABLE:\r\n    case SET_VARIABLES_VALUE:\r\n      console.log(\"SYNCED\");\r\n      syncExpressionsValue();\r\n      return state;\r\n    case ADD_EXPRESSION:\r\n      console.log(\"ADDED\");\r\n      addExpression(action.expressionType);\r\n      return s;\r\n    case REMOVE_EXPRESSION:\r\n      console.log(\"REMOVED\");\r\n      removeExpression(action.expressionType, action.index);\r\n      return s;\r\n    case SET_EXPRESSION_ANSWER:\r\n      console.log(\"ANSWERED\");\r\n      setExpressionAnswer(action.expressionType, action.index, action.answer);\r\n      return s;\r\n    case LOCK_EXPRESSION_VALUE:\r\n      console.log(\"LOCKED VALUE\");\r\n      lockExpressionValue(action.expressionType, action.expressionIndex);\r\n      return s;\r\n    case LOCK_EXPRESSION_ANSWER:\r\n      console.log(\"LOCKED ANSWER\");\r\n      lockExpressionAnswer(action.expressionType, action.expressionIndex);\r\n      return s;\r\n    case CHECK_SYNTAX:\r\n      console.log(\"CHECKED\");\r\n      checkExpressionSyntax(action);\r\n      return s;\r\n    case ADD_DOMAIN_NODE:\r\n    case RENAME_DOMAIN_NODE:\r\n    case REMOVE_DOMAIN_NODE:\r\n    case ADD_CONSTANT_NODE:\r\n    case RENAME_CONSTANT_NODE:\r\n    case REMOVE_CONSTANT_NODE:\r\n    case ADD_UNARY_PREDICATE:\r\n    case REMOVE_UNARY_PREDICATE:\r\n    case ADD_UNARY_FUNCTION:\r\n    case REMOVE_UNARY_FUNCTION:\r\n    case ADD_BINARY_PREDICATE:\r\n    case REMOVE_BINARY_PREDICATE:\r\n    case ADD_TERNARY_PREDICATE:\r\n    case REMOVE_TERNARY_PREDICATE:\r\n    case ADD_QUATERNARY_PREDICATE:\r\n    case REMOVE_QUATERNARY_PREDICATE:\r\n    case ADD_BINARY_FUNCTION:\r\n    case REMOVE_BINARY_FUNCTION:\r\n    case ADD_TERNARY_FUNCTION:\r\n    case REMOVE_TERNARY_FUNCTION:\r\n    case REMOVE_TERNARY_NODE:\r\n    case REMOVE_QUATERNARY_NODE:\r\n    case SET_CONSTANT_VALUE_FROM_LINK:\r\n    case IMPORT_DIAGRAM_STATE:\r\n    case CHANGE_DIRECTION_OF_BINARY_RELATION:\r\n      console.log(\"SYNCING\");\r\n      syncExpressionsValue(true);\r\n      return s;\r\n    default:\r\n      console.log(\"DEFAULT\");\r\n      return s;\r\n  }\r\n}\r\n\r\nfunction addExpression(expressionType) {\r\n  if (expressionType === FORMULA) {\r\n    s.formulas.push(defaultExpressionData());\r\n  } else if (expressionType === TERM) {\r\n    s.terms.push(defaultExpressionData());\r\n  }\r\n}\r\n\r\nfunction removeExpression(expressionType, expressionIndex) {\r\n  if (expressionType === FORMULA && expressionIndex < s.formulas.length) {\r\n    s.formulas.splice(expressionIndex, 1);\r\n  } else if (expressionType === TERM && expressionIndex < s.terms.length) {\r\n    s.terms.splice(expressionIndex, 1);\r\n  }\r\n}\r\n\r\nfunction syncExpressionsValue(parse = false) {\r\n  s.formulas.forEach(formula => {\r\n    if (parse) {\r\n      let temp = formula.value;\r\n      functions.parseText(`(${temp})`, formula, setParserOptions(RULE_FORMULA));\r\n      // noinspection JSUndefinedPropertyAssignment\r\n      formula.value = temp;\r\n    }\r\n    evalExpression(formula);\r\n  });\r\n  s.terms.forEach(term => {\r\n    if (parse) {\r\n      functions.parseText(term.value, term, setParserOptions(RULE_TERM));\r\n    }\r\n    evalExpression(term);\r\n  });\r\n}\r\n\r\nfunction evalExpression(expression) {\r\n  if (!expression.parsed || expression.parsed.length === 0) {\r\n    return;\r\n  }\r\n  expression.errorMessage = '';\r\n  try {\r\n    expression.expressionValue = expression.parsed.eval(structure, e);\r\n  } catch (e) {\r\n    expression.errorMessage = e;\r\n    expression.expressionValue = null;\r\n  }\r\n}\r\n\r\nfunction checkExpressionSyntax(action) {\r\n  let expressionText = action.value;\r\n  let expression = s.terms[action.index];\r\n  if (action.expressionType === FORMULA) {\r\n    if (expressionText.length > 0) {\r\n      expressionText = '(' + expressionText + ')';\r\n    }\r\n    expression = s.formulas[action.index];\r\n  }\r\n  functions.parseText(expressionText, expression, setParserOptions(action.expressionType.toLowerCase()));\r\n  expression.value = action.value; // aby tam neboli zatvorky\r\n  if (expression.errorMessage.length === 0) {\r\n    expression.validSyntax = true;\r\n    evalExpression(expression);\r\n  } else {\r\n    expression.validSyntax = false;\r\n  }\r\n}\r\n\r\nfunction setExpressionAnswer(expressionType, expressionIndex, answer) {\r\n  if (expressionType === FORMULA && expressionIndex < s.formulas.length) {\r\n    let ans = (answer === 'true');\r\n    if (answer === '-1')\r\n      ans = '-1';\r\n    s.formulas[expressionIndex].answerValue = ans;\r\n  } else if (expressionType === TERM && expressionIndex < s.terms.length) {\r\n    s.terms[expressionIndex].answerValue = answer;\r\n  }\r\n}\r\n\r\nfunction lockExpressionAnswer(expressionType, expressionIndex) {\r\n  if (expressionType === FORMULA && expressionIndex < s.formulas.length) {\r\n    s.formulas[expressionIndex].answerLocked = !s.formulas[expressionIndex].answerLocked;\r\n  } else if (expressionType === TERM && expressionIndex < s.terms.length) {\r\n    s.terms[expressionIndex].answerLocked = !s.terms[expressionIndex].answerLocked;\r\n  }\r\n}\r\n\r\nfunction lockExpressionValue(expressionType, expressionIndex) {\r\n  if (expressionType === FORMULA && expressionIndex < s.formulas.length) {\r\n    s.formulas[expressionIndex].inputLocked = !s.formulas[expressionIndex].inputLocked;\r\n  } else if (expressionType === TERM && expressionIndex < s.terms.length) {\r\n    s.terms[expressionIndex].inputLocked = !s.terms[expressionIndex].inputLocked;\r\n  }\r\n}\r\n\r\nconst setParserOptions = (startRule) => ({\r\n  startRule: startRule,\r\n  structure: structure,\r\n  conjunction: Conjunction,\r\n  disjunction: Disjunction,\r\n  implication: Implication,\r\n  variable: Variable,\r\n  constant: Constant,\r\n  existentialQuant: ExistentialQuant,\r\n  universalQuant: UniversalQuant,\r\n  functionTerm: FunctionTerm,\r\n  predicate: PredicateAtom,\r\n  negation: Negation,\r\n  equalityAtom: EqualityAtom\r\n});\r\n\r\nexport default expressionsReducer;","import {TOGGLE_TEACHER_MODE} from \"../actions/action_types\";\r\n\r\nfunction teacherModeReducer(state:any, action:any) {\r\n    if (action.type === TOGGLE_TEACHER_MODE) {\r\n        state.teacherMode = !state.teacherMode;\r\n        return state;\r\n    } else {\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default teacherModeReducer;","import { UnBinaryNodeWidget } from './UnBinaryNodeWidget';\r\nimport { UnBinaryNodeModel } from './UnBinaryNodeModel';\r\nimport * as React from 'react';\r\nimport { AbstractReactFactory } from '@projectstorm/react-canvas-core';\r\nimport { DiagramEngine } from '@projectstorm/react-diagrams-core';\r\n\r\nexport class UnBinaryNodeFactory extends AbstractReactFactory<UnBinaryNodeModel, DiagramEngine> {\r\n\tconstructor() {\r\n\t\tsuper('unbinary');\r\n\t}\r\n\r\n\tgenerateReactWidget(event:any): JSX.Element {\r\n\t\tlet reduxProps = event.model.getReduxProps();\r\n\t\treturn <UnBinaryNodeWidget removeDomainNode={reduxProps[\"removeDomainNode\"]} renameDomainNode={reduxProps[\"renameDomainNode\"]} engine={this.engine} size={50} model={event.model}/>;\r\n\t}\r\n\r\n\tgenerateModel(event:any) {\r\n\t\treturn new UnBinaryNodeModel();\r\n\t}\r\n}\r\n","import { ConstantNodeWidget } from './ConstantNodeWidget';\r\nimport { ConstantNodeModel } from './ConstantNodeModel';\r\nimport * as React from 'react';\r\nimport { AbstractReactFactory } from '@projectstorm/react-canvas-core';\r\nimport { DiagramEngine } from '@projectstorm/react-diagrams-core';\r\n\r\nexport class ConstantNodeFactory extends AbstractReactFactory<ConstantNodeModel, DiagramEngine> {\r\n\tconstructor() {\r\n\t\tsuper('constant');\r\n\t}\r\n\r\n\tgenerateReactWidget(event:any): JSX.Element {\r\n\t\tlet reduxProps = event.model.options.reduxProps;\r\n\t\treturn <ConstantNodeWidget removeConstantNode={reduxProps[\"removeConstantNode\"]} renameConstantNode={reduxProps[\"renameConstantNode\"]} engine={this.engine} size={50} model={event.model}/>;\r\n\t}\r\n\r\n\tgenerateModel(event:any) {\r\n\t\treturn new ConstantNodeModel();\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { BinaryLabelModel } from './BinaryLabelModel';\r\nimport { BinaryLabelWidget } from './BinaryLabelWidget';\r\nimport { AbstractReactFactory } from '@projectstorm/react-canvas-core';\r\nimport { DiagramEngine } from '@projectstorm/react-diagrams-core';\r\n\r\nexport class BinaryLabelFactory extends AbstractReactFactory< BinaryLabelModel, DiagramEngine> {\r\n\tconstructor() {\r\n\t\tsuper('binary');\r\n\t}\r\n\r\n\tgenerateReactWidget(event:any): JSX.Element {\r\n\t\treturn <BinaryLabelWidget model={event.model} engine={this.engine}/>;\r\n\t}\r\n\r\n\tgenerateModel(event:any): BinaryLabelModel {\r\n\t\treturn new BinaryLabelModel();\r\n\t}\r\n}\r\n","import { DiagramEngine, PortModel} from '@projectstorm/react-diagrams';\r\nimport { AbstractModelFactory } from '@projectstorm/react-canvas-core';\r\n\r\nexport class SimplePortFactory extends AbstractModelFactory<PortModel, DiagramEngine> {\r\n\tcb: (initialConfig?: any) => PortModel;\r\n\r\n\tconstructor(type: string, cb: (initialConfig?: any) => PortModel) {\r\n\t\tsuper(type);\r\n\t\tthis.cb = cb;\r\n\t}\r\n\r\n\tgenerateModel(event:any): PortModel {\r\n\t\treturn this.cb(event.initialConfig);\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { PointModel } from '@projectstorm/react-diagrams-core';\r\nimport styled from '@emotion/styled';\r\n\r\nexport interface BinaryLinkPointWidgetProps {\r\n\tpoint: PointModel;\r\n\tcolor?: string;\r\n\tcolorSelected: string;\r\n}\r\n\r\nexport interface BinaryLinkPointWidgetState {\r\n\tselected: boolean;\r\n}\r\n\r\n\texport const PointTop = styled.circle`\r\n\t\tpointer-events: all;\r\n\t`;\r\n\r\nexport class BinaryLinkPointWidget extends React.Component<BinaryLinkPointWidgetProps, BinaryLinkPointWidgetState> {\r\n\tconstructor(props:any) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tselected: false\r\n\t\t};\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { point } = this.props;\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t<circle\r\n\t\t\t\t\tcx={point.getPosition().x}\r\n\t\t\t\t\tcy={point.getPosition().y}\r\n\t\t\t\t\tr={5}\r\n\t\t\t\t\tfill={this.state.selected || this.props.point.isSelected() ? this.props.colorSelected : this.props.color}\r\n\t\t\t\t/>\r\n\t\t\t\t<PointTop\r\n\t\t\t\t\tclassName=\"point\"\r\n\t\t\t\t\tonMouseLeave={() => {\r\n\t\t\t\t\t\tthis.setState({ selected: false });\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonMouseEnter={() => {\r\n\t\t\t\t\t\tthis.setState({ selected: true });\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdata-id={point.getID()}\r\n\t\t\t\t\tdata-linkid={point.getLink().getID()}\r\n\t\t\t\t\tcx={point.getPosition().x}\r\n\t\t\t\t\tcy={point.getPosition().y}\r\n\t\t\t\t\tr={15}\r\n\t\t\t\t\topacity={0.0}\r\n\t\t\t\t/>\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { BinaryLinkFactory } from './BinaryLinkFactory';\r\nimport { DiagramEngine } from '@projectstorm/react-diagrams-core';\r\nimport { BinaryLinkModel } from './BinaryLinkModel';\r\n\r\nexport interface BinaryLinkSegmentWidgetProps {\r\n\tpath: string;\r\n\tlink: BinaryLinkModel;\r\n\tselected: boolean;\r\n\tforwardRef: React.RefObject<SVGPathElement>;\r\n\tfactory: BinaryLinkFactory;\r\n\tdiagramEngine: DiagramEngine;\r\n\tonSelection: (selected: boolean) => any;\r\n\textras: object;\r\n}\r\n\r\nexport class BinaryLinkSegmentWidget extends React.Component<BinaryLinkSegmentWidgetProps> {\r\n\trender() {\r\n\t\tconst Bottom = React.cloneElement(\r\n\t\t\tthis.props.factory.generateLinkSegment(\r\n\t\t\t\tthis.props.link,\r\n\t\t\t\tthis.props.selected || this.props.link.isSelected(),\r\n\t\t\t\tthis.props.path\r\n\t\t\t),\r\n\t\t\t{\r\n\t\t\t\tref: this.props.forwardRef\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tconst Top = React.cloneElement(Bottom, {\r\n\t\t\tstrokeLinecap: 'round',\r\n\t\t\tonMouseLeave: () => {\r\n\t\t\t\tthis.props.onSelection(false);\r\n\t\t\t},\r\n\t\t\tonMouseEnter: () => {\r\n\t\t\t\tthis.props.onSelection(true);\r\n\t\t\t},\r\n\t\t\t...this.props.extras,\r\n\t\t\tref: null,\r\n\t\t\t'data-linkid': this.props.link.getID(),\r\n\t\t\tstrokeOpacity: this.props.selected ? 0.1 : 0,\r\n\t\t\tstrokeWidth: 20,\r\n\t\t\tfill: 'none',\r\n\t\t\tonContextMenu: (event:any) => {\r\n\t\t\t\tif (!this.props.link.isLocked()) {\r\n\t\t\t\t\tevent.preventBinary();\r\n\t\t\t\t\tthis.props.link.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<g>\r\n\t\t\t\t{Bottom}\r\n\t\t\t\t{Top}\r\n\t\t\t</g>\r\n\t\t);\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { DiagramEngine, LinkWidget, PointModel } from '@projectstorm/react-diagrams-core';\r\nimport { BinaryLinkModel } from './BinaryLinkModel';\r\nimport { BinaryLinkPointWidget } from './BinaryLinkPointWidget';\r\nimport { BinaryLinkSegmentWidget } from './BinaryLinkSegmentWidget';\r\nimport { MouseEvent } from 'react';\r\nimport {clearAllWithoutCurrentModel} from \"../../nodes/functions\";\r\n\r\nexport interface BinaryLinkProps {\r\n\tlink: BinaryLinkModel;\r\n\tdiagramEngine: DiagramEngine;\r\n\tpointAdded?: (point: PointModel, event: MouseEvent) => any;\r\n}\r\n\r\nexport interface BinaryLinkState {\r\n\tselected: boolean;\r\n}\r\n\r\nexport class BinaryLinkWidget extends React.Component<BinaryLinkProps, BinaryLinkState> {\r\n\trefPaths: React.RefObject<SVGPathElement>[];\r\n\r\n\tconstructor(props: BinaryLinkProps) {\r\n\t\tsuper(props);\r\n\t\tthis.refPaths = [];\r\n\t\tthis.state = {\r\n\t\t\tselected: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate(): void {\r\n\t\tthis.setRenderedLinkPath();\r\n\t}\r\n\r\n\tcomponentDidMount(): void {\r\n\t\tthis.setRenderedLinkPath();\r\n\t\tclearAllWithoutCurrentModel(this.props.link,this.props.diagramEngine);\r\n\t}\r\n\r\n\tsetRenderedLinkPath(){\r\n\t\tthis.props.link.setRenderedPaths(\r\n\t\t\tthis.refPaths.map(ref => {\r\n\t\t\t\treturn ref.current;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tcomponentWillUnmount(): void {\r\n\t\tthis.props.link.setRenderedPaths([]);\r\n\t}\r\n\r\n\taddPointToLink(event: MouseEvent, index: number) {\r\n\t\tif (\r\n\t\t\tevent.shiftKey &&\r\n\t\t\t// @ts-ignore\r\n\t\t\tthis.props.link.getSourcePort().getNode().isEditable() &&\r\n\t\t\t!this.props.link.isLocked() &&\r\n\t\t\tthis.props.link.getPoints().length - 1 <= this.props.diagramEngine.getMaxNumberPointsPerLink()\r\n\t\t) {\r\n\t\t\tconst point = new PointModel({\r\n\t\t\t\tlink: this.props.link,\r\n\t\t\t\tposition: this.props.diagramEngine.getRelativeMousePoint(event)\r\n\t\t\t});\r\n\t\t\tthis.props.link.addPoint(point, index);\r\n\t\t\tevent.persist();\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.forceUpdate(() => {\r\n\t\t\t\tthis.props.diagramEngine.getActionEventBus().fireAction({\r\n\t\t\t\t\tevent,\r\n\t\t\t\t\tmodel: point\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tgeneratePoint(point: PointModel): JSX.Element {\r\n\t\treturn (\r\n\t\t\t<BinaryLinkPointWidget\r\n\t\t\t\tkey={point.getID()}\r\n\t\t\t\tpoint={point as any}\r\n\t\t\t\tcolorSelected={this.props.link.getOptions().selectedColor}\r\n\t\t\t\tcolor={this.props.link.getOptions().color}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tgenerateLink(path: string, extraProps: any, id: string | number): JSX.Element {\r\n\t\tconst ref = React.createRef<SVGPathElement>();\r\n\t\tthis.refPaths.push(ref);\r\n\t\treturn (\r\n\t\t\t<BinaryLinkSegmentWidget\r\n\t\t\t\tkey={`link-${id}`}\r\n\t\t\t\tpath={path}\r\n\t\t\t\tselected={this.state.selected}\r\n\t\t\t\tdiagramEngine={this.props.diagramEngine}\r\n\t\t\t\tfactory={this.props.diagramEngine.getFactoryForLink(this.props.link)}\r\n\t\t\t\tlink={this.props.link}\r\n\t\t\t\tforwardRef={ref}\r\n\t\t\t\tonSelection={selected => {\r\n\t\t\t\t\tthis.setState({ selected: selected });\r\n\t\t\t\t}}\r\n\t\t\t\textras={extraProps}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\t//ensure id is present for all points on the path\r\n\t\tvar points = this.props.link.getPoints();\r\n\t\tvar paths = [];\r\n\t\tthis.refPaths = [];\r\n\r\n\t\tif (points.length === 2) {\r\n\t\t\tpaths.push(\r\n\t\t\t\tthis.generateLink(\r\n\t\t\t\t\tthis.props.link.getSVGPath(),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tonMouseDown: (event:any) => {\r\n\t\t\t\t\t\t\tthis.addPointToLink(event, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'0'\r\n\t\t\t\t)\r\n\t\t\t);\r\n\r\n\t\t\t// draw the link as dangeling\r\n\t\t\tif (this.props.link.getTargetPort() == null) {\r\n\t\t\t\tpaths.push(this.generatePoint(points[1]));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t//draw the multiple anchors and complex line instead\r\n\t\t\tfor (let j = 0; j < points.length - 1; j++) {\r\n\t\t\t\tpaths.push(\r\n\t\t\t\t\tthis.generateLink(\r\n\t\t\t\t\t\tLinkWidget.generateLinePath(points[j], points[j + 1]),\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'data-linkid': this.props.link.getID(),\r\n\t\t\t\t\t\t\t'data-point': j,\r\n\t\t\t\t\t\t\tonMouseDown: (event: MouseEvent) => {\r\n\t\t\t\t\t\t\t\tthis.addPointToLink(event, j + 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tj\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t//render the circles\r\n\t\t\tfor (let i = 1; i < points.length - 1; i++) {\r\n\t\t\t\tpaths.push(this.generatePoint(points[i]));\r\n\t\t\t}\r\n\r\n\t\t\tif (this.props.link.getTargetPort() == null) {\r\n\t\t\t\tpaths.push(this.generatePoint(points[points.length - 1]));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn <g data-binary-link-test={this.props.link.getOptions().testName}>{paths}</g>;\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { BinaryLinkModel } from './BinaryLinkModel';\r\nimport { BinaryLinkWidget } from './BinaryLinkWidget';\r\nimport styled from '@emotion/styled';\r\nimport { css, keyframes } from '@emotion/core';\r\nimport { AbstractReactFactory } from '@projectstorm/react-canvas-core';\r\nimport { DiagramEngine } from '@projectstorm/react-diagrams-core';\r\n\r\n\texport const Keyframes = keyframes`\r\n\t\tfrom {\r\n\t\t\tstroke-dashoffset: 24;\r\n\t\t}\r\n\t\tto {\r\n\t\t\tstroke-dashoffset: 0;\r\n\t\t}\r\n\t`;\r\n\r\n\tconst selected = css`\r\n\t\tstroke-dasharray: 10, 2;\r\n\t\tanimation: ${Keyframes} 1s linear infinite;\r\n\t`;\r\n\r\n\texport const Path = styled.path<{ selected: boolean }>`\r\n\t\t${p => p.selected && selected};\r\n\t\tfill: none;\r\n\t\tpointer-events: all;\r\n\t`;\r\n\r\nexport class BinaryLinkFactory<Link extends BinaryLinkModel = BinaryLinkModel> extends AbstractReactFactory<\r\n\tLink,\r\n\tDiagramEngine\r\n> {\r\n\tconstructor(type = 'binary') {\r\n\t\tsuper(type);\r\n\t}\r\n\r\n\tgenerateReactWidget(event:any): JSX.Element {\r\n\t\treturn <BinaryLinkWidget link={event.model} diagramEngine={this.engine} />;\r\n\t}\r\n\r\n\tgenerateModel(event:any): Link {\r\n\t\treturn new BinaryLinkModel() as Link;\r\n\t}\r\n\r\n\tgenerateLinkSegment(model: Link, selected: boolean, path: string) {\r\n\t\treturn (\r\n\t\t\t<Path\r\n\t\t\t\tselected={selected}\r\n\t\t\t\tstroke={selected ? model.getOptions().selectedColor : model.getOptions().color}\r\n\t\t\t\tstrokeWidth={model.getOptions().width}\r\n\t\t\t\td={path}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n","import { QuaternaryNodeWidget } from './QuaternaryNodeWidget';\r\nimport { QuaternaryNodeModel } from './QuaternaryNodeModel';\r\nimport * as React from 'react';\r\nimport { AbstractReactFactory } from '@projectstorm/react-canvas-core';\r\nimport { DiagramEngine } from '@projectstorm/react-diagrams-core';\r\n\r\nexport class QuaternaryNodeFactory extends AbstractReactFactory<QuaternaryNodeModel, DiagramEngine> {\r\n\tconstructor() {\r\n\t\tsuper('quaternary');\r\n\t}\r\n\r\n\tgenerateReactWidget(event:any): JSX.Element {\r\n\t\treturn <QuaternaryNodeWidget engine={this.engine} size={50} model={event.model} />;\r\n\t}\r\n\r\n\tgenerateModel(event:any) {\r\n\t\treturn new QuaternaryNodeModel();\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { AbstractReactFactory } from '@projectstorm/react-canvas-core';\r\nimport { DiagramEngine } from '@projectstorm/react-diagrams-core';\r\nimport {TernaryNodeModel} from \"./TernaryNodeModel\";\r\nimport { TernaryNodeWidget } from './TernaryNodeWidget';\r\n\r\nexport class TernaryNodeFactory extends AbstractReactFactory<TernaryNodeModel, DiagramEngine> {\r\n\tconstructor() {\r\n\t\tsuper('ternary');\r\n\t}\r\n\r\n\tgenerateReactWidget(event:any): JSX.Element {\r\n\t\treturn <TernaryNodeWidget engine={this.engine} size={50} model={event.model} />;\r\n\t}\r\n\r\n\tgenerateModel(event:any) {\r\n\t\treturn new TernaryNodeModel();\r\n\t}\r\n}\r\n","import createEngine,{DiagramModel, DiagramEngine, DefaultDiagramState } from '@projectstorm/react-diagrams';\r\nimport {UnBinaryNodeFactory} from \"./nodes/unbinary/UnBinaryNodeFactory\";\r\nimport {ConstantNodeFactory} from \"./nodes/constant/ConstantNodeFactory\";\r\nimport {BinaryLabelFactory} from \"./labels/binary/BinaryLabelFactory\";\r\nimport { SimplePortFactory } from './nodes/SimplePortFactory';\r\nimport {BinaryLinkFactory} from \"./links/binary/BinaryLinkFactory\";\r\nimport {QuaternaryNodeFactory} from \"./nodes/quaternary/QuaternaryNodeFactory\";\r\nimport {TernaryNodeFactory} from \"./nodes/ternary/TernaryNodeFactory\";\r\nimport {NaryRelationPortModel} from \"./nodes/NaryRelationPortModel\";\r\n\r\nexport class DiagramApplication {\r\n\tprotected activeModel: DiagramModel;\r\n\tprotected diagramEngine: DiagramEngine;\r\n\r\n\tconstructor(diagramModel:DiagramModel) {\r\n\t\tthis.diagramEngine = createEngine();\r\n\t\tthis.setState();\r\n\t\tthis.setModel(diagramModel);\r\n\r\n\t\t//Custom ports access\r\n\t\tthis.diagramEngine.getPortFactories().registerFactory(new SimplePortFactory('nary', config => new NaryRelationPortModel()));\r\n\t\t//Custom nodes access\r\n\t\tthis.diagramEngine.getNodeFactories().registerFactory(new QuaternaryNodeFactory());\r\n\t\tthis.diagramEngine.getNodeFactories().registerFactory(new UnBinaryNodeFactory());\r\n\t\tthis.diagramEngine.getNodeFactories().registerFactory(new ConstantNodeFactory());\r\n\t\tthis.diagramEngine.getNodeFactories().registerFactory(new TernaryNodeFactory());\r\n\t\t//Custom link access\r\n\t\tthis.diagramEngine.getLinkFactories().registerFactory(new BinaryLinkFactory());\r\n\t\t//Custom labels access\r\n\t\tthis.diagramEngine.getLabelFactories().registerFactory(new BinaryLabelFactory());\r\n\t}\r\n\r\n\tpublic setState(){\r\n\t\tconst state = this.diagramEngine.getStateMachine().getCurrentState();\r\n\t\tif (state instanceof DefaultDiagramState) {\r\n\t\t\tstate.dragNewLink.config.allowLooseLinks = false;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setModel(diagramModel: DiagramModel) {\r\n\t\tthis.diagramEngine.setModel(diagramModel);\r\n\t\tthis.activeModel = diagramModel;\r\n\t\t//set number of links to zero, so if we will select a link it will not create a point\r\n\t\t//this.getDiagramEngine().setMaxNumberPointsPerLink(0);\r\n\t}\r\n\r\n\tpublic getActiveModel(): DiagramModel {\r\n\t\treturn this.activeModel;\r\n\t}\r\n\r\n\tpublic getDiagramEngine(): DiagramEngine {\r\n\t\treturn this.diagramEngine;\r\n\t}\r\n}\r\n","import {\r\n  ADD_CONSTANT_NODE,\r\n  ADD_DOMAIN_NODE,\r\n  RENAME_DOMAIN_NODE,\r\n  REMOVE_CONSTANT_NODE,\r\n  REMOVE_DOMAIN_NODE,\r\n  SET_DIAGRAM,\r\n  SYNC_DIAGRAM,\r\n  SYNC_MATH_STATE,\r\n  TOGGLE_EDITABLE_NODES,\r\n  RENAME_CONSTANT_NODE,\r\n  ADD_QUATERNARY_NODE,\r\n  ADD_TERNARY_NODE, IMPORT_APP, IMPORT_DIAGRAM_STATE, REMOVE_QUATERNARY_NODE, REMOVE_TERNARY_NODE, CLEAR_GRAPH_SELECTION\r\n} from \"../actions/action_types\";\r\nimport {UnBinaryNodeModel} from \"../../graph_view/nodes/unbinary/UnBinaryNodeModel\";\r\nimport {\r\n  BASIC_CURVYNESS,\r\n  BOTH,\r\n  FROM,\r\n  FUNCTION,\r\n  PREDICATE, QUATERNARY,\r\n  TERNARY,\r\n  TO,\r\n  UNBINARY\r\n} from \"../../graph_view/nodes/ConstantNames\";\r\nimport {ConstantNodeModel} from \"../../graph_view/nodes/constant/ConstantNodeModel\";\r\nimport {DiagramModel} from \"@projectstorm/react-diagrams\";\r\nimport {BinaryLinkModel} from \"../../graph_view/links/binary/BinaryLinkModel\";\r\nimport {DiagramApplication} from \"../../graph_view/DiagramAplication\";\r\nimport _ from \"lodash\";\r\nimport {TernaryNodeModel} from \"../../graph_view/nodes/ternary/TernaryNodeModel\";\r\nimport {QuaternaryNodeModel} from \"../../graph_view/nodes/quaternary/QuaternaryNodeModel\";\r\n\r\nexport function defaultState(){\r\n  let diagramModel = new DiagramModel();\r\n  return{\r\n    diagramModel: diagramModel,\r\n    diagramEngine: new DiagramApplication(diagramModel).diagramEngine,\r\n    domainNodes: new Map(),\r\n    constantNodes: new Map(),\r\n    ternaryNodes: new Map(),\r\n    quaternaryNodes: new Map(),\r\n    editableNodes: false\r\n  }\r\n}\r\n\r\nfunction diagramReducer(state, action) {\r\n  switch (action.type) {\r\n    case SET_DIAGRAM:\r\n      state.diagramModel = action.diagramModel;\r\n      return state;\r\n    case SYNC_DIAGRAM:\r\n      let value = {...action.value,focusOnBodyFunc:action.focusOnBodyFunc};\r\n      syncDomain(value);\r\n      syncLabels(state);\r\n      syncPredicates(value);\r\n      syncFunctions(value);\r\n      syncConstants(value);\r\n      return state;\r\n    case ADD_DOMAIN_NODE:\r\n      state.domainNodes.set(action.nodeName, action.nodeObject);\r\n      return state;\r\n    case RENAME_DOMAIN_NODE:\r\n      state.domainNodes.set(action.newName, state.domainNodes.get(action.oldName));\r\n      state.domainNodes.delete(action.oldName);\r\n      return state;\r\n    case REMOVE_DOMAIN_NODE:\r\n      state.domainNodes.delete(action.nodeName);\r\n      return state;\r\n    case ADD_CONSTANT_NODE:\r\n      state.constantNodes.set(action.nodeName, action.nodeObject);\r\n      return state;\r\n    case RENAME_CONSTANT_NODE:\r\n      state.constantNodes.set(action.newName, state.constantNodes.get(action.oldName));\r\n      state.constantNodes.delete(action.oldName);\r\n      return state;\r\n    case REMOVE_CONSTANT_NODE:\r\n      state.constantNodes.delete(action.nodeName);\r\n      return state;\r\n    case ADD_TERNARY_NODE:\r\n      state.ternaryNodes.set(action.nodeName,action.nodeObject);\r\n      return state;\r\n    case REMOVE_TERNARY_NODE:\r\n      state.ternaryNodes.delete(action.nodeName);\r\n      return state;\r\n    case ADD_QUATERNARY_NODE:\r\n      state.quaternaryNodes.set(action.nodeName,action.nodeObject);\r\n      return state;\r\n    case REMOVE_QUATERNARY_NODE:\r\n      state.quaternaryNodes.delete(action.nodeName);\r\n      return state;\r\n    case SYNC_MATH_STATE:\r\n      deleteAllLabels(state);\r\n      return state;\r\n    case TOGGLE_EDITABLE_NODES:\r\n      let nodeArray = state.diagramModel.getNodes();\r\n      for (let a = 0; a < nodeArray.length; a++) {\r\n        nodeArray[a].changeEditableState(action.value);\r\n      }\r\n\r\n      let linkArray = state.diagramModel.getLinks();\r\n      for (let i = 0; i < linkArray.length; i++) {\r\n        let labelArray = linkArray[i].getLabels();\r\n        for (let y = 0; y < labelArray.length; y++) {\r\n          labelArray[y].changeEditableState(action.value);\r\n        }\r\n      }\r\n      state.diagramEngine.repaintCanvas();\r\n      return {...state, editableNodes: action.value};\r\n    case IMPORT_APP:\r\n      let diagramModel = new DiagramModel();\r\n      state.diagramEngine.setModel(diagramModel);\r\n      clearDiagramState(state);\r\n      return {...state,diagramModel:diagramModel,diagramCordState:JSON.parse(action.content).diagramCordState,imported:true};\r\n    case IMPORT_DIAGRAM_STATE:\r\n      let values = {...action.state,focusOnBodyFunc:action.focusOnBodyFunc};\r\n      syncDomain(values);\r\n      syncLabels(values.diagramState);\r\n      syncPredicates(values);\r\n      syncFunctions(values);\r\n      syncConstants(values);\r\n      syncNodesCords(values.diagramState);\r\n      return {...state,imported:false};\r\n    case CLEAR_GRAPH_SELECTION:\r\n      state.diagramModel.clearSelection();\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction syncNodesCords(state){\r\n  let nodeState = new Map([[\"domainNodes\", state.domainNodes],[\"constantNodes\", state.constantNodes],[\"ternaryNodes\", state.ternaryNodes],[\"quaternaryNodes\",state.quaternaryNodes]]);\r\n  let diagramCordState = state.diagramCordState;\r\n  let naryNodeMap = new Map();\r\n\r\n  for (let nodeTypeMap of nodeState.values()) {\r\n    if(nodeTypeMap === \"ternaryNodes\" || nodeTypeMap === \"quaternaryNodes\"){\r\n      for(let node of nodeTypeMap.values()){\r\n        let nodeValue = node.getNodeNameCombination();\r\n        if (nodeValue) {\r\n          naryNodeMap.set(nodeValue.join(\",\"), node);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  for(let mapName of nodeState.keys()){\r\n    for(let [nodeName,nodeObject] of nodeState.get(mapName).entries()){\r\n      if(diagramCordState.hasOwnProperty(mapName)){\r\n        let nodeNameInObject = (mapName === \"domainNodes\" || mapName === \"constantNodes\")?nodeName:nodeObject.getNodeNameCombination();\r\n        if(diagramCordState[mapName].hasOwnProperty(nodeNameInObject)){\r\n          let cord = diagramCordState[mapName][nodeNameInObject];\r\n          nodeObject.setPosition(cord.x,cord.y);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  state.diagramEngine.repaintCanvas();\r\n}\r\n\r\nfunction syncLabels(state){\r\n  let linkArray = state.diagramModel.getLinks();\r\n  for (let i = 0; i<linkArray.length;i++) {\r\n    if(linkArray[i].label && linkArray[i].getLabels().length === 0){\r\n      linkArray[i].addLabel(linkArray[i].label);\r\n    }\r\n  }\r\n}\r\n\r\nfunction deleteAllLabels(action) {\r\n  let linkArray = action.diagramModel.getLinks();\r\n  for(let i = 0; i<linkArray.length;i++){\r\n    if (linkArray[i] instanceof BinaryLinkModel) {\r\n      linkArray[i].clearLabels();\r\n    }\r\n  }\r\n}\r\n\r\nfunction createNode(nodeObject,nodeName,nodeSet,diagramModel,diagramCanvas){\r\n  let canvasWidth = diagramCanvas.clientWidth;\r\n  let canvasHeight = diagramCanvas.clientHeight;\r\n\r\n  nodeObject.setPosition(Math.random() * (canvasWidth - canvasWidth * 0.2) + canvasWidth * 0.05, Math.random() * (canvasHeight - canvasHeight * 0.2) + canvasHeight * 0.05);\r\n\r\n  addNodeState(nodeName, nodeObject, nodeSet);\r\n  diagramModel.addNode(nodeObject);\r\n}\r\n\r\nfunction createLink(sourcePort,targetPort,diagramModel){\r\n  let link = new BinaryLinkModel({},false);\r\n  link.setSourcePort(sourcePort);\r\n  link.setTargetPort(targetPort);\r\n  diagramModel.addAll(link);\r\n  return link;\r\n}\r\n\r\nfunction createLabel(linkWhereLabelShouldBeAdded){\r\n  let label = new BinaryLinkModel({},false);\r\n  if(linkWhereLabelShouldBeAdded.getTargetPort().getNode() === linkWhereLabelShouldBeAdded.getSourcePort().getNode()){\r\n    label.setCurvyness(BASIC_CURVYNESS);\r\n  }\r\n  linkWhereLabelShouldBeAdded.addLabel(label);\r\n}\r\n\r\nfunction syncConstants(values){\r\n  if(values.structure.constants!== null){\r\n    let constantObjects = new Map(Object.entries(values.structure.constants));\r\n    let constantState = values.diagramState.constantNodes;\r\n    let domainState = values.diagramState.domainNodes;\r\n    let diagramModel = values.diagramState.diagramModel;\r\n    let diagramCanvas = values.diagramState.diagramEngine.getCanvas();\r\n\r\n    for(let [nodeName,nodeObject] of constantState.entries()) {\r\n      if (!constantObjects.has(nodeName)) {\r\n        removeNodeState(nodeName, constantState);\r\n        removeWholeNode(nodeObject, diagramModel);\r\n      }\r\n    }\r\n\r\n    for(let [nodeName,nodeProperties] of constantObjects.entries()) {\r\n      if(!constantState.has(nodeName)) {\r\n        let node = new ConstantNodeModel(nodeName, 'rgb(92,192,125)', {\r\n          \"addConstantNode\": values.addConstantNode,\r\n          \"renameConstantNode\": values.renameConstantNode,\r\n          \"removeConstantNode\": values.removeConstantNode,\r\n          \"setConstantValueFromLink\": values.setConstantValueFromLink,\r\n          \"focusOnBodyElement\": values.focusOnBodyFunc,\r\n          \"store\": values.store,\r\n        });\r\n        createNode(node,nodeName,constantState,diagramModel,diagramCanvas);\r\n        if(nodeProperties.value.length!==0){\r\n          createLink(node.getMainPort(),domainState.get(nodeProperties.value).getMainPort(),diagramModel);\r\n        }\r\n      }\r\n      else{\r\n        let nodeObject = constantState.get(nodeName);\r\n\r\n        //When entity is removed it would cause a dispatch of another Redux Function and we would get error, by setting callReduxFunc on false we will avoid this problem\r\n        interruptCallingReduxFunc(nodeObject.getMainPort());\r\n\r\n        nodeObject.removeAllLinks();\r\n        if(nodeProperties.value.length!==0){\r\n          createLink(nodeObject.getMainPort(),domainState.get(nodeProperties.value).getMainPort(),diagramModel);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction interruptCallingReduxFunc(port){\r\n  for (let link of _.values(port.getLinks())) {\r\n    if(link instanceof BinaryLinkModel){\r\n      link.setCallReduxFunc(false);\r\n    }\r\n  }\r\n}\r\n\r\nfunction addNodeState(nodeName,nodeObject,nodeSet){\r\n  nodeSet.set(nodeName,nodeObject);\r\n}\r\n\r\nfunction removeNodeState(nodeName,nodeSet){\r\n  nodeSet.delete(nodeName);\r\n}\r\n\r\nfunction clearDiagramState(diagramState){\r\n  diagramState.domainNodes.clear();\r\n  diagramState.constantNodes.clear();\r\n  diagramState.ternaryNodes.clear();\r\n  diagramState.quaternaryNodes.clear();\r\n}\r\n\r\nfunction clearCertainNodeState(nodeState){\r\n  nodeState.clear();\r\n}\r\n\r\nfunction syncLanguageElementType(values,type) {\r\n  let elementInterpretationMap = type === PREDICATE ? values.structureObject.iPredicate : values.structureObject.iFunction;\r\n  let portMap = new Map([[\"1\", new Map()], [\"2\", new Map()], [\"3\", new Map()], [\"4\", new Map()]]);\r\n\r\n  if (elementInterpretationMap && elementInterpretationMap.size > 0) {\r\n    for (let [key, value] of elementInterpretationMap.entries()) {\r\n      let keyWithoutArity = key.split('/')[0];\r\n      let arityWithoutKey = key.split('/')[1];\r\n      let portMapArity = portMap.get(arityWithoutKey);\r\n\r\n      if (type === PREDICATE) {\r\n        addToPredicatePortMap(portMapArity, value, keyWithoutArity);\r\n      } else {\r\n        addToFunctionPortMap(portMapArity, value, keyWithoutArity);\r\n      }\r\n    }\r\n  }\r\n  return portMap;\r\n}\r\n\r\nfunction addToPredicatePortMap(portMapArity,value,keyWithoutArity) {\r\n  for (let currentNodeValue of value) {\r\n    currentNodeValue = currentNodeValue.join(\",\");\r\n    if (portMapArity.has(currentNodeValue)) {\r\n      portMapArity.get(currentNodeValue).add(keyWithoutArity);\r\n    } else {\r\n      portMapArity.set(currentNodeValue, new Set());\r\n      portMapArity.get(currentNodeValue).add(keyWithoutArity);\r\n    }\r\n  }\r\n}\r\n\r\nfunction addToFunctionPortMap(portMapArity,value,keyWithoutArity) {\r\n  for (let currentNodeValue in value) {\r\n    if (value.hasOwnProperty(currentNodeValue)) {\r\n      let currNodeValueParsed = JSON.parse(currentNodeValue).join(\",\") + (\",\" + value[currentNodeValue]);\r\n      if (portMapArity.has(currNodeValueParsed)) {\r\n        portMapArity.get(currNodeValueParsed).add(keyWithoutArity);\r\n      } else {\r\n        portMapArity.set(currNodeValueParsed, new Set());\r\n        portMapArity.get(currNodeValueParsed).add(keyWithoutArity);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction syncPredicates(values) {\r\n  let portMap = syncLanguageElementType(values,PREDICATE);\r\n  syncUnaryPredicates(portMap.get(\"1\"),values.diagramState.domainNodes);\r\n  syncBinaryLinkElement(portMap.get(\"2\"),values.diagramState,PREDICATE);\r\n  syncNaryLanguageElements(portMap.get(\"3\"),values,TERNARY,PREDICATE);\r\n  syncNaryLanguageElements(portMap.get(\"4\"),values,QUATERNARY,PREDICATE);\r\n }\r\n\r\n function syncNaryLanguageElements(portMap,values,type,typeElement) {\r\n   let nodes = new Map();\r\n   let diagramState = values.diagramState;\r\n   let nodesOfType = type === TERNARY ? diagramState.ternaryNodes : diagramState.quaternaryNodes;\r\n\r\n   for (let node of nodesOfType.values()) {\r\n     let nodeValue = node.getNodeNameCombination();\r\n     if (nodeValue) {\r\n       typeElement === PREDICATE?node.clearPredicates():node.clearFunctions();\r\n       nodes.set(nodeValue.join(\",\"), node);\r\n     }\r\n   }\r\n\r\n   let reduxProps = {\r\n     \"addTernaryNode\":values.addTernaryNode,\r\n     \"removeTernaryNode\":values.removeTernaryNode,\r\n     \"addQuaternaryNode\":values.addQuaternaryNode,\r\n     \"removeQuaternaryNode\":values.removeQuaternaryNode,\r\n     \"addTernaryPredicate\":values.addTernaryPredicate,\r\n     \"removeTernaryFunction\":values.removeTernaryFunction,\r\n     \"addBinaryFunction\":values.addBinaryFunction,\r\n     \"removeTernaryPredicate\":values.removeTernaryPredicate,\r\n     \"removeBinaryFunction\":values.removeBinaryFunction,\r\n     \"addQuaternaryPredicate\":values.addQuaternaryPredicate,\r\n     \"removeQuaternaryPredicate\":values.removeQuaternaryPredicate,\r\n     \"focusOnBodyElement\": values.focusOnBodyFunc,\r\n     \"editable\": values.diagramState.editableNodes,\r\n     \"store\": values.store\r\n   };\r\n\r\n   for (let [nodePortMapCombination, nodePortMapCombinationSet] of portMap.entries()) {\r\n     let nodeName = getNodeName(nodesOfType,type);\r\n\r\n     if (!nodes.has(nodePortMapCombination)) {\r\n       let node = type === TERNARY?new TernaryNodeModel({name:nodeName,reduxProps:reduxProps,numberOfPorts:3}):new QuaternaryNodeModel({name:nodeName,reduxProps:reduxProps,numberOfPorts:4});\r\n       createNode(node,nodeName,nodesOfType,diagramState.diagramModel,diagramState.diagramEngine.getCanvas());\r\n       createLinksForNaryNodes(node,nodePortMapCombination.split(\",\"),diagramState.domainNodes,diagramState.diagramModel);\r\n       nodes.set(nodePortMapCombination,node);\r\n     }\r\n\r\n     let naryNode = nodes.get(nodePortMapCombination);\r\n     for(let element of nodePortMapCombinationSet){\r\n       typeElement === PREDICATE?naryNode.addPredicateToSet(element):naryNode.addFunctionToSet(element);\r\n     }\r\n   }\r\n }\r\n\r\n function createLinksForNaryNodes(naryNode,nodeNames,domainNodes,diagramModel){\r\n  for(let i = 0; i<naryNode.getNumberOfPorts();i++){\r\n    createLink(naryNode.getPortByIndex(i),domainNodes.get(nodeNames[i]).getMainPort(),diagramModel);\r\n  }\r\n }\r\n\r\n function getNodeName(diagramStateNodesOfType,type){\r\n  let name = type;\r\n  let index = 0;\r\n  while(diagramStateNodesOfType.has(name+index)){\r\n    index++;\r\n  }\r\n  return name+index;\r\n }\r\n\r\nfunction syncFunctions(values) {\r\n  let portMap = syncLanguageElementType(values,FUNCTION);\r\n  syncBinaryLinkElement(portMap.get(\"1\"),values.diagramState,FUNCTION);\r\n  syncNaryLanguageElements(portMap.get(\"2\"),values,TERNARY,FUNCTION);\r\n  syncNaryLanguageElements(portMap.get(\"3\"),values,QUATERNARY,FUNCTION);\r\n}\r\n\r\nfunction syncUnaryPredicates(portMap,domainState) {\r\n  for (let [currentNodeName, currentNodeObject] of domainState.entries()) {\r\n    let setOfUnaryPredicatesForNode = portMap.get(currentNodeName);\r\n\r\n    if (portMap.has(currentNodeName)) {\r\n      //added new predicates\r\n      let currentNodePredicates = currentNodeObject.getUnaryPredicates();\r\n      for (let predicateName of setOfUnaryPredicatesForNode) {\r\n        if (!currentNodePredicates.has(predicateName)) {\r\n          currentNodeObject.addUnaryPredicateToSet(predicateName);\r\n        }\r\n      }\r\n\r\n      //delete old predicates\r\n      for (let predicate of currentNodePredicates) {\r\n        if (!setOfUnaryPredicatesForNode.has(predicate)) {\r\n          currentNodeObject.removeUnaryPredicateFromSet(predicate);\r\n        }\r\n      }\r\n\r\n    } else {\r\n      currentNodeObject.clearPredicates();\r\n    }\r\n  }\r\n}\r\n\r\nfunction createBinaryLinks(portMap,existingLinksCombination,diagramState){\r\n  let linksToChange = new Set();\r\n  for(let combination of portMap.keys()){\r\n    let firstComb = combination.split(\",\")[0];\r\n    let secondComb = combination.split(\",\")[1];\r\n    let reversedComb = combination.split(\",\")[1]+\",\"+combination.split(\",\")[0];\r\n    console.log(\"comb\",firstComb,secondComb);\r\n    if(!existingLinksCombination.has(combination) && !existingLinksCombination.has(reversedComb)){\r\n      if(!diagramState.domainNodes.has(firstComb) || !diagramState.domainNodes.has(secondComb)){\r\n        return;\r\n      }\r\n      let sourcePort = diagramState.domainNodes.get(firstComb).getMainPort();\r\n      let targetPort = diagramState.domainNodes.get(secondComb).getMainPort();\r\n      if(sourcePort === targetPort){\r\n        linksToChange.add(createLink(sourcePort,sourcePort.getNode().getAppendPort(),diagramState.diagramModel));\r\n      }\r\n      else{\r\n        linksToChange.add(createLink(sourcePort,targetPort,diagramState.diagramModel));\r\n      }\r\n      existingLinksCombination.add(combination);\r\n      existingLinksCombination.add(reversedComb);\r\n    }\r\n  }\r\n  return linksToChange;\r\n}\r\n\r\nfunction addLanguageElementToBinaryLinks(portMap,nodeCombinationKey,reversedNodeCombinationKey,label,type){\r\n  if(portMap.has(nodeCombinationKey)){\r\n    for(let languageElement of portMap.get(nodeCombinationKey)){\r\n      type === PREDICATE?label.addBinaryPredicateToSetWithDirection(languageElement,FROM):label.addUnaryFunctionToSetWithDirection(languageElement,FROM);\r\n    }\r\n  }\r\n  if(portMap.has(reversedNodeCombinationKey)){\r\n    for(let languageElement of portMap.get(reversedNodeCombinationKey)){\r\n      let labelLanguageSet = type === PREDICATE?label.getPredicates():label.getFunctions();\r\n      if(labelLanguageSet.has(languageElement)){\r\n        type === PREDICATE?label.addBinaryPredicateToSetWithDirection(languageElement,BOTH):label.addUnaryFunctionToSetWithDirection(languageElement,BOTH);\r\n      }\r\n      else{\r\n        type === PREDICATE?label.addBinaryPredicateToSetWithDirection(languageElement,TO):label.addUnaryFunctionToSetWithDirection(languageElement,TO);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction syncBinaryLinkElement(portMap,diagramState,type) {\r\n  let linksToRemove = new Set();\r\n  let existingLinksCombination = new Set();\r\n\r\n  for(let link of diagramState.diagramModel.getLinks()){\r\n    let label = link.getLabel();\r\n    if(label){\r\n      let labelLanguageSet = type===PREDICATE?label.getPredicates():label.getFunctions();\r\n\r\n      type === PREDICATE?label.clearPredicates():label.clearFunctions();\r\n      let nodeCombinationKey = label.getNodeCombinationKey();\r\n      let reversedNodeCombinationKey = label.getReversedNodeCombinationKey();\r\n\r\n      existingLinksCombination.add(nodeCombinationKey);\r\n      existingLinksCombination.add(reversedNodeCombinationKey);\r\n\r\n      addLanguageElementToBinaryLinks(portMap,nodeCombinationKey,reversedNodeCombinationKey,label,type);\r\n\r\n      if(labelLanguageSet.size === 0){\r\n        linksToRemove.add(link);\r\n      }\r\n    }\r\n  }\r\n  let linksToChange = createBinaryLinks(portMap,existingLinksCombination,diagramState);\r\n  for(let link of linksToChange){\r\n    let label = link.getLabel();\r\n    addLanguageElementToBinaryLinks(portMap,label.getNodeCombinationKey(),label.getReversedNodeCombinationKey(),label,type);\r\n  }\r\n  //removeLinksToRemove(linksToRemove);\r\n  return linksToRemove;\r\n}\r\n\r\nfunction removeLinksToRemove(linksToRemove){\r\n  for(let link of linksToRemove){\r\n    link.remove();\r\n  }\r\n}\r\n\r\nfunction syncDomain(values) {\r\n  let domain = (values.structureObject.domain);\r\n  let domainState = values.diagramState.domainNodes;\r\n  let diagramModel = values.diagramState.diagramModel;\r\n  let diagramCanvas = values.diagramState.diagramEngine.getCanvas();\r\n\r\n  if (domain == null || domain.length === 0) {\r\n    for(let node of domainState.values()){\r\n      removeWholeNode(node, diagramModel);\r\n    }\r\n    clearCertainNodeState(domainState);\r\n    return;\r\n  }\r\n\r\n  let existingDomainNodes = [];\r\n  for (let [nodeName, nodeObject] of domainState.entries()) {\r\n    if (domain.has(nodeName)) {\r\n      existingDomainNodes.push(nodeName);\r\n    } else {\r\n      removeNodeState(nodeName, domainState);\r\n      removeWholeNode(nodeObject, diagramModel);\r\n    }\r\n  }\r\n\r\n  for(let nodeName of domain){\r\n    if (!existingDomainNodes.includes(nodeName)) {\r\n      let node = new UnBinaryNodeModel(nodeName, 'rgb(92,192,125)', {\r\n        \"addDomainNode\":values.addDomainNode,\r\n        \"renameDomainNode\": values.renameDomainNode,\r\n        \"removeDomainNode\":values.removeDomainNode,\r\n        \"addUnaryPredicate\":values.addUnaryPredicate,\r\n        \"addUnaryFunction\": values.addUnaryFunction,\r\n        \"addBinaryPredicate\": values.addBinaryPredicate,\r\n        \"removeUnaryPredicate\":values.removeUnaryPredicate,\r\n        \"removeUnaryFunction\": values.removeUnaryFunction,\r\n        \"removeBinaryPredicate\": values.removeBinaryPredicate,\r\n        \"changeDirectionOfBinaryRelation\": values.changeDirectionOfBinaryRelation,\r\n        \"focusOnBodyElement\": values.focusOnBodyFunc,\r\n        \"editable\":values.diagramState.editableNodes,\r\n        \"store\":values.store,\r\n      });\r\n      createNode(node,nodeName,domainState,diagramModel,diagramCanvas);\r\n    }\r\n  }\r\n}\r\n\r\nfunction removeWholeNode(node,diagramModel){\r\n  for(let portObject of Object.values(node.getPorts())){\r\n    interruptCallingReduxFunc(portObject);\r\n    node.removePort(portObject); //ensures that all links are deleted\r\n  }\r\n diagramModel.removeNode(node);\r\n}\r\n\r\nexport default diagramReducer;","import Structure from \"../../model/Structure\";\r\nimport Language from \"../../model/Language\";\r\nimport languageReducer from \"./language\";\r\nimport structureReducer from \"./structure\";\r\nimport expressionsReducer from \"./expressions\";\r\nimport teacherModeReducer from \"./teacherMode\";\r\nimport {IMPORT_APP} from \"../actions/action_types\";\r\nimport diagramReducer,{ defaultState as diagramDefaultState } from \"./diagram\";\r\nimport {defaultState as expressionsDefaultState} from \"./expressions\";\r\nimport {defaultState as structureDefaultState} from \"./structure\";\r\nimport {defaultState as languageDefaultState} from \"./language\";\r\nimport { DiagramModel } from \"@projectstorm/react-diagrams\";\r\n\r\nconst defaultState = {\r\n    structureObject: new Structure(new Language()),\r\n    common: {\r\n        teacherMode: false\r\n    },\r\n    language: languageDefaultState(),\r\n    structure: structureDefaultState(),\r\n    expressions: expressionsDefaultState(),\r\n    diagramState:diagramDefaultState()\r\n};\r\n\r\nfunction checkImportedState(state:any) {\r\n    if (!state.common || !state.language || !state.structure) {\r\n        throw 'State is not valid!';\r\n    }\r\n    if (!state.language.constants || !state.language.predicates || !state.language.functions) {\r\n        throw 'State is not valid!';\r\n    }\r\n}\r\n\r\nfunction root(state = defaultState, action:any) {\r\n    if (action.type === IMPORT_APP) {\r\n        try {\r\n            state = JSON.parse(action.content);\r\n            checkImportedState(state);\r\n            state.structureObject = new Structure(new Language());\r\n            state.structure.variables.object = new Map();\r\n            state.diagramState = action.diagramState;\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n\r\n    }\r\n    let common = teacherModeReducer(state.common, action);\r\n    let language = languageReducer(state.language, action, state.structureObject);\r\n    let structure = structureReducer(state.structure, action, state.structureObject);\r\n    let expressions = expressionsReducer(state.expressions, action, state.structureObject, state.structure.variables.object);\r\n    let diagramState = diagramReducer(state.diagramState, action);\r\n\r\n    return {\r\n        structureObject: state.structureObject,\r\n        common: common,\r\n        language: language,\r\n        structure: structure,\r\n        expressions: expressions,\r\n        diagramState: diagramState\r\n    }\r\n}\r\n\r\nexport default root;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport AppContainer from \"./redux/containers/AppContainer\";\r\nimport {createStore} from \"redux\";\r\nimport reducer from \"./redux/reducers\";\r\n\r\n\r\n// @ts-ignore\r\nconst store = createStore(reducer);\r\n\r\nconst Main = () => (\r\n    <main className=\"container\">\r\n        <AppContainer store={store}/>\r\n    </main>\r\n);\r\n\r\nReactDOM.render(<Main />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}